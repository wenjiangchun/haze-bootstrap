// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../../support/PromiseLightweight ./Graphics3DGraphic ./Graphics3DSymbolLayerFactory".split(" "),function(u,v,p,q,r,t){return function(l){function c(b,f,d){var a=l.call(this)||this;a.symbol=b;b=b.symbolLayers;d&&(b=d.concat(b));d=b.length;a.childGraphics3DSymbols=Array(b.length);a.childGraphics3DSymbolPromises=Array(b.length);for(var e=f.layerOrder,k=0,c=0,m=!1,n=function(a,b){b&&(this.childGraphics3DSymbols[a]=b,c++);k--;!this.isRejected()&&
m&&1>k&&(0<c?this.resolve():this.reject())},g=0;g<d;g++){var h=b.getItemAt(g);!1!==h.enabled&&(f.layerOrder=e+(1-(1+g)/d),f.layerOrderDelta=1/d,h=t.make(h,f,h._ignoreDrivers))&&(k++,a.childGraphics3DSymbolPromises[g]=h,h.then(n.bind(a,g,h),n.bind(a,g,null)))}f.layerOrder=e;m=!0;!a.isRejected()&&1>k&&(0<c?a.resolve():a.reject());return a}p(c,l);c.prototype.createGraphics3DGraphic=function(b,f,d){for(var a=Array(this.childGraphics3DSymbols.length),e=0;e<this.childGraphics3DSymbols.length;e++){var c=
this.childGraphics3DSymbols[e];c&&(a[e]=c.createGraphics3DGraphic(b,f))}return new r(b,d||this,a)};c.prototype.layerPropertyChanged=function(b,f){for(var d=this.childGraphics3DSymbols.length,a=0;a<d;a++){var e=this.childGraphics3DSymbols[a];if(e&&!e.layerPropertyChanged(b,f,a))return!1}return!0};c.prototype.applyRendererDiff=function(b,f,d){return this.isResolved()?this.childGraphics3DSymbols.reduce(function(a,e,c){return a&&(!e||e.applyRendererDiff(b,f,d,c))},!0):!1};c.prototype.getFastUpdateStatus=
function(){var b=0,c=0,d=0;this.childGraphics3DSymbolPromises.forEach(function(a){a&&!a.isFulfilled()?b++:a&&a.isFastUpdatesEnabled()?d++:a&&c++});return{loading:b,slow:c,fast:d}};c.prototype.setDrawOrder=function(b,c){for(var d=this.childGraphics3DSymbols.length,a=1/d,e=0;e<d;e++){var f=this.childGraphics3DSymbols[e];f&&f.setDrawOrder(b+(1-(1+e)/d),a,c)}};c.prototype.destroy=function(){this.isFulfilled()||this.reject();for(var b=0;b<this.childGraphics3DSymbolPromises.length;b++)this.childGraphics3DSymbolPromises[b]&&
this.childGraphics3DSymbolPromises[b].destroy()};return c}(q.Promise)});