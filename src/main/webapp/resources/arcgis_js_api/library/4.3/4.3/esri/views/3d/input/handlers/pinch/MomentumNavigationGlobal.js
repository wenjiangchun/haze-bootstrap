// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/tsSupport/extendsHelper ../../../lib/glMatrix ./MomentumNavigationBase ./PinchNavigationGlobal".split(" "),function(g,m,n,b,p,k){var h=b.vec3d.create();g=function(g){function f(a,e){a=g.call(this,a,e)||this;a._panAxisOrDirection=b.vec3d.create();a._centerOnScreen=b.vec2.create();a._centerOnSphere=b.vec3d.create();a._tmpSphereCenter=b.vec3d.create();a._tmpScaleAxis=b.vec3d.create();a._verticalPlane={distance:0,normal:b.vec3d.create()};a._verticalCenter=b.vec3d.create();
return a}n(f,g);f.prototype.setParameters=function(a,e,d,c){this._radius=a;b.vec2.set(e,this._centerOnScreen);b.vec3d.set(d,this._centerOnSphere);this._mode=c};f.prototype.addPanValue=function(a,e,d){this.pan.estimator.add(a[0],a[1],e);b.vec3d.set(d,this._panAxisOrDirection)};f.prototype.addRotationValue=function(a){this.rotation.estimator.add(a)};f.prototype.addScaleValue=function(a){this.zoom.estimator.add(a)};f.prototype.setVerticalParameters=function(a,e){b.vec3d.set(e,this._verticalCenter);b.vec3d.set(a.normal,
this._verticalPlane.normal);this._verticalPlane.distance=a.distance};f.prototype.onUpdate=function(a,e,d){var c=this._radius,f=this._centerOnScreen,g=this._centerOnSphere;if(this.zoom.momentum){var l=this.zoom.momentum.valueDelta(a,e);this._mode===k.PanMode.Horizontal?(this.helper.spherical.applyZoom(c,this.view,d,l),this.helper.spherical.makeRenderCoordSpherePoint(c,d,f,this._tmpSphereCenter),c=this.helper.spherical.rotationFromPoints(c,g,this._tmpSphereCenter,this._tmpScaleAxis),this.helper.applyRotation(d,
h,this._tmpScaleAxis,c)):this.helper.planar.applyZoom(this._verticalPlane,this.view,d,this._verticalCenter,l)}this.pan.momentum&&(this._mode===k.PanMode.Horizontal?(c=this.helper.spherical.rotationFromPoints(this._radius,this.pan.momentum.dataOldest,this.pan.momentum.dataNewest,this._panAxisOrDirection),c/=this.pan.momentum.dataTimeDelta,c*=this.pan.momentum.velocityFactor(a),this.helper.applyRotation(d,h,this._panAxisOrDirection,c*e)):(c=b.vec3d.dist(this.pan.momentum.dataOldest,this.pan.momentum.dataNewest),
c/=this.pan.momentum.dataTimeDelta,c*=this.pan.momentum.velocityFactor(a),b.vec3d.normalize(this._panAxisOrDirection),b.vec3d.scale(this._panAxisOrDirection,c*e),b.vec3d.subtract(d.eye,this._panAxisOrDirection),b.vec3d.subtract(d.center,this._panAxisOrDirection),d.markViewDirty()));this.rotation.momentum&&(a=this.rotation.momentum.valueDelta(a,e),this.helper.applyRotation(d,h,g,a))};return f}(p.MomentumNavigationBase);m.MomentumNavigationGlobal=g});