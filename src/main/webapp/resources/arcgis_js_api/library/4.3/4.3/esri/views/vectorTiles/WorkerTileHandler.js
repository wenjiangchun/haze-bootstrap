// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../../core/executeAsync ./VertexMemoryBuffer ./IndexMemoryBuffer ./TileParser ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./Placement ./GeometryUtils".split(" "),function(q,a,c,z,n,l,d,b,e,h,m,r,k,G){return function(){function a(a,b,e,h){void 0===h&&(h=0);this.rotation=0;this._symbolBuckets=[];this.tileKey=a;this.refKey=b;this._workerTileHandler=e;this.status=
0;this.rotation=h;this.placementEngine=new k.PlacementEngine(G.C_DEG_TO_RAD*h)}a.prototype.setDataAndParse=function(a,b){var k=this;this.polygonVertexBuffer=new l.PolygonMemoryBuffer;this.polygonOutlineVertexBuffer=new l.PolygonOutlineMemoryBuffer;this.polygonIndexBuffer=new d.TriangleElementMemoryBuffer;this.polygonOutlineIndexBuffer=new d.TriangleElementMemoryBuffer;this.lineVertexBuffer=new l.LineMemoryBuffer;this.lineIndexBuffer=new d.TriangleElementMemoryBuffer;this.lineJoinVertexBuffer=new l.LineJoinMemoryBuffer;
this.markerVertexBuffer=new l.SymbolMemoryBuffer;this.markerIndexBuffer=new d.TriangleElementMemoryBuffer;this.textVertexBuffer=new l.SymbolMemoryBuffer;this.textIndexBuffer=new d.TriangleElementMemoryBuffer;var z=new c(function(a){k.status=6});this._parse(a,b).then(function(a){k.placementEngine=null;for(var b=new Uint32Array([2,k.polygonVertexBuffer.sizeInBytes,3,k.polygonOutlineVertexBuffer.sizeInBytes,6,k.polygonIndexBuffer.sizeInBytes,7,k.polygonOutlineIndexBuffer.sizeInBytes,0,k.lineVertexBuffer.sizeInBytes,
8,k.lineIndexBuffer.sizeInBytes,1,k.lineJoinVertexBuffer.sizeInBytes,4,k.markerVertexBuffer.sizeInBytes,9,k.markerIndexBuffer.sizeInBytes,5,k.textVertexBuffer.sizeInBytes,10,k.textIndexBuffer.sizeInBytes]),d=[],c=a.length,G=0;G<c;G++){var n=a[G];n instanceof h?(d.push(n.layerIndex),d.push(1),d.push(n.polygonIndexStart),d.push(n.polygonIndexCount),d.push(n.polygonOutlineIndexStart),d.push(n.polygonOutlineIndexCount)):n instanceof m?(d.push(n.layerIndex),d.push(2),d.push(n.triangleIndexStart),d.push(n.triangleIndexCount),
d.push(n.connectorStart),d.push(n.connectorCount)):n instanceof r?(d.push(n.layerIndex),d.push(3),d.push(0===n.textIndexCount?0:n.textIndexStart),d.push(n.textIndexCount),d.push(n.sdfMarker?1:0),n=n.markerPageMap,d.push(n.size),n.forEach(function(a,b){d.push(b);d.push(a[0]);d.push(a[1])})):n instanceof e&&(d.push(n.layerIndex),d.push(0))}a=new Uint32Array(d);var c=k.polygonVertexBuffer.toBuffer(),G=k.polygonOutlineVertexBuffer.toBuffer(),n=k.polygonIndexBuffer.toBuffer(),l=k.polygonOutlineIndexBuffer.toBuffer(),
H=k.lineVertexBuffer.toBuffer(),M=k.lineIndexBuffer.toBuffer(),B=k.lineJoinVertexBuffer.toBuffer(),X=k.markerVertexBuffer.toBuffer(),u=k.markerIndexBuffer.toBuffer(),t=k.textVertexBuffer.toBuffer(),w=k.textIndexBuffer.toBuffer();k.placementEngine=null;k.polygonVertexBuffer=null;k.polygonIndexBuffer=null;k.polygonOutlineVertexBuffer=null;k.polygonOutlineIndexBuffer=null;k.lineVertexBuffer=null;k.lineIndexBuffer=null;k.lineJoinVertexBuffer=null;z.resolve({data:{bufferDataInfo:b.buffer,bucketDataInfo:a.buffer,
bufferData:[c,G,n,l,H,M,B,X,u,t,w]},buffers:[c,n,G,l,H,M,B,X,u,t,w,b.buffer,a.buffer]})});return z.promise};a.prototype.addBucket=function(a){this._symbolBuckets.push(a)};a.prototype.updateSymbols=function(a){var b=this,e=this._symbolBuckets;if(!e)return z.resolve({data:null});this.rotation=a;var h=new k.PlacementEngine(a/256*360*G.C_DEG_TO_RAD),m=new l.SymbolMemoryBuffer,c=new d.TriangleElementMemoryBuffer,r=new l.SymbolMemoryBuffer,t=new d.TriangleElementMemoryBuffer,C=[],A=e.length,N=0;return n(function(){if(6===
b.status)return!0;if(N<A){var a=e[N++].copy(m,c,r,t,h);a&&(C.push(a),a.updateSymbols())}return N>=A},5).then(function(){if(6===b.status||0===m.sizeInBytes&&0===c.sizeInBytes&&0===r.sizeInBytes&&0===t.sizeInBytes)return{data:null};var a=new Uint32Array([4,m.sizeInBytes,9,c.sizeInBytes,5,r.sizeInBytes,10,t.sizeInBytes]),e=[];A=C.length;for(var h=0;h<A;h++){var d=C[h];e.push(d.layerIndex);e.push(3);e.push(0===d.textIndexCount?0:d.textIndexStart);e.push(d.textIndexCount);e.push(d.sdfMarker?1:0);d=d.markerPageMap;
e.push(d.size);d.forEach(function(a,b){e.push(b);e.push(a[0]);e.push(a[1])})}var h=new Uint32Array(e),d=m.toBuffer(),k=c.toBuffer(),v=r.toBuffer(),n=t.toBuffer();return{data:{bufferDataInfo:a.buffer,bucketDataInfo:h.buffer,bufferData:[d,k,v,n]},buffers:[d,k,v,n,a.buffer,h.buffer]}}).otherwise(function(a){return z.resolve({data:null})})};a.prototype.setObsolete=function(){this.status=6};a.prototype.getLayers=function(){return this._workerTileHandler.getLayers()};a.prototype.getWorkerTileHandler=function(){return this._workerTileHandler};
a.prototype._parse=function(a,e){return a&&0!==a.byteLength?(new b(a,this,e)).parse():z.resolve([])};return a}()})},"esri/core/executeAsync":function(){define(["require","exports","dojo/Deferred","./now"],function(q,a,c,z){return function(a,l){var d;if(!l||0>=l)l=500;var b=new c(function(){d&&clearTimeout(d)}),e=function(){if(!b.isFulfilled()){for(var h=z(),m=!1;!m&&z()-h<l;)m=!0===a();m?b.resolve():d=setTimeout(e,0)}};d=setTimeout(e,0);return b.promise}})},"esri/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./MemoryBuffer ./GeometryUtils".split(" "),
function(q,a,c,z,n,l){q=function(a){function b(){return a.call(this,12)||this}c(b,a);b.prototype.add=function(a,b,m,d,c,G,z){var e=this.array,h=this.index;a=n.i1616to32(a,b);e.push(a);a=n.i8888to32(Math.round(31*m),Math.round(31*d),c,G);e.push(a);a=n.i1616to32(z,0);e.push(a);return h};return b}(n);a.LineMemoryBuffer=q;q=function(a){function b(){return a.call(this,4)||this}c(b,a);b.prototype.add=function(a,b){var e=this.index;this.array.push(n.i1616to32(a,b));return e};return b}(n);a.LineJoinMemoryBuffer=
q;q=function(a){function b(){return a.call(this,4)||this}c(b,a);b.prototype.add=function(a,b){this.array.push(n.i1616to32(a,b))};return b}(n);a.PolygonMemoryBuffer=q;q=function(a){function b(){return a.call(this,8)||this}c(b,a);b.prototype.add=function(a,b,m,d,c,G){var e=this.array,h=this.index;a=n.i1616to32(a,b);e.push(a);a=n.i8888to32(Math.round(15*m),Math.round(15*d),c,G);e.push(a);return h};return b}(n);a.PolygonOutlineMemoryBuffer=q;q=function(a){function b(){return a.call(this,16)||this}c(b,
a);b.prototype.add=function(a,b,m,d,c,G,z,t,u,x){var e=this.array,h=this.index;a=n.i1616to32(a,b);e.push(a);a=n.i1616to32(Math.round(32*m),Math.round(32*d));e.push(a);a=n.i8888to32(c/4,G/4,0,0);e.push(a);a=n.i8888to32(Math.ceil(10*x),l.radToByte(z),10*t,10*Math.min(u,25));e.push(a);return h};return b}(n);a.SymbolMemoryBuffer=q})},"esri/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(q,a){return function(){function a(a){this._array=[];0>=a&&console.error("strideInBytes must be positive!");
this._stride=a}Object.defineProperty(a.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.toBuffer=
function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(a,c){return 65535&a|c<<16};a.i8888to32=function(a,c,l,d){return a&255|(c&255)<<8|(l&255)<<16|d<<24};a.i8816to32=function(a,c,l){return a&255|(c&255)<<8|l<<16};return a}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(q,a){function c(a,c){a%=c;return 0<=a?a:a+c}a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=
a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var z=1/Math.LN2;a.positiveMod=c;a.radToByte=function(n){return c(n*a.C_RAD_TO_256,256)};a.degToByte=function(n){return c(n*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*z};a.sqr=function(a){return a*a};a.clamp=function(a,c,d){return Math.min(Math.max(a,c),d)};a.interpolate=function(a,c,d){return a*(1-d)+c*d};a.between=function(a,c,d){return a>=c&&a<=d||a>=d&&a<=c}})},"esri/views/vectorTiles/IndexMemoryBuffer":function(){define(["require",
"exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(q,a,c,z,n){q=function(a){function d(){return a.call(this,12)||this}c(d,a);d.prototype.add=function(a,e,h){var b=this.array;b.push(a);b.push(e);b.push(h)};return d}(n);a.TriangleElementMemoryBuffer=q;n=function(a){function d(){return a.call(this,4)||this}c(d,a);d.prototype.add=function(a){this.array.push(a)};return d}(n);a.PointElementMemoryBuffer=n})},"esri/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/promiseUtils ../../core/executeAsync ../../core/pbf ./SourceLayerData ./Feature ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./TileClipper".split(" "),
function(q,a,c,z,n,l,d,b,e,h,m,r,k){return function(){function a(a,b,e){this._pbfTile=new l(new Uint8Array(a),new DataView(a));this._tile=b;this._connection=e;this._layers=b.getLayers();e=b.tileKey.split("/").map(parseFloat);var h=e[0];a=e[1];e=e[2];this._level=h;b.refKey&&(b=b.refKey.split("/").map(parseFloat)[0],b=h-b,0<b&&(h=(1<<b)-1,this._tileClipper=new k.TileClipper(b,a&h,e&h)));this._tileClipper||(this._tileClipper=new k.SimpleBuilder)}a.prototype.parse=function(){for(var a=this,e=this._parseTileData(this._pbfTile),
h=this._layers,m=h.length,d=this._level,k,r=[],v={},G=new Set,m=m-1;0<=m;m--)if(k=h[m],!(k.minzoom&&d<k.minzoom||k.maxzoom&&d>=k.maxzoom||k.layout&&"none"===k.layout.visibility))if(0===k.type)k=this._createBucket(k),r.push(k);else{var l=k.sourceLayer,A=e[l];A&&(G.add(l),k=this._createBucket(k))&&(k.layerIndex=m,k.layerExtent=A.extent,(A=v[l])||(A=v[l]=[]),A.push(k))}var N=10*(this._level+1),H=[],M=[],B=[],X=[],V=this._tileClipper,J=new Set,w={},U=[];G.forEach(function(a){return U.push(a)});var O=
0,q=0,R=U.length;return n(function(){if(6===a._tile.status)return!0;switch(O){case 0:if(q<R)for(var h=U[q++],m=e[h],d=v[h],h=m.getData();h.next(2);){var c=new b(h.getMessage(),m),k=c.values;if(k&&(k=k._minzoom)&&k>=N)continue;for(var r=0,G=d;r<G.length;r++)k=G[r],k.pushFeature(c)}else{m=a._tile;for(h in v)for(d=v[h],c=0;c<d.length;c++)k=d[c],k.hasFeatures()&&(3===k.layer.type?(H.push(k),m.addBucket(k)):k.layer.refLayerId?B.push(k):(M.push(k),X[k.layer.id]=k));O=1;q=0;R=H.length}break;case 1:q<R?H[q++].getResources(V,
J,w):O=2}return 2===O},50).then(function(){if(6===a._tile.status)return[];var b=[],e=a._tile.getWorkerTileHandler(),h;0<J.size&&(h=e.fetchSprites(J,a._connection),b.push(h));for(var m in w)h=w[m],0<h.size&&(h=e.fetchGlyphs(a._tile.tileKey,m,h,a._connection),b.push(h));return c(b).then(function(b){if(6===a._tile.status)return[];var e=0,h=0,m=M.length;return n(function(){if(6===a._tile.status)return!0;switch(e){case 0:if(h<m){var b=M[h++];b.processFeatures(V,a._tile);r.push(b)}else e=1,h=0,m=B.length;
break;case 1:for(var d=0;d<B.length;d++){var b=B[d],k=X[b.layer.refLayerId];k&&(k.assignBufferInfo(b),r.push(b))}e=2;h=0;m=H.length;break;case 2:h<m?(b=H[h++],b.processFeatures(V,a._tile),r.push(b)):e=3}return 3===e},50).then(function(){r.sort(function(a,b){return a.layerIndex-b.layerIndex});return r})}).otherwise(function(a){return z.reject(Error(a))})}).otherwise(function(a){return z.reject(Error(a))})};a.prototype._parseTileData=function(a){for(var b={};a.next();)switch(a.tag()){case 3:var e=new d(a.getMessage());
b[e.name]=e;break;default:a.skip()}return b};a.prototype._createBucket=function(a){switch(a.type){case 0:return this._createBackgroundBucket(a);case 1:return this._createFillBucket(a);case 2:return this._createLineBucket(a);case 3:return this._createSymbolBucket(a)}};a.prototype._createBackgroundBucket=function(a){return new e(a,this._level)};a.prototype._createFillBucket=function(a){var b=this._tile;return new h(a,this._level,b.polygonVertexBuffer,b.polygonIndexBuffer,b.polygonOutlineVertexBuffer,
b.polygonOutlineIndexBuffer)};a.prototype._createLineBucket=function(a){var b=this._tile;return new m(a,this._level,b.lineVertexBuffer,b.lineIndexBuffer,b.lineJoinVertexBuffer)};a.prototype._createSymbolBucket=function(a){var b=this._tile;return new r(a,this._level,b.markerVertexBuffer,b.markerIndexBuffer,b.textVertexBuffer,b.textIndexBuffer,b.placementEngine,b.getWorkerTileHandler())};return a}()})},"esri/core/pbf":function(){define(["require","exports"],function(q,a){return function(){function a(a,
c,l,d){this._tag=0;this._dataType=99;this._data=a;this._dataView=c;this._pos=l||0;this._end=d||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var c=this._decodeVarint();this._tag=c>>3;this._dataType=c&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=
function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){return this._decodeVarint()};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){return this._decodeSVarint()};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=
function(){var a=this._dataView,c=this._pos,a=a.getUint32(c,!0)+4294967296*a.getUint32(c+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,c=this._pos,a=a.getUint32(c,!0)+4294967296*a.getInt32(c+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=
this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),c=this._pos,c=this._toString(this._data,c,c+a);this._skip(a);return c};a.prototype.getBytes=function(){var a=this._getLength(),c=this._pos,c=this._toBytes(this._data,c,c+a);this._skip(a);return c};a.prototype.getMessage=function(){var c=this._getLength(),n=this._pos,n=new a(this._data,
this._dataView,n,n+c);this._skip(c);return n};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,c=this._pos,l=0,d;if(10<=this._end-c){if(d=a[c++],
l|=d&127,0!==(d&128)&&(d=a[c++],l|=(d&127)<<7,0!==(d&128)&&(d=a[c++],l|=(d&127)<<14,0!==(d&128)&&(d=a[c++],l|=(d&127)<<21,0!==(d&128)&&(d=a[c++],l+=268435456*(d&127),0!==(d&128)&&(d=a[c++],l+=34359738368*(d&127),0!==(d&128)&&(d=a[c++],l+=4398046511104*(d&127),0!==(d&128)&&(d=a[c++],l+=562949953421312*(d&127),0!==(d&128)&&(d=a[c++],l+=72057594037927936*(d&127),0!==(d&128)&&(d=a[c++],l+=0x7fffffffffffffff*(d&127),0!==(d&128)))))))))))throw Error("Varint too long!");}else{for(var b=1;c!==this._end;){d=
a[c];if(0===(d&128))break;++c;l+=(d&127)*b;b*=128}if(c===this._end)throw Error("Varint overrun!");++c;l+=d*b}this._pos=c;return l};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,c,l){var d="",b="";for(l=Math.min(this._end,l);c<l;++c){var e=a[c];e&128?b+="%"+e.toString(16):(d+=decodeURIComponent(b)+
String.fromCharCode(e),b="")}b.length&&(d+=decodeURIComponent(b));return d};a.prototype._toBytes=function(a,c,l){l=Math.min(this._end,l);return new Uint8Array(a.buffer,c,l-c)};return a}()})},"esri/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(q,a){return function(){function a(c){this.extent=4096;this.keys=[];this.values=[];for(this._pbfLayer=c.clone();c.next();)switch(c.tag()){case 1:this.name=c.getString();break;case 3:this.keys.push(c.getString());break;case 4:this.values.push(a._parseValue(c.getMessage()));
break;case 5:this.extent=c.getUInt32();break;default:c.skip()}}a.prototype.getData=function(){return this._pbfLayer};a._parseValue=function(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getInt64();case 5:return a.getUInt64();case 6:return a.getSInt64();case 7:return a.getBool();default:a.skip()}return null};return a}()})},"esri/views/vectorTiles/Feature":function(){define(["require","exports","./Geometry"],function(q,
a,c){return function(){function a(a,c){this.values={};var d=c.keys;for(c=c.values;a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:for(var b=a.getMessage(),e=this.values;!b.empty();){var h=b.getUInt32(),m=b.getUInt32();e[d[h]]=c[m]}break;case 3:this.type=a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}a.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;var l=this._pbfGeometry,d,b;a?a.reset(this.type):d=[];for(var e=
1,h=0,m=0,r=0;!l.empty();)switch(0===h&&(h=l.getUInt32(),e=h&7,h>>=3),h--,e){case 1:m+=l.getSInt32();r+=l.getSInt32();a?a.moveTo(m,r):(b&&d.push(b),b=[],b.push(new c.Point(m,r)));break;case 2:m+=l.getSInt32();r+=l.getSInt32();a?a.lineTo(m,r):b.push(new c.Point(m,r));break;case 7:a?a.close():b&&!b[0].equals(m,r)&&b.push(b[0].clone());break;default:throw Error("Invalid path operation");}a?a=a.result():(b&&d.push(b),a=d);return this._geometry=a};return a}()})},"esri/views/vectorTiles/Geometry":function(){define(["require",
"exports"],function(q,a){q=function(){function a(a,c){this.x=a;this.y=c}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,c){return a===this.x&&c===this.y};a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,c){this.x=a;this.y=c};a.prototype.normalize=function(){var a=this.x,c=this.y,a=Math.sqrt(a*a+c*c);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=this.x;this.x=this.y;this.y=-a};a.prototype.move=
function(a,c){this.x+=a;this.y+=c};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,c){this.x=a.x+c.x;this.y=a.y+c.y};a.prototype.assignSub=function(a,c){this.x=a.x-c.x;this.y=a.y-c.y};a.prototype.rotate=function(a,c){var l=this.x,d=this.y;this.x=l*a-d*c;this.y=l*c+d*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=function(){var a=this.x,c=this.y;return Math.sqrt(a*a+c*c)};a.distance=function(a,c){var l=c.x-a.x;a=c.y-a.y;return Math.sqrt(l*
l+a*a)};a.add=function(c,n){return new a(c.x+n.x,c.y+n.y)};a.sub=function(c,n){return new a(c.x-n.x,c.y-n.y)};return a}();a.Point=q})},"esri/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(q,a,c,z,n){return function(a){function d(b,e){return a.call(this,b,e)||this}c(d,a);return d}(n)})},"esri/views/vectorTiles/Bucket":function(){define(["require","exports"],function(q,a){return function(){function a(a,
c){this.layerExtent=4096;this._features=[];this.layer=a;this.zoom=c;this._filter=a.getFeatureFilter()}a.prototype.pushFeature=function(a){this._filter.filter(a)&&this._features.push(a)};a.prototype.hasFeatures=function(){return 0<this._features.length};a.prototype.processFeatures=function(a,c){};a.prototype.assignBufferInfo=function(a){};return a}()})},"esri/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ../../core/libs/earcut/earcut".split(" "),
function(q,a,c,z,n,l,d){return function(a){function b(b,e,d,c,G,l){b=a.call(this,b,e)||this;b.polygonVertexBuffer=d;b.polygonIndexBuffer=c;b.polygonOutlineVertexBuffer=G;b.polygonOutlineIndexBuffer=l;return b}c(b,a);Object.defineProperty(b.prototype,"polygonIndexStart",{get:function(){return this._triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"polygonIndexCount",{get:function(){return this._triangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"polygonOutlineIndexStart",{get:function(){return this._outlineElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"polygonOutlineIndexCount",{get:function(){return this._outlineElementsNum},enumerable:!0,configurable:!0});b.prototype.assignBufferInfo=function(a){a._triangleElementsStart=this._triangleElementsStart;a._triangleElementsNum=this._triangleElementsNum;a.layer.hasPaintProperty("fill-outline-color")?(a._outlineElementsStart=this._outlineElementsStart,a._outlineElementsNum=
this._outlineElementsNum):(a._outlineElementsStart=0,a._outlineElementsNum=0)};b.prototype.processFeatures=function(a,b){this._triangleElementsStart=this.polygonIndexBuffer.index;this._triangleElementsNum=0;this._outlineElementsStart=this.polygonOutlineIndexBuffer.index;this._outlineElementsNum=0;a&&a.setExtent(this.layerExtent);b=this.layer.getPaintValue("fill-pattern",this.zoom);b=this.layer.getPaintValue("fill-antialias",this.zoom)&&void 0===b;for(var e=0,h=this._features;e<h.length;e++){var m=
h[e].getGeometry(a);this._processFeature(m,b)}};b.prototype._processFeature=function(a,e){if(a){var h=a.length;if(e)for(e=0;e<h;e++)this._processOutline(a[e]);var d;for(e=0;e<h;e++){var m=b._area(a[e]);128<m?(void 0!==d&&this._processFill(a,d),d=[e]):-128>m&&void 0!==d&&d.push(e)}void 0!==d&&this._processFill(a,d)}};b.prototype._processOutline=function(a){var b=this.polygonOutlineVertexBuffer,e=this.polygonOutlineIndexBuffer,h=e.index,d,c,t,u=new l.Point(0,0),n=new l.Point(0,0),E=new l.Point(0,0),
y=-1,D=-1,v=d=-1,F=-1,I=a.length;if(!(2>I)){var A=a[0];for(d=a[I-1];I&&d.isEqual(A);)--I,d=a[I-1];if(!(2>I-0)){for(A=0;A<I;++A){0===A?(d=a[I-1],c=a[0],t=a[1],u.assignSub(c,d),u.normalize(),u.rightPerpendicular()):(d=c,c=t,t=A!==I-1?a[A+1]:a[0],u.assign(n));n.assignSub(t,c);n.normalize();n.rightPerpendicular();d=u.x*n.y-u.y*n.x;E.assignAdd(u,n);E.normalize();var N=-E.x*-u.x+-E.y*-u.y,N=Math.abs(0!==N?1/N:1);8<N&&(N=8);0<=d?(d=b.add(c.x,c.y,u.x,u.y,0,1),-1===v&&(v=d),0<=y&&0<=D&&0<=d&&e.add(y,D,d),
D=b.add(c.x,c.y,N*-E.x,N*-E.y,0,-1),-1===F&&(F=D),0<=y&&0<=D&&0<=d&&e.add(y,D,d),y=D,D=d,d=b.add(c.x,c.y,E.x,E.y,0,1),0<=y&&0<=D&&0<=d&&e.add(y,D,d),D=b.add(c.x,c.y,n.x,n.y,0,1)):(d=b.add(c.x,c.y,N*E.x,N*E.y,0,1),-1===v&&(v=d),0<=y&&0<=D&&0<=d&&e.add(y,D,d),D=b.add(c.x,c.y,-u.x,-u.y,0,-1),-1===F&&(F=D),0<=y&&0<=D&&0<=d&&e.add(y,D,d),y=D,D=d,d=b.add(c.x,c.y,-E.x,-E.y,0,-1),0<=y&&0<=D&&0<=d&&e.add(y,D,d),y=b.add(c.x,c.y,-n.x,-n.y,0,-1));0<=y&&0<=D&&0<=d&&e.add(y,D,d)}0<=y&&0<=D&&0<=v&&e.add(y,D,v);
0<=y&&0<=v&&0<=F&&e.add(y,F,v);this._outlineElementsNum+=3*(e.index-h)}}};b.prototype._processFill=function(a,b){var e;1<b.length&&(e=[]);for(var h=0,c=0;c<b.length;c++){var m=b[c];0!==h&&e.push(h);h+=a[m].length}for(var h=2*h,c=new Float64Array(h),l=0,u=0;u<b.length;u++)for(var m=b[u],m=a[m],n=m.length,E=0;E<n;++E)c[l++]=m[E].x,c[l++]=m[E].y;a=d(c,e,2);b=a.length;if(0<b){e=this.polygonVertexBuffer.index;for(l=0;l<h;)this.polygonVertexBuffer.add(c[l++],c[l++]);for(h=0;h<b;)this.polygonIndexBuffer.add(e+
a[h++],e+a[h++],e+a[h++]);this._triangleElementsNum+=b}};b._area=function(a){for(var b=0,e=a.length-1,d=0;d<e;d++)b+=(a[d].x-a[d+1].x)*(a[d].y+a[d+1].y);b+=(a[e].x-a[0].x)*(a[e].y+a[0].y);return.5*b};return b}(n)})},"esri/core/libs/earcut/earcut":function(){define([],function(){function q(b,h,m){m=m||2;y=b.length/m+(h?2*h.length:0);D=!1;var k=h&&h.length,v=k?h[0]*m:b.length,H=a(b,0,v,m,!0),M=[];if(!H)return M;var B,r,G,u;if(k)a:{var w=m,k=[],n,F,t;u=0;for(n=h.length;u<n;u++)F=h[u]*w,t=u<n-1?h[u+1]*
w:b.length,F=a(b,F,t,w,!1),F===F.next&&(F.steiner=!0),k.push(e(F));k.sort(l);for(u=0;u<k.length;u++){if(!H){H=null;break a}h=k[u];w=H;if(w=d(h,w))h=C(w,h),c(h,h.next);H=c(H,H.next)}}if(D)return M;if(b.length>80*m){B=G=b[0];r=k=b[1];for(w=m;w<v;w+=m)u=b[w],h=b[w+1],u<B&&(B=u),h<r&&(r=h),u>G&&(G=u),h>k&&(k=h);G=Math.max(G-B,k-r)}z(H,M,m,B,r,G);return M}function a(a,b,e,d,h){var c;if(h===0<E(a,b,e,d))for(h=b;h<e;h+=d)c=t(h,a[h],a[h+1],c);else for(h=e-d;h>=b;h-=d)c=t(h,a[h],a[h+1],c);c&&r(c,c.next)&&
(u(c),c=c.next);return c}function c(a,b){if(!a)return a;b||(b=a);var e,d=0,h=y*y/2;do{e=!1;if(a.steiner||!r(a,a.next)&&0!==m(a.prev,a,a.next))a=a.next;else{u(a);a=b=a.prev;if(a===a.next)return null;e=!0}if(d++>h)return D=!0,null}while(e||a!==b);return b}function z(a,e,d,l,y,H,M){if(a){if(!M&&H){var B=a,v=B;do null===v.z&&(v.z=b(v.x,v.y,l,y,H)),v.prevZ=v.prev,v=v.nextZ=v.next;while(v!==B);v.prevZ.nextZ=null;v.prevZ=null;var B=v,t,J,w,F,I,E,x=1;do{v=B;w=B=null;for(F=0;v;){F++;J=v;for(t=I=0;t<x&&(I++,
J=J.nextZ,J);t++);for(E=x;0<I||0<E&&J;)0===I?(t=J,J=J.nextZ,E--):0!==E&&J?v.z<=J.z?(t=v,v=v.nextZ,I--):(t=J,J=J.nextZ,E--):(t=v,v=v.nextZ,I--),w?w.nextZ=t:B=t,t.prevZ=w,w=t;v=J}w.nextZ=null;x*=2}while(1<F)}for(B=a;a.prev!==a.next;){v=a.prev;J=a.next;if(H)a:{w=a;E=l;var A=y,N=H;F=w.prev;I=w;x=w.next;if(0<=m(F,I,x))w=!1;else{var q=F.x>I.x?F.x>x.x?F.x:x.x:I.x>x.x?I.x:x.x,ca=F.y>I.y?F.y>x.y?F.y:x.y:I.y>x.y?I.y:x.y;t=b(F.x<I.x?F.x<x.x?F.x:x.x:I.x<x.x?I.x:x.x,F.y<I.y?F.y<x.y?F.y:x.y:I.y<x.y?I.y:x.y,E,A,
N);E=b(q,ca,E,A,N);for(A=w.nextZ;A&&A.z<=E;){if(A!==w.prev&&A!==w.next&&h(F.x,F.y,I.x,I.y,x.x,x.y,A.x,A.y)&&0<=m(A.prev,A,A.next)){w=!1;break a}A=A.nextZ}for(A=w.prevZ;A&&A.z>=t;){if(A!==w.prev&&A!==w.next&&h(F.x,F.y,I.x,I.y,x.x,x.y,A.x,A.y)&&0<=m(A.prev,A,A.next)){w=!1;break a}A=A.prevZ}w=!0}}else w=n(a);if(w)e.push(v.i/d),e.push(a.i/d),e.push(J.i/d),u(a),B=a=J.next;else{if(D)break;a=J;if(a===B){if(!M)z(c(a),e,d,l,y,H,1);else if(1===M){M=e;B=d;v=a;do J=v.prev,w=v.next.next,!r(J,w)&&k(J,v,v.next,
w)&&G(J,w)&&G(w,J)&&(M.push(J.i/B),M.push(v.i/B),M.push(w.i/B),u(v),u(v.next),v=a=w),v=v.next;while(v!==a);a=v;z(a,e,d,l,y,H,2)}else if(2===M)a:{M=a;do{for(B=M.next.next;B!==M.prev;){if(v=M.i!==B.i){v=M;J=B;w=void 0;if(w=v.next.i!==J.i&&v.prev.i!==J.i){w=void 0;b:{w=v;do{if(w.i!==v.i&&w.next.i!==v.i&&w.i!==J.i&&w.next.i!==J.i&&k(w,w.next,v,J)){w=!0;break b}w=w.next}while(w!==v);w=!1}w=!w}F=void 0;if(F=w&&G(v,J)&&G(J,v)){w=v;F=!1;I=(v.x+J.x)/2;J=(v.y+J.y)/2;do w.y>J!==w.next.y>J&&I<(w.next.x-w.x)*
(J-w.y)/(w.next.y-w.y)+w.x&&(F=!F),w=w.next;while(w!==v)}v=F}if(v){a=C(M,B);M=c(M,M.next);a=c(a,a.next);z(M,e,d,l,y,H);z(a,e,d,l,y,H);break a}B=B.next}M=M.next}while(M!==a)}break}}}}}function n(a){var b=a.prev,e=a.next;if(0<=m(b,a,e))return!1;for(var d=a.next.next,c=0;d!==a.prev;){if(h(b.x,b.y,a.x,a.y,e.x,e.y,d.x,d.y)&&0<=m(d.prev,d,d.next))return!1;d=d.next;if(c++>y)return D=!0,!1}return!0}function l(a,b){return a.x-b.x}function d(a,b){var e=b,d=a.x,c=a.y,m=-Infinity,k;do{if(!e)return null;if(c<=
e.y&&c>=e.next.y){var B=e.x+(c-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(B<=d&&B>m){m=B;if(B===d){if(c===e.y)return e;if(c===e.next.y)return e.next}k=e.x<e.next.x?e:e.next}}e=e.next}while(e!==b);if(!k)return null;if(d===m)return k.prev;b=k;for(var B=k.x,r=k.y,v=Infinity,l,e=k.next;e!==b;)d>=e.x&&e.x>=B&&h(c<r?d:m,c,B,r,c<r?m:d,c,e.x,e.y)&&(l=Math.abs(c-e.y)/(d-e.x),(l<v||l===v&&e.x>k.x)&&G(e,a)&&(k=e,v=l)),e=e.next;return k}function b(a,b,e,d,h){a=32767*(a-e)/h;b=32767*(b-d)/h;a=(a|a<<8)&16711935;a=(a|
a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function e(a){var b=a,e=a;do b.x<e.x&&(e=b),b=b.next;while(b!==a);return e}function h(a,b,e,d,h,c,m,k){return 0<=(h-m)*(b-k)-(a-m)*(c-k)&&0<=(a-m)*(d-k)-(e-m)*(b-k)&&0<=(e-m)*(c-k)-(h-m)*(d-k)}function m(a,b,e){return(b.y-a.y)*(e.x-b.x)-(b.x-a.x)*(e.y-b.y)}function r(a,b){return a.x===b.x&&a.y===b.y}function k(a,b,e,d){return r(a,b)&&r(e,d)||r(a,d)&&
r(e,b)?!0:0<m(a,b,e)!==0<m(a,b,d)&&0<m(e,d,a)!==0<m(e,d,b)}function G(a,b){return 0>m(a.prev,a,a.next)?0<=m(a,b,a.next)&&0<=m(a,a.prev,b):0>m(a,b,a.prev)||0>m(a,a.next,b)}function C(a,b){var e=new x(a.i,a.x,a.y),d=new x(b.i,b.x,b.y),h=a.next,c=b.prev;a.next=b;b.prev=a;e.next=h;h.prev=e;d.next=e;e.prev=d;c.next=d;d.prev=c;return d}function t(a,b,e,d){a=new x(a,b,e);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function u(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&
(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function x(a,b,e){this.i=a;this.x=b;this.y=e;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function E(a,b,e,d){for(var h=0,c=e-d;b<e;b+=d)h+=(a[c]-a[b])*(a[b+1]+a[c+1]),c=b;return h}var y,D;q.deviation=function(a,b,e,d){var h=b&&b.length,c=Math.abs(E(a,0,h?b[0]*e:a.length,e));if(h)for(var h=0,m=b.length;h<m;h++)c-=Math.abs(E(a,b[h]*e,h<m-1?b[h+1]*e:a.length,e));for(h=b=0;h<d.length;h+=3){var m=d[h]*e,k=d[h+1]*e,r=d[h+
2]*e;b+=Math.abs((a[m]-a[r])*(a[k+1]-a[m+1])-(a[m]-a[k])*(a[r+1]-a[m+1]))}return 0===c&&0===b?0:Math.abs((b-c)/c)};q.flatten=function(a){for(var b=a[0][0].length,e={vertices:[],holes:[],dimensions:b},d=0,h=0;h<a.length;h++){for(var c=0;c<a[h].length;c++)for(var m=0;m<b;m++)e.vertices.push(a[h][c][m]);0<h&&(d+=a[h-1].length,e.holes.push(d))}return e};return q})},"esri/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./style/StyleLayer ./LineTess".split(" "),
function(q,a,c,z,n,l,d){return function(a){function b(b,e,c,k,l){b=a.call(this,b,e)||this;b.extrudeVectorsDoubleBuffer=[d.allocExtrudeVectors(),d.allocExtrudeVectors()];b.recycledTriangleBridge=d.allocTriangles(20);b.recycledTrianglePie=d.allocTriangles(20);b.lineVertexBuffer=c;b.lineIndexBuffer=k;return b}c(b,a);Object.defineProperty(b.prototype,"triangleIndexStart",{get:function(){return this.triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"triangleIndexCount",
{get:function(){return this.triangleElementsCount},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"connectorStart",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"connectorCount",{get:function(){return 0},enumerable:!0,configurable:!0});b.prototype.assignBufferInfo=function(a){a.triangleElementsStart=this.triangleElementsStart;a.triangleElementsCount=this.triangleElementsCount};b.prototype.processFeatures=function(a,b){this.triangleElementsStart=
this.lineIndexBuffer.index;this.triangleElementsCount=0;a&&a.setExtent(this.layerExtent);b=new l.LineLayout(this.layer,this.zoom);for(var e=0,d=this._features;e<d.length;e++){var h=d[e].getGeometry(a);this._processFeature(b,h)}};b.prototype._processFeature=function(a,b){if(b)for(var e=b.length,d=0;d<e;d++)this._processGeometry(b[d],a)};b.prototype._processGeometry=function(a,b){if(!(2>a.length)){var e=a[0],c=a[a.length-1],h=c.x-e.x,e=c.y-e.y,h=1E-6>h*h+e*e;if(!(2>a.length)){e=a[0];for(c=1;c<a.length;){var m=
a[c].x-e.x,l=a[c].y-e.y;1E-6>m*m+l*l?a.splice(c,1):(e=a[c],++c)}if(!(2>a.length)){this.vertices=a;this.isClosed=h;this.cap=b.cap;this.join=b.join;this.almostParallelRads=.05;this.veryShallowRads=.1;this.miterSafeRads=d.MITER_SAFE_RADS;this.miterLimitMag=Math.min(b.miterLimit,d.SYSTEM_MAG_LIMIT);this.roundLimitRads=Math.min(b.roundLimit,.5);this.newRoundJoinsSafeRads=2.3;b=this.lineIndexBuffer.index;for(var e=0,u=void 0,c=0;c<a.length;++c)l=a[c],m=u===this.extrudeVectorsDoubleBuffer[c%2]?this.extrudeVectorsDoubleBuffer[(c+
1)%2]:this.extrudeVectorsDoubleBuffer[c%2],this._computeExtrudeVectors(m,c),this._writeGPUVertices(l.x,l.y,e,m),!m.capCenter||h&&c===a.length-1||this._writeGPUPieElements(m),u&&this._writeGPUBridgeElements(u,m),c<a.length-1&&(u=a[c+1],l=d.length([u.x-l.x,u.y-l.y]),e+=l),u=m;this.triangleElementsCount+=3*(this.lineIndexBuffer.index-b)}}}};b.prototype._computeExtrudeVectors=function(a,b){var e=this.vertices,c=this.isClosed,h=e[b],m=[void 0,void 0],l=[void 0,void 0];if(0<b&&b<e.length-1){var u=e[(b+
e.length-1)%e.length],n=e[(b+1)%e.length];d.normalize(m,[h.x-u.x,h.y-u.y]);d.normalize(l,[n.x-h.x,n.y-h.y])}else if(0===b)n=e[(b+1)%e.length],d.normalize(l,[n.x-h.x,n.y-h.y]),c?(u=e[e.length-2],d.normalize(m,[h.x-u.x,h.y-u.y])):m=l;else if(b===e.length-1)u=e[(b+e.length-1)%e.length],d.normalize(m,[h.x-u.x,h.y-u.y]),c?(u=e[1],d.normalize(l,[u.x-h.x,u.y-h.y])):l=m;else throw Error("Parameter i out of range.");c||0!==b?c||b!==e.length-1?this._computeJoinExtrudeVectors(a,m,l):this._computeCapExtrudeVectors(a,
m,l,d.CapPosition.END):this._computeCapExtrudeVectors(a,m,l,d.CapPosition.START)};b.prototype._computeCapExtrudeVectors=function(a,b,e,c){if(0===this.cap)d.buttCap(a,b,e);else if(1===this.cap)d.roundCap(a,b,e,c,d.getNumberOfSlices(Math.PI));else if(2===this.cap)d.squareCap(a,b,e,c);else throw Error("Unknown cap type!");};b.prototype._computeJoinExtrudeVectors=function(a,b,e){var c=d.getRads(b,e);if(c>Math.PI-this.almostParallelRads)d.rectJoin(a,b,e);else if(2===this.join||c<this.veryShallowRads)c<
this.almostParallelRads?d.fastMiterJoin(a,b,e):c<this.miterSafeRads?d.miterJoin(a,b,e):d.bevelJoin(a,b,e,this.miterLimitMag);else if(0===this.join)d.bevelJoin(a,b,e,1);else if(1===this.join){var h=d.getNumberOfSlices(c);c<this.newRoundJoinsSafeRads?2>h||c<this.roundLimitRads?d.bevelJoin(a,b,e,1):d.roundJoin(a,b,e,h):d.unitRoundJoin(a,b,e,h)}};b.prototype._writeGPUVertices=function(a,b,e,d){for(var c=0;c<d.vectors.count;++c){var h=this.lineVertexBuffer.add(a,b,d.vectors.items[c].vector[0],d.vectors.items[c].vector[1],
0,d.vectors.items[c].side,e);d.vectors.items[c].base=h}};b.prototype._writeGPUBridgeElements=function(a,b){d.bridge(this.recycledTriangleBridge,a,b,!1);for(a=0;a<this.recycledTriangleBridge.count;++a)b=this.recycledTriangleBridge.items[a],this.lineIndexBuffer.add(b.v1.base,b.v2.base,b.v3.base)};b.prototype._writeGPUPieElements=function(a){d.pie(this.recycledTrianglePie,a);for(a=0;a<this.recycledTrianglePie.count;++a){var b=this.recycledTrianglePie.items[a];this.lineIndexBuffer.add(b.v1.base,b.v2.base,
b.v3.base)}};return b}(n)})},"esri/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition","./StyleProperty","./Filter"],function(q,a,c,z,n){q=function(){function a(a,b,e){this.type=a;this.id=b.id;this.source=b.source;this.sourceLayer=b["source-layer"];this.minzoom=b.minzoom;this.maxzoom=b.maxzoom;this.filter=b.filter;this.layout=b.layout;this.paint=b.paint;this.z=e;switch(a){case 0:this._layoutDefinition=c.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=
c.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=c.StyleDefinition.fillLayoutDefinition;this._paintDefinition=c.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=c.StyleDefinition.lineLayoutDefinition;this._paintDefinition=c.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=c.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=c.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);
this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=n.createFilter(this.filter)};a.prototype.hasLayoutProperty=function(a){var b=this._layoutProperties;return b&&b[a]?!0:!1};a.prototype.hasPaintProperty=function(a){var b=this._paintProperties;return b?void 0!==b[a]:!1};a.prototype.getLayoutValue=function(a,b){var e,d=this._layoutProperties;d&&(d=d[a])&&(e=d.getValue(b));a=this._layoutDefinition[a];
void 0===e&&(e=a["default"]);"enum"===a.type&&(e=a.values.indexOf(e));return e};a.prototype.getPaintValue=function(a,b){var e,d=this._paintProperties;d&&(d=d[a])&&(e=d.getValue(b));a=this._paintDefinition[a];void 0===e&&(e=a["default"]);"enum"===a.type&&(e=a.values.indexOf(e));return e};a.prototype._parseLayout=function(a){var b={},e;for(e in a)b[e]=new z(this._layoutDefinition[e],a[e]);return b};a.prototype._parsePaint=function(a){var b={},e;for(e in a)b[e]=new z(this._paintDefinition[e],a[e]);return b};
return a}();a.StyleLayer=q;q=function(){return function(a,d){this.cap=a.getLayoutValue("line-cap",d);this.join=a.getLayoutValue("line-join",d);this.miterLimit=a.getLayoutValue("line-miter-limit",d);this.roundLimit=a.getLayoutValue("line-round-limit",d)}}();a.LineLayout=q;q=function(){return function(a,d,b){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",d);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",d);this.optional=a.getLayoutValue("icon-optional",d);this.rotationAlignment=
a.getLayoutValue("icon-rotation-alignment",d);this.size=a.getLayoutValue("icon-size",d);this.rotate=a.getLayoutValue("icon-rotate",d);this.padding=a.getLayoutValue("icon-padding",d);this.keepUpright=a.getLayoutValue("icon-keep-upright",d);this.offset=a.getLayoutValue("icon-offset",d);b&&1===this.rotationAlignment&&!a.hasLayoutProperty("icon-rotation-alignment")&&(this.rotationAlignment=0)}}();a.IconLayout=q;q=function(){return function(a,d,b){this.allowOverlap=a.getLayoutValue("text-allow-overlap",
d);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",d);this.optional=a.getLayoutValue("text-optional",d);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",d);this.font=a.getLayoutValue("text-font",d);this.maxWidth=a.getLayoutValue("text-max-width",d);this.lineHeight=a.getLayoutValue("text-line-height",d);this.letterSpacing=a.getLayoutValue("text-letter-spacing",d);this.justify=a.getLayoutValue("text-justify",d);this.anchor=a.getLayoutValue("text-anchor",d);this.maxAngle=
a.getLayoutValue("text-max-angle",d);this.size=a.getLayoutValue("text-size",d);this.rotate=a.getLayoutValue("text-rotate",d);this.padding=a.getLayoutValue("text-padding",d);this.keepUpright=a.getLayoutValue("text-keep-upright",d);this.transform=a.getLayoutValue("text-transform",d);this.offset=a.getLayoutValue("text-offset",d);b&&1===this.rotationAlignment&&!a.hasLayoutProperty("text-rotation-alignment")&&(this.rotationAlignment=0)}}();a.TextLayout=q})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require",
"exports"],function(q,a){q=function(){return function(){}}();q.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};q.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};q.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},
"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};q.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},
"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},
"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),
"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean",
"default":!1}};q.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};q.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,
0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};q.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},
"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};q.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",
value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",
values:["map","viewport"],"default":"map"}};q.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,
"default":300}};q.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};a.StyleDefinition=q})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require",
"exports","../../../Color","../GeometryUtils"],function(q,a,c,z){return function(){function a(c,d){switch(c.type){case "number":c=!0;break;case "color":c=!0;d=a._parseColor(d);break;case "array":c="number"===c.value;break;default:c=!1}this.getValue=c?this._interpolate(d):this._piecewise(d)}a.prototype._piecewise=function(a){var c=a.stops;return c?function(a){var b=c.length;if(0!==b){for(var d=0,m=0;m<b;m++)if(c[m][0]<=a)d=m;else break;return c[d][1]}}:function(){return a}};a.prototype._interpolate=
function(a){var c=a.stops;if(c){var b=a.base||1;return function(a){for(var e,d,r=c.length,k=0;k<r;k++){var l=c[k];if(l[0]<=a)e=l;else{d=l;break}}if(e&&d){k=d[0]-e[0];a-=e[0];a=1===b?a/k:(Math.pow(b,a)-1)/(Math.pow(b,k)-1);if(Array.isArray(e[1])){e=e[1];d=d[1];r=[];for(k=0;k<e.length;k++)r.push(z.interpolate(e[k],d[k],a));return r}return z.interpolate(e[1],d[1],a)}if(e)return e[1];if(d)return d[1]}}return function(){return a}};a._parseColor=function(l){if(Array.isArray(l))return l;if("string"===typeof l)return l=
new c(l),[l.r/255,l.g/255,l.b/255,l.a||1];if(l&&l.stops)return l.stops=l.stops.map(function(c){return[c[0],a._parseColor(c[1])]}),l;throw Error("Incorrect color definition "+l);};return a}()})},"esri/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(q,a){q=function(){function a(c,n,l){this._op=c;"$type"===n?(this._val=l instanceof Array?l.map(function(d){return a._types.indexOf(d)}):a._types.indexOf(l),this._op+=11):(this._key=n,this._val=l)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;
case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var c=0,l=this._val;c<l.length;c++){var d=l[c];if(d.filter(a))return!0}return!1;case 10:c=0;for(l=this._val;c<
l.length;c++)if(d=l[c],!d.filter(a))return!1;return!0;case 11:c=0;for(l=this._val;c<l.length;c++)if(d=l[c],d.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(c){if(!c)return new a(0,void 0,!0);var n=c[0];if(1>=
c.length)return new a(0,void 0,"any"!==n);switch(n){case "\x3d\x3d":return new a(1,c[1],c[2]);case "!\x3d":return new a(2,c[1],c[2]);case "\x3e":return new a(4,c[1],c[2]);case "\x3c":return new a(3,c[1],c[2]);case "\x3e\x3d":return new a(6,c[1],c[2]);case "\x3c\x3d":return new a(5,c[1],c[2]);case "in":return new a(7,c[1],c.slice(2));case "!in":return new a(8,c[1],c.slice(2));case "any":return new a(9,void 0,c.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,c.slice(1).map(a.createFilter.bind(this)));
case "none":return new a(11,void 0,c.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+n);}};return a}();q._types=["Unknown","Point","LineString","Polygon"];return q})},"esri/views/vectorTiles/LineTess":function(){define(["require","exports"],function(q,a){function c(a){for(var b={items:[],count:0},e=0;e<a;++e)b.items.push(void 0);return b}function z(a,b){return a[0]*b[0]+a[1]*b[1]}function n(a){return Math.sqrt(z(a,a))}function l(a,b){var e=n(b);a[0]=b[0]/e;a[1]=b[1]/
e;return a}function d(a,b){a[0]=-b[1];a[1]=b[0];return a}function b(a,b){return a[0]*b[1]-a[1]*b[0]}function e(a,b){a[0]=-b[0];a[1]=-b[1];return a}function h(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;return a}function m(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];return a}function r(a,b){a=z(a,b);return.999<a?0:-.999>a?Math.PI:Math.acos(a)}function k(a,b,e,c,d){if(0===c)a.count=0;else{var m=n(b),B=h(y[0],b,1/m);e=h(y[1],e,1/m);B=r(B,e);B=(d?-1:1)*B/c;d=Math.cos(B);B=Math.sin(B);e=b[0];var k=b[1];for(b=0;b<c-1;++b)m=
e,e=d*m-B*k,k=B*m+d*k,a.items[b][0]=e,a.items[b][1]=k;a.count=c-1}}function G(a){for(var b=a.count,e=Math.floor(b/2),c=0;c<e;++c){var d=a.items[c];a.items[c]=a.items[b-c-1];a.items[b-c-1]=d}}function C(a,b,c){c=d(y[0],c);b=e(y[1],c);var h=a.vectors.items[0];h.vector[0]=c[0];h.vector[1]=c[1];h.side=-1;c=a.vectors.items[1];c.vector[0]=b[0];c.vector[1]=b[1];c.side=1;a.vectors.count=2;b=a.lists[t.ENTRY];b.items[0]=0;b.items[1]=1;b.count=2;b=a.lists[t.EXIT];b.items[0]=0;b.items[1]=1;b.count=2;a.lists[t.CAP].count=
0;a.capCenter=void 0}var t;(function(a){a[a.ENTRY=1]="ENTRY";a[a.EXIT=2]="EXIT";a[a.CAP=3]="CAP"})(t=a.VectorRole||(a.VectorRole={}));var u;(function(a){a[a.START=1]="START";a[a.END=2]="END"})(u=a.CapPosition||(a.CapPosition={}));a.SYSTEM_MAG_LIMIT=3.8;a.MITER_SAFE_RADS=2*Math.acos(1/a.SYSTEM_MAG_LIMIT);var x=a.SYSTEM_MAG_LIMIT*a.SYSTEM_MAG_LIMIT,E=16/(2*Math.PI);a.allocTriangles=function(a){for(var b={items:[],count:0},e=0;e<a;++e)b.items.push({v1:{vector:[void 0,void 0],side:void 0},v2:{vector:[void 0,
void 0],side:void 0},v3:{vector:[void 0,void 0],side:void 0}});return b};a.allocExtrudeVectors=function(){for(var a={items:[],count:0},b=0;30>b;++b)a.items.push({vector:[void 0,void 0],side:void 0});b={};b[t.ENTRY]=c(20);b[t.EXIT]=c(20);b[t.CAP]=c(20);return{vectors:a,lists:b}};var y=[];for(q=0;32>q;++q)y.push([void 0,void 0]);var D=function(a){for(var b={items:[],count:0},e=0;e<a;++e)b.items.push([void 0,void 0]);return b}(16);a.length=n;a.normalize=l;a.getNumberOfSlices=function(a){return Math.round(a*
E)};a.getRads=r;var v=[void 0,void 0],F=[void 0,void 0];a.bridge=function(a,b,e,c){var d=b.vectors;b=b.lists[t.EXIT];var h=e.vectors;e=e.lists[t.ENTRY];var m,k;if(b.count===e.count+1)c=b.items,m=d.items,k=e.items,h=h.items;else if(e.count===b.count+1)c=e.items,m=h.items,k=b.items,h=d.items;else if(b.count===e.count)c?(c=b.items,m=d.items,k=e.items,h=h.items):(c=e.items,m=h.items,k=b.items,h=d.items);else throw Error("Cannot bridge "+b.count+" to "+e.count+".");d=b.count+e.count-2;a.count=d;v[0]=c;
v[1]=k;F[0]=m;F[1]=h;for(b=0;b<d;++b)h=a.items[b],e=(b+0)%2,e=F[e][v[e][Math.floor((b+0)/2)]],h.v1.vector[0]=e.vector[0],h.v1.vector[1]=e.vector[1],h.v1.side=e.side,h.v1.base=e.base,e=(b+1)%2,e=F[e][v[e][Math.floor((b+1)/2)]],h.v2.vector[0]=e.vector[0],h.v2.vector[1]=e.vector[1],h.v2.side=e.side,h.v2.base=e.base,e=(b+2)%2,e=F[e][v[e][Math.floor((b+2)/2)]],h.v3.vector[0]=e.vector[0],h.v3.vector[1]=e.vector[1],h.v3.side=e.side,h.v3.base=e.base};a.pie=function(a,b){if(0===b.lists[t.CAP].count)a.count=
0;else{if(1===b.lists[t.CAP].count)throw Error("A single vector is not enough to define a pie.");a.count=b.lists[t.CAP].count-1;for(var e=0;e<a.count;++e){var c=a.items[e],d=b.vectors.items[b.lists[t.CAP].items[e]];c.v1.vector[0]=d.vector[0];c.v1.vector[1]=d.vector[1];c.v1.side=d.side;c.v1.base=d.base;d=b.vectors.items[b.lists[t.CAP].items[e+1]];c.v2.vector[0]=d.vector[0];c.v2.vector[1]=d.vector[1];c.v2.side=d.side;c.v2.base=d.base;d=b.vectors.items[b.capCenter];c.v3.vector[0]=d.vector[0];c.v3.vector[1]=
d.vector[1];c.v3.side=d.side;c.v3.base=d.base}}};a.buttCap=function(a,b,e){C(a,b,e)};a.roundCap=function(a,b,e,c,d){C(a,b,e);e=c===u.START?0:1;c=c===u.START?1:0;a.capCenter=a.vectors.count;b=a.vectors.items[a.capCenter];b.vector[0]=0;b.vector[1]=0;b.side=0;++a.vectors.count;k(D,a.vectors.items[e].vector,a.vectors.items[c].vector,d,!1);d=a.vectors.count;b=a.lists[t.CAP];b.items[0]=e;e=a.vectors.items[e].side;for(var h=a.vectors.items[c].side,m=0;m<D.count;++m){var r=m<D.count/2?e:h,B=D.items[m],l=
a.vectors.items[d+m];l.vector[0]=B[0];l.vector[1]=B[1];l.side=r;b.items[m+1]=d+m}b.items[D.count+1]=c;b.count=D.count+2;a.vectors.count=d+D.count};var I=Math.cos(Math.PI/4),A=Math.sin(Math.PI/4),N=Math.sqrt(2);a.squareCap=function(a,b,e,c){C(a,b,e);b=c===u.START?0:1;e=c===u.START?1:0;var d=y[0],m=y[1],k=y[2],r=y[3];c=y[4];var B=a.vectors.items[b].vector;d[0]=I*B[0]-A*B[1];d[1]=A*B[0]+I*B[1];h(r,d,N);m[0]=I*d[0]-A*d[1];m[1]=A*d[0]+I*d[1];k[0]=I*m[0]-A*m[1];k[1]=A*m[0]+I*m[1];h(c,k,N);b=a.vectors.items[b];
b.vector[0]=r[0];b.vector[1]=r[1];a=a.vectors.items[e];a.vector[0]=c[0];a.vector[1]=c[1]};a.squareCapAlt=function(a,b,e,c){C(a,b,e);b=c===u.START?0:1;c=c===u.START?1:0;a.capCenter=a.vectors.count;e=a.vectors.items[a.capCenter];e.vector[0]=0;e.vector[1]=0;e.side=0;++a.vectors.count;var d=y[0],m=y[1],k=y[2],r=y[3];e=y[4];var B=a.vectors.items[b].vector;d[0]=I*B[0]-A*B[1];d[1]=A*B[0]+I*B[1];h(r,d,N);m[0]=I*d[0]-A*d[1];m[1]=A*d[0]+I*d[1];k[0]=I*m[0]-A*m[1];k[1]=A*m[0]+I*m[1];h(e,k,N);d=a.vectors.count;
m=a.lists[t.CAP];m.items[0]=b;k=a.vectors.items[d+0];k.vector[0]=r[0];k.vector[1]=r[1];k.side=a.vectors.items[b].side;m.items[1]=d+0;b=a.vectors.items[d+1];b.vector[0]=e[0];b.vector[1]=e[1];b.side=a.vectors.items[c].side;m.items[2]=d+1;m.items[3]=c;m.count=4;a.vectors.count+=2};a.fastMiterJoin=C;a.miterJoin=function(a,b,c){b=d(y[0],b);c=d(y[1],c);var m=y[2];m[0]=b[0]+c[0];m[1]=b[1]+c[1];c=l(y[3],m);b=z(c,b);c=h(y[4],c,1/b);b=e(y[5],c);m=a.vectors.items[0];m.vector[0]=c[0];m.vector[1]=c[1];m.side=
-1;c=a.vectors.items[1];c.vector[0]=b[0];c.vector[1]=b[1];c.side=1;a.vectors.count=2;b=a.lists[t.ENTRY];b.items[0]=0;b.items[1]=1;b.count=2;b=a.lists[t.EXIT];b.items[0]=0;b.items[1]=1;b.count=2;a.lists[t.CAP].count=0;a.capCenter=void 0};a.bevelJoin=function(a,c,k,r){var u=r*r;r=b(c,k);var v=0<r?[-1,1]:[1,-1],w=v[0],v=v[1],n=0<r?e(y[0],d(y[1],c)):d(y[2],c),B=0<r?e(y[3],d(y[4],k)):d(y[5],k),E=y[6];E[0]=n[0]+B[0];E[1]=n[1]+B[1];var E=l(y[7],E),D=e(y[8],E),C=z(E,n),H=b(E,n),F=Math.abs(H/C),M=1+F*F,A=
M<x?[F,!1]:[Math.sqrt(x-1),!0],H=A[0],A=A[1],F=M<u?[F,!1]:[Math.sqrt(u-1),!0],u=F[0];(F=F[1])&&A?(A=a.vectors.items[0],m(A.vector,e(y[9],n),h(y[10],e(y[11],c),H)),A.side=w,D=a.vectors.items[1],m(D.vector,e(y[12],B),h(y[13],k,H)),D.side=w,w=a.vectors.items[2],w.vector[0]=0,w.vector[1]=0,w.side=0,w=a.vectors.items[3],m(w.vector,n,h(y[14],c,u)),w.side=v,c=a.vectors.items[4],m(c.vector,B,h(y[15],e(y[16],k),u)),c.side=v,a.vectors.count=5,k=a.lists[t.ENTRY],k.items[0]=0,k.items[1]=2,k.items[2]=3,k.count=
3,k=a.lists[t.EXIT],k.items[0]=1,k.items[1]=2,k.items[2]=4,k.count=3,k=a.lists[t.CAP],k.items[0]=3,k.items[1]=4,k.count=2,a.capCenter=2):!F&&A?(A=a.vectors.items[0],m(A.vector,e(y[9],n),h(y[10],e(y[11],c),H)),A.side=w,D=a.vectors.items[1],m(D.vector,e(y[12],B),h(y[13],k,H)),D.side=w,w=a.vectors.items[2],w.vector[0]=0,w.vector[1]=0,w.side=0,w=a.vectors.items[3],h(w.vector,E,1/C),w.side=v,a.vectors.count=4,k=a.lists[t.ENTRY],k.items[0]=0,k.items[1]=2,k.items[2]=3,k.count=3,k=a.lists[t.EXIT],k.items[0]=
1,k.items[1]=2,k.items[2]=3,k.count=3,a.lists[t.CAP].count=0,a.capCenter=void 0):F&&!A?(A=a.vectors.items[0],h(A.vector,D,1/C),A.side=w,D=a.vectors.items[1],D.vector[0]=0,D.vector[1]=0,D.side=0,w=a.vectors.items[2],m(w.vector,n,h(y[9],c,u)),w.side=v,w=a.vectors.items[3],m(w.vector,B,h(y[10],e(y[11],k),u)),w.side=v,a.vectors.count=4,k=a.lists[t.ENTRY],k.items[0]=0,k.items[1]=1,k.items[2]=2,k.count=3,k=a.lists[t.EXIT],k.items[0]=0,k.items[1]=1,k.items[2]=3,k.count=3,k=a.lists[t.CAP],k.items[0]=2,k.items[1]=
3,k.count=2,a.capCenter=1):F||A||(A=a.vectors.items[0],h(A.vector,D,1/C),A.side=w,D=a.vectors.items[1],h(D.vector,E,1/C),D.side=v,a.vectors.count=2,k=a.lists[t.ENTRY],k.items[0]=0,k.items[1]=1,k.count=2,k=a.lists[t.EXIT],k.items[0]=0,k.items[1]=1,k.count=2,a.lists[t.CAP].count=0,a.capCenter=void 0);0>r&&(G(a.lists[t.ENTRY]),G(a.lists[t.EXIT]))};a.roundJoin=function(a,c,r,u){var v=b(c,r),n=0<v?[-1,1]:[1,-1],w=n[0],n=n[1],E=0<v?e(y[0],d(y[1],c)):d(y[2],c),B=0<v?e(y[3],d(y[4],r)):d(y[5],r),C=y[6];C[0]=
E[0]+B[0];C[1]=E[1]+B[1];var F=l(y[7],C),C=e(y[8],F),A=z(F,E),F=b(F,E),F=Math.abs(F/A),H=1+F*F<x?[F,!1]:[Math.sqrt(x-1),!0],F=H[0];H[1]?(H=a.vectors.items[0],H.vector[0]=E[0],H.vector[1]=E[1],H.side=n,H=a.vectors.items[1],H.vector[0]=B[0],H.vector[1]=B[1],H.side=n,H=a.vectors.items[2],m(H.vector,e(y[9],E),h(y[10],e(y[11],c),F)),H.side=w,c=a.vectors.items[3],m(c.vector,e(y[12],B),h(y[13],r,F)),c.side=w,r=a.vectors.items[4],r.vector[0]=0,r.vector[1]=0,r.side=0,a.vectors.count=5,r=a.lists[t.ENTRY],r.items[0]=
2,r.items[1]=4,r.items[2]=0,r.count=3,r=a.lists[t.EXIT],r.items[0]=3,r.items[1]=4,r.items[2]=1,r.count=3,a.capCenter=4):(H=a.vectors.items[0],H.vector[0]=E[0],H.vector[1]=E[1],H.side=n,H=a.vectors.items[1],H.vector[0]=B[0],H.vector[1]=B[1],H.side=n,H=a.vectors.items[2],h(H.vector,C,1/A),H.side=w,c=a.vectors.items[3],c.vector[0]=0,c.vector[1]=0,c.side=0,a.vectors.count=4,r=a.lists[t.ENTRY],r.items[0]=2,r.items[1]=3,r.items[2]=0,r.count=3,r=a.lists[t.EXIT],r.items[0]=2,r.items[1]=3,r.items[2]=1,r.count=
3,a.capCenter=3);k(D,E,B,u,0>v);u=a.vectors.count;E=a.lists[t.CAP];for(B=E.items[0]=0;B<D.count;++B)r=D.items[B],w=a.vectors.items[u+B],w.vector[0]=r[0],w.vector[1]=r[1],w.side=n,E.items[B+1]=u+B;E.items[D.count+1]=1;E.count=D.count+2;a.vectors.count=u+D.count;0>v&&(G(a.lists[t.ENTRY]),G(a.lists[t.EXIT]))};a.unitRoundJoin=function(a,c,h,m){var r=b(c,h),u=0<r?[-1,1]:[1,-1],l=u[0],u=u[1];c=0<r?e(y[0],d(y[1],c)):d(y[2],c);h=0<r?e(y[3],d(y[4],h)):d(y[5],h);var v=a.vectors.items[0];v.vector[0]=c[0];v.vector[1]=
c[1];v.side=u;v=a.vectors.items[1];v.vector[0]=h[0];v.vector[1]=h[1];v.side=u;v=a.vectors.items[2];e(v.vector,c);v.side=l;v=a.vectors.items[3];e(v.vector,h);v.side=l;l=a.vectors.items[4];l.vector[0]=0;l.vector[1]=0;l.side=0;a.vectors.count=5;l=a.lists[t.ENTRY];l.items[0]=2;l.items[1]=4;l.items[2]=0;l.count=3;l=a.lists[t.EXIT];l.items[0]=3;l.items[1]=4;l.items[2]=1;l.count=3;a.capCenter=4;k(D,c,h,m,0>r);m=a.vectors.count;c=a.lists[t.CAP];for(l=c.items[0]=0;l<D.count;++l)h=D.items[l],v=a.vectors.items[m+
l],v.vector[0]=h[0],v.vector[1]=h[1],v.side=u,c.items[l+1]=m+l;c.items[D.count+1]=1;c.count=D.count+2;a.vectors.count=m+D.count;0>r&&(G(a.lists[t.ENTRY]),G(a.lists[t.EXIT]))};a.rectJoin=function(a,b,c){b=d(y[0],b);c=d(y[1],c);var h=a.vectors.items[0];h.vector[0]=b[0];h.vector[1]=b[1];h.side=-1;h=a.vectors.items[1];h.vector[0]=c[0];h.vector[1]=c[1];h.side=-1;h=a.vectors.items[2];e(h.vector,b);h.side=1;b=a.vectors.items[3];e(b.vector,c);b.side=1;a.vectors.count=4;b=a.lists[t.ENTRY];b.items[0]=0;b.items[1]=
2;b.count=2;b=a.lists[t.EXIT];b.items[0]=1;b.items[1]=3;b.count=2;a.capCenter=void 0}})},"esri/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ./style/StyleLayer ./Placement ./GeometryUtils ./TextShaping dojox/string/BidiEngine".split(" "),function(q,a,c,z,n,l,d,b,e,h,m){function r(a,b){if(a.iconMosaicItem&&b.iconMosaicItem){if(a.iconMosaicItem.page!==b.iconMosaicItem.page)return a.iconMosaicItem.page<
b.iconMosaicItem.page?-1:1}else{if(a.iconMosaicItem&&!b.iconMosaicItem)return 1;if(!a.iconMosaicItem&&b.iconMosaicItem)return-1}return 0}var k=function(){return function(){}}(),G=function(){return function(a,b,e,c){this.line=b;this.shaping=a;this.iconMosaicItem=e;this.anchor=c}}();(function(){return function(){}})();q=function(a){function m(b,e,c,d,h,m,k,r){b=a.call(this,b,e)||this;b._markerRatio=1;b._markerMap=new Map;b._markerVertexBuffer=c;b._markerIndexBuffer=d;b._textVertexBuffer=h;b._textIndexBuffer=
m;b._placementEngine=k;b._workerTileHandler=r;return b}c(m,a);Object.defineProperty(m.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"textIndexStart",{get:function(){return this._textTriangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"textIndexCount",{get:function(){return this._textTriangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"sdfMarker",
{get:function(){return!1},enumerable:!0,configurable:!0});m.prototype.copy=function(a,b,e,c,d){d=new m(this.layer,this.zoom,a,b,e,c,d,this._workerTileHandler);d.layerIndex=this.layerIndex;d.layerExtent=this.layerExtent;d._markerVertexStart=a.index;d._markerTriangleElementsStart=b.index;d._textVertexStart=e.index;d._textTriangleElementsStart=c.index;d._markerTriangleElementsNum=0;d._textTriangleElementsNum=0;d._symbolInstances=this._symbolInstances;d._glyphItems=this._glyphItems;d._textLayout=this._textLayout;
d._markerLayout=this._markerLayout;d._isLinePlacement=this._isLinePlacement;d._avoidEdges=this._avoidEdges;return d};m.prototype.getResources=function(a,b,e){var c=this.layer,d=this.zoom;a&&a.setExtent(this.layerExtent);for(var h=c.getLayoutValue("icon-image",d),r=c.getLayoutValue("text-field",d),l=c.getLayoutValue("text-font",d),c=c.getLayoutValue("text-transform",d),d=[],u=0,G=this._features;u<G.length;u++){var n=G[u],E=n.getGeometry(a);if(E&&0!==E.length){var t=void 0;h&&(t=this._replaceKeys(h,
n.values))&&b.add(t);var x=void 0,C=!1;if(r){x=this._replaceKeys(r,n.values);switch(c){case 2:x=x.toLowerCase();break;case 1:x=x.toUpperCase()}m._bidiEngine.hasBidiChar(x)&&(C=void 0,C="rtl"===m._bidiEngine.checkContextual(x)?"IDNNN":"ICNNN",x=m._bidiEngine.bidiTransform(x,C,"VLYSN"),C=!0);n=x.length;if(0<n){var J=e[l];J||(J=e[l]=new Set);for(var w=0;w<n;w++){var q=x.charCodeAt(w);J.add(q)}}}if(t||x)n=new k,n.sprite=t,n.label=x,n.rtl=C,n.geometry=E,d.push(n)}}this._symbolFeatures=d};m.prototype.processFeatures=
function(a,c){a&&a.setExtent(this.layerExtent);var k=this.layer,l=this.zoom;c=this._isLinePlacement=1===k.getLayoutValue("symbol-placement",l);a=this._avoidEdges=k.getLayoutValue("symbol-avoid-edges",l)&&!c;var u=8*k.getLayoutValue("symbol-spacing",l),v=k.getLayoutValue("icon-image",l),n=k.getLayoutValue("text-field",l),t=this._workerTileHandler,x;v&&(this._markerLayout=new d.IconLayout(k,l,c),x=t.getSpriteItems());var C,H;if(n){var q=this._textLayout=new d.TextLayout(k,l,c);C=void 0;q.font&&q.font.length&&
(C=q.font[0]);H=.5;switch(q.anchor){case 5:case 1:case 7:H=0;break;case 6:case 2:case 8:H=1}k=.5;switch(q.anchor){case 5:case 3:case 6:k=0;break;case 7:case 4:case 8:k=1}l=.5;switch(q.justify){case 0:l=0;break;case 2:l=1}var v=24*q.letterSpacing,n=c?0:24*q.maxWidth,B=24*q.lineHeight,q=[24*q.offset[0],24*q.offset[1]];C=t.getGlyphItems(C);H=new h(C,n,B,v,q,H,k,l)}this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=this._markerIndexBuffer.index;this._textVertexStart=
this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=0;this._markerMap.clear();this._symbolInstances=t=[];this._glyphItems=C;k=this._textLayout;l=1;k&&k.size&&(l=k.size/24);v=k?k.maxAngle*e.C_DEG_TO_RAD:0;n=k?8*k.size:0;B=0;for(q=this._symbolFeatures;B<q.length;B++){var z=q[B],V=void 0;z.sprite&&(V=x[z.sprite]);var J=void 0,w=z.label,U=0;if(w&&(J=H.getShaping(w,z.rtl))&&0<J.length){for(var U=1E30,w=-1E30,
O=0,P=J;O<P.length;O++)var R=P[O],U=Math.min(U,R.x),w=Math.max(w,R.x);U=(w-U+48)*l*8}w=0;for(z=z.geometry;w<z.length;w++)for(O=z[w],R=void 0,c?(J&&0<J.length&&k&&k.size&&m._smoothVertices(O,8*k.size*(2+Math.min(2,4*Math.abs(k.offset[1])))),R=m._findAnchors(O,u,U)):R=[new b.Anchor(O[0].x,O[0].y)],P=0;P<R.length;P++){var Q=R[P];0>Q.x||4096<Q.x||0>Q.y||4096<Q.y||c&&0<U&&0===k.rotationAlignment&&!m._honorsTextMaxAngle(O,Q,U,v,n)||t.push(new G(J,O,V,Q))}}t.sort(r);for(x=0;x<t.length;x++)this._processFeature(t[x],
C,a)};m.prototype.updateSymbols=function(){this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=0;this._markerMap.clear();for(var a=this._glyphItems,b=this._avoidEdges,e=0,c=this._symbolInstances;e<c.length;e++)this._processFeature(c[e],a,b)};m.prototype._replaceKeys=
function(a,b){return a.replace(/{([^{}]+)}/g,function(a,e){return e in b?b[e]:""})};m.prototype._processFeature=function(a,b,c){var d=a.line,h=a.iconMosaicItem,m=a.shaping,k=a.anchor,r=(a=this._markerLayout)&&!!h,u=!0,n=1;r&&(n=a.size/(1/this._markerRatio)*8,u=a.optional||!h);var G=this._textLayout,t=G&&m&&0<m.length,x;x=1;var C=!0;t&&(x=G.size/24,x*=8,C=G.optional||!m||0===m.length);var E=new l.Point(0,-17),q;if(r){q=this._placementEngine.getIconPlacement(k,h,n,d,a,c);if(q.footprint.minzoom===e.C_INFINITY&&
!u)return;k.minzoom>q.footprint.minzoom&&(q.footprint.minzoom=k.minzoom)}var w;if(t&&(w=this._placementEngine.getTextPlacement(k,E,m,b,x,d,G,c))){if(w.footprint.minzoom===e.C_INFINITY&&!C)return;k.minzoom>w.footprint.minzoom&&(w.footprint.minzoom=k.minzoom)}if(!C&&!u||!u&&w&&w.footprint.minzoom!==e.C_INFINITY||!C&&q&&q.footprint.minzoom!==e.C_INFINITY)b=Math.max(q.footprint.minzoom,w.footprint.minzoom),q.footprint.minzoom=b,w.footprint.minzoom=b;w&&w.footprint.minzoom!==e.C_INFINITY&&(G.ignorePlacement||
this._placementEngine.add(w),this._addPlacedSymbols(w.shapes,w.footprint.minzoom,this.zoom,!1));q&&q.footprint.minzoom!==e.C_INFINITY&&(a.ignorePlacement||this._placementEngine.add(q),this._addPlacedSymbols(q.shapes,q.footprint.minzoom,this.zoom,!0,h.page))};m.prototype._addPlacedSymbols=function(a,b,c,d,h){void 0===h&&(h=-1);b=Math.max(c+e.log2(b),0);for(var m=0;m<a.length;m++){var k=a[m],r=Math.max(c+e.log2(k.minzoom),b),l=Math.min(c+e.log2(k.maxzoom),25);if(!(l<=r)){var u=k.tl,n=k.tr,G=k.bl,t=
k.br,y=k.mosaicRect,C=-k.labelAngle,k=k.anchor,x=d?this._markerVertexBuffer:this._textVertexBuffer,w=d?this._markerIndexBuffer:this._textIndexBuffer,E=x.index,q=y.x,D=y.y,z=q+y.width,y=D+y.height;x.add(k.x,k.y,u.x,u.y,q,D,C,r,l,b);x.add(k.x,k.y,n.x,n.y,z,D,C,r,l,b);x.add(k.x,k.y,G.x,G.y,q,y,C,r,l,b);x.add(k.x,k.y,t.x,t.y,z,y,C,r,l,b);w.add(E+0,E+1,E+2);w.add(E+1,E+2,E+3);d?(this._markerMap.has(h)?this._markerMap.get(h)[1]+=6:this._markerMap.set(h,[this._markerTriangleElementsStart+this._markerTriangleElementsNum/
3,6]),this._markerTriangleElementsNum+=6):this._textTriangleElementsNum+=6}}};m._findAnchors=function(a,c,d){c+=d;for(var h=0,m=a.length-1,k=0;k<m;k++)h+=l.Point.distance(a[k],a[k+1]);k=.5*(d||c);if(h<=k)return[];d=k/h;c=h/Math.max(Math.round(h/c),1);for(var h=0,m=-c/2,r=[],n=a.length-1,k=0;k<n;k++){for(var u=a[k],G=a[k+1],t=G.x-u.x,C=G.y-u.y,x=Math.sqrt(t*t+C*C),E=void 0;m+c<h+x;){var m=m+c,q=(m-h)/x,z=e.interpolate(u.x,G.x,q),q=e.interpolate(u.y,G.y,q);void 0===E&&(E=Math.atan2(C,t));r.push(new b.Anchor(z,
q,E,k,d))}h+=x}return r};m.deviation=function(a,b,e){return Math.atan2((b.x-a.x)*(e.y-b.y)-(b.y-a.y)*(e.x-b.x),(b.x-a.x)*(e.x-b.x)+(b.y-a.y)*(e.y-b.y))};m._honorsTextMaxAngle=function(a,b,e,c,d){var h=0;e/=2;for(var m=new l.Point(b.x,b.y),k=b.segment+1;h>-e;){--k;if(0>k)return!1;h-=l.Point.distance(a[k],m);m=a[k]}h+=l.Point.distance(a[k],a[k+1]);b=[];for(var m=0,r=a.length;h<e;){var n=a[k],G=void 0;do{++k;if(k===r)return!1;G=a[k]}while(G.isEqual(n));var u=k,t=void 0;do{++u;if(u===r)return!1;t=a[u]}while(t.isEqual(G));
n=this.deviation(n,G,t);b.push({deviation:n,distToAnchor:h});for(m+=n;h-b[0].distToAnchor>d;)m-=b.shift().deviation;if(Math.abs(m)>c)return!1;h+=l.Point.distance(G,t)}return!0};m._smoothVertices=function(a,b){if(!(0>=b)){var e=a.length;if(!(3>e)){var c=[],d=0;c.push(0);for(var h=1;h<e;h++)d+=l.Point.distance(a[h],a[h-1]),c.push(d);b=Math.min(b,.2*d);d=[];d.push(a[0].x);d.push(a[0].y);var m=a[e-1].x,k=a[e-1].y,h=l.Point.sub(a[0],a[1]);h.normalize();a[0].x+=b*h.x;a[0].y+=b*h.y;h.assignSub(a[e-1],a[e-
2]);h.normalize();a[e-1].x+=b*h.x;a[e-1].y+=b*h.y;for(h=1;h<e;h++)c[h]+=b;c[e-1]+=b;for(var r=.5*b,h=1;h<e-1;h++){for(var n=0,G=0,u=0,t=h-1;0<=t&&!(c[t+1]<c[h]-r);t--){var C=r+c[t+1]-c[h],q=c[t+1]-c[t],x=c[h]-c[t]<r?1:C/q;if(1E-6>Math.abs(x))break;var w=x*x,z=x*C-.5*w*q,O=x*q/b,P=a[t+1],R=a[t].x-P.x,Q=a[t].y-P.y,n=n+O/z*(P.x*x*C+.5*w*(C*R-q*P.x)-w*x*q*R/3),G=G+O/z*(P.y*x*C+.5*w*(C*Q-q*P.y)-w*x*q*Q/3),u=u+O}for(t=h+1;t<e&&!(c[t-1]>c[h]+r);t++){C=r-c[t-1]+c[h];q=c[t]-c[t-1];x=c[t]-c[h]<r?1:C/q;if(1E-6>
Math.abs(x))break;w=x*x;z=x*C-.5*w*q;O=x*q/b;P=a[t-1];R=a[t].x-P.x;Q=a[t].y-P.y;n+=O/z*(P.x*x*C+.5*w*(C*R-q*P.x)-w*x*q*R/3);G+=O/z*(P.y*x*C+.5*w*(C*Q-q*P.y)-w*x*q*Q/3);u+=O}d.push(n/u);d.push(G/u)}d.push(m);d.push(k);for(t=h=0;h<e;h++)a[h].x=d[t++],a[h].y=d[t++]}}};return m}(n);q._bidiEngine=new m;return q})},"esri/views/vectorTiles/Placement":function(){define(["require","exports","./Geometry","./GeometryUtils","./Conflict"],function(q,a,c,z,n){q=function(){return function(a,b,c,d,l){void 0===c&&
(c=0);void 0===d&&(d=-1);void 0===l&&(l=e);this.x=a;this.y=b;this.angle=c;this.segment=d;this.minzoom=l}}();a.Anchor=q;q=function(){return function(a,b,e){this.glyph=a;this.x=b;this.y=e}}();a.ShapedGlyph=q;var l=function(){return function(a,b,c,d,l,n){void 0===d&&(d=!1);void 0===l&&(l=e);void 0===n&&(n=z.C_INFINITY);this.anchor=a;this.labelAngle=b;this.glyphAngle=c;this.upsideDown=d;this.minzoom=l;this.maxzoom=n}}(),d=function(){return function(a,b,e,c,d,l,n,u,q){this.tl=a;this.tr=b;this.bl=e;this.br=
c;this.mosaicRect=d;this.labelAngle=l;this.anchor=n;this.minzoom=u;this.maxzoom=q}}();a.PlacedSymbol=d;var b=function(){return function(a,b){this.footprint=a;this.shapes=b}}();a.Placement=b;var e=.5;q=function(){function a(a){this.mapAngle=a;this._conflictEngine=new n.ConflictEngine(a)}a.prototype.getIconPlacement=function(a,h,k,l,C,t){var m=h.width/h.pixelRatio,r=h.height/h.pixelRatio;l=C.offset[0]-m/2;var G=C.offset[1]-r/2,m=l+m,r=G+r,q=h.rect,D=l-1,v=G-1,F=D+q.width/h.pixelRatio,I=v+q.height/h.pixelRatio;
h=new c.Point(D,v);var A=new c.Point(F,I),D=new c.Point(D,I),F=new c.Point(F,v),I=C.rotate*z.C_DEG_TO_RAD,v=1===C.rotationAlignment;0<=a.segment&&!v&&(I+=a.angle);if(0!==I){var N=Math.cos(I),H=Math.sin(I);h.rotate(N,H);A.rotate(N,H);D.rotate(N,H);F.rotate(N,H)}N=8*C.padding;H=new c.Point(a.x,a.y);a=new n.Footprint(this.mapAngle,N,v);a.addBox(H,new n.Box(l,G,m,r),k,I,e,z.C_INFINITY);k=new d(h,F,D,A,q,0,H,e,z.C_INFINITY);k=new b(a,[k]);l=e;C.allowOverlap||(l=this._conflictEngine.getMinZoom(k.footprint,
l,t,v));a.minzoom=l;return k};a.prototype.getTextPlacement=function(a,h,k,G,C,t,u,q){for(var m=new c.Point(a.x,a.y),r=u.rotate*z.C_DEG_TO_RAD,x=0===u.rotationAlignment,v=u.keepUpright,F=e,I=!x,A=I?0:a.angle,N=0<=a.segment&&x,H=new n.Footprint(this.mapAngle,8*u.padding,I),M=[],B=!N,X=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,J=X,w=V,U=N?v:x&&v,O=[],P,R=0;R<k.length;R++){var Q=k[R],W=G[Q.glyph];if(W){var ea=W.rect;if(!(!ea||0>=ea.width||0>=ea.height)){var ca=W.metrics;B&&(P&&P!==Q.y&&(H.addBox(m,
new n.Box(X,J,V,w),C,r,e,z.C_INFINITY),X=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,J=X,w=V),P=Q.y);var fa=[];if(N){if(W=(h.x+Q.x+ca.left-3+.5*W.metrics.width)*C,F=this._placeGlyph(a,F,W,t,a.segment,1,fa),v&&(F=this._placeGlyph(a,F,W,t,a.segment,-1,fa)),2<=F)break}else fa.push(new l(m,A,A)),x&&v&&fa.push(new l(m,A+z.C_PI,A+z.C_PI,!0));for(var W=Q.x+h.x+ca.left,Q=Q.y+h.y-ca.top,ja=W+ca.width,ca=Q+ca.height,da=new c.Point(W-3,Q-3),Y=new c.Point(da.x+ea.width,da.y+ea.height),ga=new c.Point(da.x,
Y.y),T=new c.Point(Y.x,da.y),ha=0;ha<fa.length;ha++){var aa=fa[ha],ka=da.clone(),la=ga.clone(),ma=T.clone(),na=Y.clone(),oa=Q,ba=ca,K=aa.glyphAngle+r;if(0!==K){var S=Math.cos(K),f=Math.sin(K);ka.rotate(S,f);na.rotate(S,f);la.rotate(S,f);ma.rotate(S,f)}M.push(new d(ka,ma,la,na,ea,aa.labelAngle,aa.anchor,aa.minzoom,aa.maxzoom));if(!U||this._legible(aa.labelAngle))B?(W<X&&(X=W),oa<J&&(J=oa),ja>V&&(V=ja),ba>w&&(w=ba)):2>aa.minzoom&&H.addBox(aa.anchor,new n.Box(W,oa,ja,ba),C,K,aa.minzoom,aa.maxzoom);O.push(aa)}}}}if(2<=
F)return null;B&&H.addBox(m,new n.Box(X,J,V,w),C,r,e,z.C_INFINITY);a=new b(H,M);u.allowOverlap||(F=this._conflictEngine.getMinZoom(a.footprint,F,q,I));H.minzoom=F;return a};a.prototype.add=function(a){this._conflictEngine.add(a.footprint)};a.prototype._legible=function(a){a=z.radToByte(a);return 65>a||193<=a};a.prototype._placeGlyph=function(a,b,e,d,h,n,u){var k=0>n?z.positiveMod(a.angle+z.C_PI,z.C_2PI):a.angle,m=this._legible(k),r=0;0>e&&(n*=-1,e*=-1,r=z.C_PI);0<n&&++h;a=new c.Point(a.x,a.y);var G=
d[h],t=z.C_INFINITY;if(d.length<=h)return t;for(;;){var q=G.x-a.x,C=G.y-a.y,A=Math.sqrt(q*q+C*C),N=Math.max(e/A,b),q=z.positiveMod(Math.atan2(C/A,q/A)+r,z.C_2PI);u.push(new l(a,k,q,m,N,t));if(N<=b)return N;a=G.clone();do{h+=n;if(d.length<=h||0>h)return N;G=d[h]}while(a.isEqual(G));t=G.x-a.x;q=G.y-a.y;C=Math.sqrt(t*t+q*q);t*=A/C;q*=A/C;a.x-=t;a.y-=q;t=N}};return a}();a.PlacementEngine=q})},"esri/views/vectorTiles/Conflict":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(q,
a,c,z){q=function(){function a(a,e,c,d){this.left=a;this.top=e;this.right=c;this.bottom=d}a.prototype.clone=function(){return new a(this.left,this.top,this.right,this.bottom)};a.prototype.move=function(a,e){this.left+=a;this.top+=e;this.right+=a;this.bottom+=e};a.prototype.rotate=function(a,e){var b=this.left,c=this.right,d=this.top,k=this.bottom,l=b*a-d*e,n=b*e+d*a,t=c*a-d*e,d=c*e+d*a,u=b*a-k*e,b=b*e+k*a,q=c*a-k*e;a=c*e+k*a;this.left=Math.min(l,t,u,q);this.top=Math.min(n,d,b,a);this.right=Math.max(l,
t,u,q);this.bottom=Math.max(n,d,b,a)};a.overlaps=function(a,e){return a.right>e.left&&a.left<e.right&&a.bottom>e.top&&a.top<e.bottom};return a}();a.Box=q;var n=function(){function a(a,e,c,d){this.anchor=a;this.corners=e;this.minzoom=c;this.maxzoom=d}a.prototype.left=function(){return this.corners[0].x};a.prototype.right=function(){return this.corners[2].x};a.prototype.top=function(){return this.corners[1].y};a.prototype.bottom=function(){return this.corners[3].y};return a}();a.Obstacle=n;q=function(){function a(a,
e,c){this.obstacles=[];this.mapAngle=a;this.padding=e;this.isScreenAligned=c;this.minzoom=l}a.prototype.addBox=function(a,e,d,m,r,k){var b=e.left*d-this.padding,h=e.top*d-this.padding,l=e.right*d+this.padding;e=e.bottom*d+this.padding;b=[new c.Point(b,h),new c.Point(l,h),new c.Point(l,e),new c.Point(b,e)];0!==this.mapAngle&&(h=Math.cos(this.mapAngle),l=Math.sin(this.mapAngle),a=a.clone(),a.rotate(h,l));this.isScreenAligned||(m+=this.mapAngle);if(0!==m){h=Math.cos(m);l=Math.sin(m);b[0].rotate(h,l);
b[1].rotate(h,l);b[2].rotate(h,l);b[3].rotate(h,l);m=0;for(h=1;4>h;h++)b[h].x<b[m].x?m=h:b[h].x===b[m].x&&b[h].y<b[m].y&&(m=h);if(m){l=[];for(h=0;4>h;h++)l.push(b[(h+m)%4]);b=l}}this.obstacles.push(new n(a,b,r,k))};return a}();a.Footprint=q;var l=.5;q=function(){function a(a){this._grid=[];this._angle=a;this._c=Math.cos(a);this._s=Math.sin(a)}a.prototype.add=function(b){var e=this._grid,c=0;for(b=b.obstacles;c<b.length;c++)for(var d=b[c],r=d.anchor,k=a._gridClamp(Math.min(d.left()+r.x,r.x)),l=a._gridClamp(Math.max(d.right()+
r.x,r.x)),n=a._gridClamp(Math.min(d.top()+r.y,r.y)),r=a._gridClamp(Math.max(d.bottom()+r.y,r.y));n<=r;n++)for(var t=k;t<=l;t++){var u=e[16*n+t];u||(u=e[16*n+t]=[]);u.push(d)}};a.prototype.getMinZoom=function(b,e,c,d){if(0===b.obstacles.length)return z.C_INFINITY;c=this._grid;d=0;for(b=b.obstacles;d<b.length;d++)for(var h=b[d],k=h.anchor,m=a._gridClamp(Math.min(h.left()+k.x,k.x)),l=a._gridClamp(Math.max(h.right()+k.x,k.x)),n=a._gridClamp(Math.min(h.top()+k.y,k.y)),k=a._gridClamp(Math.max(h.bottom()+
k.y,k.y));n<=k;n++)for(var u=m;u<=l;u++){var q=c[16*n+u];if(q)for(var E=0;E<q.length;E++){var y=q[E];if(!(h.minzoom>=y.maxzoom||y.minzoom>=h.maxzoom)&&(e=a._calcPlacementZoom(h,y,e),2<=e))return z.C_INFINITY}}return 2>e?e:z.C_INFINITY};a._gridClamp=function(a){return z.clamp(a>>9,-7,8)};a._calcPlacementZoom=function(b,e,c){var d=e.anchor.x-b.anchor.x;if(0===d&&(b.right()<e.left()||e.right()<b.left()))return c;var h=e.anchor.y-b.anchor.y;if(0===h&&(b.bottom()<e.top()||e.bottom()<b.top()))return c;
var k=z.C_INFINITY;if(0!==d){var l=(0<d?b.right()-e.left():b.left()-e.right())/d;l<k&&(k=l);d=0<d?a._calcExtZoomX(b,e,l):a._calcExtZoomX(e,b,l);d<k&&(k=d)}0!==h&&(d=(0<h?b.bottom()-e.top():b.top()-e.bottom())/h,d<k&&(k=d),h=0<h?a._calcExtZoomY(b,e,d):a._calcExtZoomY(e,b,d),h<k&&(k=h));if(k<b.minzoom||k<e.minzoom)return c;k=Math.min(k,b.maxzoom,e.maxzoom);k<c&&(k=c);return k};a._calcExtZoomX=function(a,e,c){var b,d,h;if(a.anchor.y+a.corners[2].y/c<e.anchor.y+e.corners[0].y/c){b=a.corners[2].x-a.corners[3].x;
h=a.corners[2].y-a.corners[3].y;var l=e.corners[1].x-e.corners[0].x;d=e.corners[1].y-e.corners[0].y;0<=b*d-h*l?a.anchor.y+a.corners[3].y/c<e.anchor.y+e.corners[0].y/c?(c=a.corners[3],b=e.corners[0],d=e.corners[1],h=1):(c=e.corners[0],b=a.corners[3],d=a.corners[2],h=-1):a.anchor.y+a.corners[2].y/c>e.anchor.y+e.corners[1].y/c?(c=a.corners[2],b=e.corners[0],d=e.corners[1],h=1):(c=e.corners[1],b=a.corners[3],d=a.corners[2],h=-1)}else b=a.corners[2].x-a.corners[1].x,h=a.corners[2].y-a.corners[1].y,l=e.corners[3].x-
e.corners[0].x,d=e.corners[3].y-e.corners[0].y,0>b*d-h*l?a.anchor.y+a.corners[1].y/c>e.anchor.y+e.corners[0].y/c?(c=a.corners[1],b=e.corners[0],d=e.corners[3],h=1):(c=e.corners[0],b=a.corners[1],d=a.corners[2],h=-1):a.anchor.y+a.corners[2].y/c<e.anchor.y+e.corners[3].y/c?(c=a.corners[2],b=e.corners[0],d=e.corners[3],h=1):(c=e.corners[3],b=a.corners[1],d=a.corners[2],h=-1);l=d.x-b.x;d=d.y-b.y;return h*((c.y-b.y)*l-(c.x-b.x)*d)/((a.anchor.x-e.anchor.x)*d-(a.anchor.y-e.anchor.y)*l)};a._calcExtZoomY=
function(a,e,c){var b,d,h;if(a.anchor.x+a.corners[3].x/c<e.anchor.x+e.corners[1].x/c){b=a.corners[3].x-a.corners[2].x;h=a.corners[3].y-a.corners[2].y;var l=e.corners[0].x-e.corners[1].x;d=e.corners[0].y-e.corners[1].y;0>b*d-h*l?a.anchor.x+a.corners[2].x/c<e.anchor.x+e.corners[1].x/c?(c=a.corners[2],b=e.corners[1],d=e.corners[0],h=1):(c=e.corners[1],b=a.corners[2],d=a.corners[3],h=-1):a.anchor.x+a.corners[3].x/c>e.anchor.x+e.corners[0].x/c?(c=a.corners[3],b=e.corners[1],d=e.corners[0],h=1):(c=e.corners[0],
b=a.corners[2],d=a.corners[3],h=-1)}else b=a.corners[3].x-a.corners[0].x,h=a.corners[3].y-a.corners[0].y,l=e.corners[2].x-e.corners[1].x,d=e.corners[2].y-e.corners[1].y,0<b*d-h*l?a.anchor.x+a.corners[0].x/c>e.anchor.x+e.corners[1].x/c?(c=a.corners[0],b=e.corners[1],d=e.corners[2],h=1):(c=e.corners[1],b=a.corners[0],d=a.corners[3],h=-1):a.anchor.x+a.corners[3].x/c<e.anchor.x+e.corners[2].x/c?(c=a.corners[3],b=e.corners[1],d=e.corners[2],h=1):(c=e.corners[2],b=a.corners[0],d=a.corners[3],h=-1);l=d.x-
b.x;d=d.y-b.y;return h*((c.y-b.y)*l-(c.x-b.x)*d)/((a.anchor.x-e.anchor.x)*d-(a.anchor.y-e.anchor.y)*l)};return a}();a.ConflictEngine=q})},"esri/views/vectorTiles/TextShaping":function(){define(["require","exports","./Placement"],function(q,a,c){return function(){function a(a,c,d,b,e,h,m,r){this._glyphItems=a;this._maxWidth=c;this._lineHeight=d;this._letterSpacing=b;this._offset=e;this._hAnchor=h;this._vAnchor=m;this._justify=r}a.prototype.getShaping=function(a,l){for(var d=this._glyphItems,b=this._letterSpacing,
e=this._offset[0],h=this._offset[1],m=[],r=a.length,k=0;k<r;k++){var n=a.charCodeAt(k),q=d[n];q&&(m.push(new c.ShapedGlyph(n,e,h)),e+=q.metrics.advance+b)}if(0<m.length){n=this._maxWidth;a=this._lineHeight;b=this._justify;e=m.length;r=h=d=0;if(0!==n)for(var t=q=0,k=0;k<e;k++){var u=m[k];u.x-=t;u.y=l?u.y-a*d:u.y+a*d;if(u.x>n&&0<q){for(var x=m[q+1].x,r=Math.max(x,r),z=q+1;z<=k;z++)m[z].y=l?m[z].y-a:m[z].y+a,m[z].x-=x;b&&this._applyJustification(m,h,q-1);h=q+1;q=0;t+=x;d++}32===u.glyph&&(q=k)}k=m[e-
1];r=Math.max(r,k.x+this._glyphItems[k.glyph].metrics.advance);b&&this._applyJustification(m,h,e-1);k=(b-this._hAnchor)*r;b=(-this._vAnchor*(d+1)+.5)*a;l&&d&&(b+=d*a);for(l=0;l<m.length;l++)a=m[l],a.x+=k,a.y+=b}return m};a.prototype._applyJustification=function(a,c,d){for(var b=a[d],b=(b.x+this._glyphItems[b.glyph].metrics.advance)*this._justify;c<=d;c++)a[c].x-=b};return a}()})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(q,a,c){function z(a,
c,e,d,f){var g=a;void 0===c&&(c=f.defInFormat);void 0===e&&(e=f.defOutFormat);void 0===d&&(d=f.defSwap);if(c!==e){var h,k=c.substring(0,1);h=c.substring(1,4);var m=e.substring(0,1),r=e.substring(1,4);"C"===h.charAt(0)&&(h=n(g),h="ltr"===h||"rtl"===h?h.toUpperCase():"L"===c.charAt(2)?"LTR":"RTL",c=k+h);"C"===r.charAt(0)&&(h=n(g),"rtl"===h?r="RTL":"ltr"===h?(g=g.split(""),g.reverse(),h=n(g.join("")),r=h.toUpperCase()):r="L"===e.charAt(2)?"LTR":"RTL",e=m+r)}if(c===e)return a;m=c.substring(0,1);g=c.substring(1,
4);k=e.substring(0,1);r=e.substring(1,4);f.inFormat=c;f.outFormat=e;f.swap=d;if("L"===m&&"VLTR"===e){if("LTR"===g)return f.dir=I,l(a,f);if("RTL"===g)return f.dir=A,l(a,f)}if("V"===m&&"V"===k)return f.dir="RTL"===g?A:I,b(a,f);if("L"===m&&"VRTL"===e)return f.dir="LTR"===g?I:A,a=l(a,f),b(a);if("VLTR"===c&&"LLTR"===e)return f.dir=I,l(a,f);if("V"===m&&"L"===k&&g!==r)return a=b(a),"RTL"===g?z(a,"LLTR","VLTR",d,f):z(a,"LRTL","VRTL",d,f);if("VRTL"===c&&"LRTL"===e)return z(a,"LRTL","VRTL",d,f);if("L"===m&&
"L"===k)return c=f.swap,f.swap=c.substr(0,1)+"N","RTL"===g?(f.dir=A,a=l(a,f),f.swap="N"+c.substr(1,2),f.dir=I,a=l(a,f)):(f.dir=I,a=l(a,f),f.swap="N"+c.substr(1,2),a=z(a,"VLTR","LRTL",f.swap,f)),a}function n(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?"ltr":"rtl":""}function l(a,b){a=a.split("");var c=[];d(a,c,b);if(0!==b.hiLevel&&b.swap.substr(0,1)!==b.swap.substr(1,2))for(var e=0;e<a.length;e++)if(1===c[e]){var f=e,g;b:{g=a[e];for(var h=
void 0,k=0,l=M.length-1;k<=l;)if(h=Math.floor((k+l)/2),g<M[h][0])l=h-1;else if(g>M[h][0])k=h+1;else{g=M[h][1];break b}}a[f]=g}m(2,a,c,b);m(1,a,c,b);y=c;return a.join("")}function d(a,b,c){var e=a.length,d=c.dir?fa:ca,f=null,g=null,h=null,f=0,g=g=null,k=-1,m=g=null,l=[],n=[];c.hiLevel=c.dir;c.lastArabic=!1;c.hasUbatAl=!1;c.hasUbatB=!1;c.hasUbatS=!1;for(g=0;g<e;g++){var m=g,h=a[g].charCodeAt(0),p=qa[h>>8];l[m]=p<ba?p:ra[p-ba][h&255]}for(m=0;m<e;m++){n[m]=g=r(a,l,n,m,c);f=d[f][g];g=f&240;f&=15;b[m]=
h=d[f][v];if(0<g){if(16===g)for(g=k;g<m;g++)b[g]=1;k=-1}if(g=d[f][F])-1===k&&(k=m);else if(-1<k){for(g=k;g<m;g++)b[g]=h;k=-1}l[m]===ha&&(b[m]=0);c.hiLevel|=h}if(c.hasUbatS)for(a=0;a<e;a++)if(l[a]===aa)for(b[a]=c.dir,d=a-1;0<=d;d--)if(l[d]===la)b[d]=c.dir;else break}function b(a,b){a=a.split("");if(b){var c=[];d(a,c,b);y=c}a.reverse();x.reverse();return a.join("")}function e(a){for(var b=0;b<W.length;b++)if(a>=W[b]&&a<=ea[b])return!0;return!1}function h(a,b,c,d){for(;b*c<d&&G(a[b]);)b+=c;return b*
c<d&&e(a[b])?!0:!1}function m(a,b,c,e){if(!(e.hiLevel<a))if(1!==a||e.dir!==A||e.hasUbatB){e=b.length;for(var d=0,f,g,h;d<e;){if(c[d]>=a){for(f=d+1;f<e&&c[f]>=a;)f++;for(g=f-1;d<g;d++,g--)h=b[d],b[d]=b[g],b[g]=h,h=x[d],x[d]=x[g],x[g]=h;d=f}d++}}else b.reverse(),x.reverse()}function r(a,b,c,e,d){return{UBAT_L:function(){d.lastArabic=!1;return ja},UBAT_R:function(){d.lastArabic=!1;return da},UBAT_ON:function(){return T},UBAT_AN:function(){return ga},UBAT_EN:function(){return d.lastArabic?ga:Y},UBAT_AL:function(){d.lastArabic=
!0;d.hasUbatAl=!0;return da},UBAT_WS:function(){return T},UBAT_CS:function(){var a,f;if(1>e||e+1>=b.length||(a=c[e-1])!==Y&&a!==ga||(f=b[e+1])!==Y&&f!==ga)return T;d.lastArabic&&(f=ga);return f===a?f:T},UBAT_ES:function(){return(0<e?c[e-1]:ha)===Y&&e+1<b.length&&b[e+1]===Y?Y:T},UBAT_ET:function(){if(0<e&&c[e-1]===Y)return Y;if(d.lastArabic)return T;for(var a=e+1,f=b.length;a<f&&b[a]===ma;)a++;return a<f&&b[a]===Y?Y:T},UBAT_NSM:function(){if("VLTR"===d.inFormat){for(var f=b.length,g=e+1;g<f&&b[g]===
na;)g++;if(g<f&&(f=a[e],g=b[g],(1425<=f&&2303>=f||64286===f)&&(g===da||g===ka)))return da}return 1>e||b[e-1]===ha?T:c[e-1]},UBAT_B:function(){d.lastArabic=!0;d.hasUbatB=!0;return d.dir},UBAT_S:function(){d.hasUbatS=!0;return T},UBAT_LRE:function(){d.lastArabic=!1;return T},UBAT_RLE:function(){d.lastArabic=!1;return T},UBAT_LRO:function(){d.lastArabic=!1;return T},UBAT_RLO:function(){d.lastArabic=!1;return T},UBAT_PDF:function(){d.lastArabic=!1;return T},UBAT_BN:function(){return T}}[oa[b[e]]]()}function k(a,
b){for(var c=0;c<J.length;c++)if(a===J[c])return b[c];return a}function G(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function C(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function t(a,b){for(var c=0;c<B.length;c++)if(a===B[c])return b[c];return a}function u(a,b,c,e){for(var d=0;d<a.length;d++)if(a[d]>b||!c&&a[d]===b)a[d]+=e}q.getObject("string",!0,dojox);q=a("dojox.string.BidiEngine",c,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],
levels:[],bidiTransform:function(a,b,c){this.sourceToTarget=[];this.targetToSource=[];if(!a)return"";var d=this.sourceToTarget,f=this.targetToSource,g=a.length;x=[];y=[];for(var m=0;m<g;m++)d[m]=m,f[m]=m,x[m]=m;if(!this.checkParameters(b,c))return a;b=this.inputFormat;c=this.outputFormat;var d=a,d=D,m=C(b.charAt(1)),f=C(c.charAt(1)),l="I"===b.charAt(0)?"L":b.charAt(0),g="I"===c.charAt(0)?"L":c.charAt(0),m=l+m,f=g+f,g=b.charAt(2)+c.charAt(2);d.defInFormat=m;d.defOutFormat=f;d.defSwap=g;a=z(a,m,f,g,
d);d=!1;if("R"===c.charAt(1))d=!0;else if("C"===c.charAt(1)||"D"===c.charAt(1))d=this.checkContextual(a);f=this.sourceToTarget=x;g=Array(f.length);for(m=0;m<f.length;m++)g[f[m]]=m;E=this.targetToSource=g;if(b.charAt(3)===c.charAt(3))d=a;else if("S"===c.charAt(3))if(b=d,c=!0,0===a.length)d=void 0;else{void 0===b&&(b=!0);void 0===c&&(c=!0);a=String(a);a=a.split("");var r=0,f=1,d=a.length;b||(r=a.length-1,f=-1,d=1);for(var g=d,m=c,n=0,d=[],l=0;r*f<g;r+=f)if(e(a[r])||G(a[r])){var p;if(p="\u0644"===a[r])b:{for(var q=
a,v=r+f,A=f,F=g;v*A<F&&G(q[v]);)v+=A;p=" ";if(v*A<F)for(p=q[v],q=0;q<B.length;q++)if(B[q]===p){p=!0;break b}p=!1}if(p){a[r]=0===n?t(a[r+f],X):t(a[r+f],V);r+=f;n=a;p=r;q=f;for(v=g;p*q<v&&G(n[p]);)p+=q;p*q<v&&(n[p]=" ");m&&(d[l]=r,l++);n=0}else{p=a[r];if(1===n){q=r;if(h(a,r+f,f,g))b:for(v=a[r],A=0;A<J.length;A++){if(v===J[A]){v=O[A];break b}}else v=k(a[r],U);a[q]=v}else!0===h(a,r+f,f,g)?a[r]=k(a[r],P):a[r]=k(a[r],w);G(p)||(n=1);b:{for(q=0;q<R.length;q++)if(R[q]===p){p=!0;break b}p=!1}!0===p&&(n=0)}}else n=
0;f="";for(g=0;g<a.length;g++){if(m=c){b:{for(m=0;m<d.length;m++)if(d[m]===g)break b;m=-1}m=-1<m}m?(u(E,g,!b,-1),x.splice(g,1)):f+=a[g]}d=f}else if(b=a,c=d,a=!0,0===b.length)d=void 0;else for(void 0===a&&(a=!0),void 0===c&&(c=!0),b=String(b),d="",f=[],f=b.split(""),g=0;g<b.length;g++)m=!1,"\ufe70"<=f[g]&&"\ufeff">f[g]?(l=b.charCodeAt(g),"\ufef5"<=f[g]&&"\ufefc">=f[g]?(c?(0<g&&a&&" "===f[g-1]?d=d.substring(0,d.length-1)+"\u0644":(d+="\u0644",m=!0),d+=B[(l-65269)/2]):(d+=B[(l-65269)/2],d+="\u0644",
g+1<b.length&&a&&" "===f[g+1]?g++:m=!0),m&&(u(E,g,!0,1),x.splice(g,0,x[g]))):d+=Q[l-65136]):d+=f[g];this.sourceToTarget=x;this.targetToSource=E;this.levels=y;return d},_inputFormatSetter:function(a){if(!N.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=a},_outputFormatSetter:function(a){if(!N.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=a},checkParameters:function(a,b){a?this.set("inputFormat",
a):a=this.inputFormat;b?this.set("outputFormat",b):b=this.outputFormat;return a===b?!1:!0},checkContextual:function(a){a=n(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(sa){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return H.test(a)}});var x=[],E=[],y=[],D={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},v=5,F=6,I=0,A=1,N=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,
H=/[\u0591-\u06ff\ufb1d-\ufefc]/,M=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],
["\ufe65","\ufe64"]],B=["\u0622","\u0623","\u0625","\u0627"],X=["\ufef5","\ufef7","\ufef9","\ufefb"],V=["\ufef6","\ufef8","\ufefa","\ufefc"],J="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),w="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
U="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),O="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
P="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),R="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),Q="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
W=["\u0621","\u0641"],ea=["\u063a","\u064a"],ca=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],fa=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ja=0,da=1,Y=2,ga=3,T=4,ha=5,aa=6,ka=7,la=8,ma=11,na=12,oa="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),ba=100;a=ja;c=da;var K=Y,S=ga,f=T,ia=ha,pa=aa,g=ka,Z=la,L=
ma,p=na,qa=[ba+0,a,a,a,a,ba+1,ba+2,ba+3,c,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,ba+4,f,f,f,a,f,a,f,a,f,f,f,a,a,f,f,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,a,a,f,f,a,a,f,f,a,a,f,f,f,f,f,f,f,f,f,f,f,f,
f,f,f,f,f,f,f,f,f,f,f,a,a,a,ba+5,g,g,ba+6,ba+7],ra=[[18,18,18,18,18,18,18,18,18,pa,ia,pa,Z,ia,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ia,ia,ia,pa,Z,f,f,L,L,L,f,f,f,f,f,10,9,10,9,9,K,K,K,K,K,K,K,K,K,K,9,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,18,18,18,18,18,18,ia,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,f,L,L,L,L,f,f,f,f,a,f,f,18,f,f,L,L,K,K,f,a,f,f,f,K,a,f,f,f,f,
f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,a,a,a,a,a,a,a,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,a,f,f,f,f,f,f,f,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,
p,p,p,p,p,c,p,c,p,p,c,p,p,c,p,f,f,f,f,f,f,f,f,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,f,f,f,f,f,c,c,c,c,c,f,f,f,f,f,f,f,f,f,f,f],[S,S,S,S,f,f,f,f,g,L,L,g,9,g,f,f,p,p,p,p,p,p,p,p,p,p,p,g,f,f,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,S,S,S,S,S,S,S,S,S,S,L,S,S,g,g,g,p,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,
g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,p,p,p,p,p,p,p,S,f,p,p,p,p,p,p,g,g,p,p,f,p,p,p,p,g,g,K,K,K,K,K,K,K,K,K,K,g,g,g,g,g,g],[g,g,g,g,g,g,g,g,g,g,g,g,g,g,f,g,g,p,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,f,f,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,p,p,p,p,p,p,p,
p,p,p,p,g,f,f,f,f,f,f,f,f,f,f,f,f,f,f,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,p,p,p,p,p,p,p,p,p,c,c,f,f,f,f,c,f,f,f,f,f],[Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,18,18,18,a,c,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,Z,ia,13,14,15,16,17,9,L,L,L,L,L,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,9,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,Z,18,18,18,18,18,f,f,f,f,f,18,18,18,18,18,18,K,a,f,f,K,K,K,K,K,K,10,10,f,f,f,a,K,K,K,K,K,K,K,K,K,K,10,10,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,
a,a,f,f,f,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,f,f,f,f,f,c,p,c,c,c,c,c,c,c,c,c,c,10,c,c,c,c,c,c,c,c,c,c,c,c,c,f,c,c,c,c,c,f,c,f,c,c,f,c,c,f,c,c,c,c,c,c,c,c,c,c,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,
g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,p,p,p,p,p,p,p,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,9,f,9,f,f,9,f,f,f,f,f,f,f,f,f,L,f,f,10,10,f,f,f,f,f,L,L,f,f,f,f,f,g,g,g,g,g,f,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,
g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,f,f,18],[f,f,f,L,L,L,f,f,f,f,f,10,9,10,9,9,K,K,K,K,K,K,K,K,K,K,9,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,a,a,a,a,a,a,f,f,a,a,a,a,a,a,f,f,a,a,a,a,a,a,f,f,a,a,a,f,f,f,L,L,f,f,f,L,L,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f]];return q})},"esri/views/vectorTiles/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(q,a,c,z){var n=function(){return function(a,b,c){this.ratio=a;this.x=b;this.y=c}}();q=function(){function a(a,c,d){this.dz=a;
this.yPos=c;this.xPos=d}a.prototype.setExtent=function(a){this.finalRatio=4096/a*(1<<this.dz);var b;b=64/this.finalRatio;a>>=this.dz;b>a&&(b=a);this.margin=b;this.xmin=a*this.xPos-b;this.ymin=a*this.yPos-b;this.xmax=this.xmin+a+2*b;this.ymax=this.ymin+a+2*b};a.prototype.reset=function(a){this.type=a;this._prevIsIn=!1;this.lines=[];this.line=null};a.prototype.moveTo=function(a,e){this._pushLine();this._prevIsIn=this._isIn(a,e);this._moveTo(a,e,this._prevIsIn);this._prevPt=new c.Point(a,e);this._firstPt=
new c.Point(a,e)};a.prototype.lineTo=function(a,e){var b=this._isIn(a,e),d,l,k,q,C,t;if(b)this._prevIsIn?this._lineTo(a,e,!0):(d=this._prevPt,l=new c.Point(a,e),k=this._intersect(l,d),this._lineTo(k.x,k.y,!0),this._lineTo(l.x,l.y,!0));else{if(this._prevIsIn)l=this._prevPt,d=new c.Point(a,e),k=this._intersect(l,d),this._lineTo(k.x,k.y,!0);else{var u=this._prevPt;d=new c.Point(a,e);if(!(u.x<=this.xmin&&d.x<=this.xmin||u.x>=this.xmax&&d.x>=this.xmax||u.y<=this.ymin&&d.y<=this.ymin||u.y>=this.ymax&&d.y>=
this.ymax)){l=[];if(u.x<this.xmin&&d.x>this.xmin||u.x>this.xmin&&d.x<this.xmin)k=(this.xmin-u.x)/(d.x-u.x),t=u.y+k*(d.y-u.y),t<=this.ymin?C=!1:t>=this.ymax?C=!0:l.push(new n(k,this.xmin,t));if(u.x<this.xmax&&d.x>this.xmax||u.x>this.xmax&&d.x<this.xmax)k=(this.xmax-u.x)/(d.x-u.x),t=u.y+k*(d.y-u.y),t<=this.ymin?C=!1:t>=this.ymax?C=!0:l.push(new n(k,this.xmax,t));if(u.y<this.ymin&&d.y>this.ymin||u.y>this.ymin&&d.y<this.ymin)k=(this.ymin-u.y)/(d.y-u.y),t=u.x+k*(d.x-u.x),t<=this.xmin?q=!1:t>=this.xmax?
q=!0:l.push(new n(k,t,this.ymin));if(u.y<this.ymax&&d.y>this.ymax||u.y>this.ymax&&d.y<this.ymax)k=(this.ymax-u.y)/(d.y-u.y),t=u.x+k*(d.x-u.x),t<=this.xmin?q=!1:t>=this.xmax?q=!0:l.push(new n(k,t,this.ymax));if(0===l.length)q?C?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):C?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<l.length&&l[0].ratio>l[1].ratio)this._lineTo(l[1].x,l[1].y,!0),this._lineTo(l[0].x,l[0].y,!0);else for(k=0;k<l.length;k++)this._lineTo(l[k].x,
l[k].y,!0)}}this._lineTo(d.x,d.y,!1)}this._prevIsIn=b;this._prevPt=new c.Point(a,e)};a.prototype.close=function(){var a,c;0<this.line.length&&(a=this._firstPt,c=this._prevPt,a.x===c.x&&a.y===c.y||this.lineTo(a.x,a.y),a=this.line,c=a.length,4<=c&&(a[0].x===a[1].x&&a[0].x===a[c-2].x||a[0].y===a[1].y&&a[0].y===a[c-2].y)&&(a.pop(),a[0].x=a[c-2].x,a[0].y=a[c-2].y))};a.prototype.result=function(){this._pushLine();if(0===this.lines.length)return null;3===this.type&&l.simplify(this.margin*this.finalRatio,
this.lines);return this.lines};a.prototype._isIn=function(a,c){return a>=this.xmin&&a<=this.xmax&&c>=this.ymin&&c<=this.ymax};a.prototype._intersect=function(a,e){var b,d;if(e.x>=this.xmin&&e.x<=this.xmax)d=e.y<=this.ymin?this.ymin:this.ymax,b=a.x+(d-a.y)/(e.y-a.y)*(e.x-a.x);else if(e.y>=this.ymin&&e.y<=this.ymax)b=e.x<=this.xmin?this.xmin:this.xmax,d=a.y+(b-a.x)/(e.x-a.x)*(e.y-a.y);else{d=e.y<=this.ymin?this.ymin:this.ymax;b=e.x<=this.xmin?this.xmin:this.xmax;var l=(b-a.x)/(e.x-a.x),k=(d-a.y)/(e.y-
a.y);l<k?d=a.y+l*(e.y-a.y):b=a.x+k*(e.x-a.x)}return new c.Point(b,d)};a.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&this.lines.push(this.line):2===this.type?1<this.line.length&&this.lines.push(this.line):3===this.type&&3<this.line.length&&this.lines.push(this.line));this.line=[]};a.prototype._moveTo=function(a,e,d){3!==this.type?d&&(a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),this.line.push(new c.Point(a,
e))):(d||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),e<this.ymin&&(e=this.ymin),e>this.ymax&&(e=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),this.line.push(new c.Point(a,e)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,e,d){if(3!==this.type)if(d){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);e=Math.round((e-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(d=this.line[this.line.length-
1],d.equals(a,e)))return;this.line.push(new c.Point(a,e))}else this.line&&0<this.line.length&&this._pushLine();else if(d||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),e<this.ymin&&(e=this.ymin),e>this.ymax&&(e=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){d=this.line[this.line.length-1];var b=d.x===a,h=d.y===e;b&&h||(this._is_h&&b?(d.x=a,d.y=e,d=this.line[this.line.length-2],
this._is_h=d.x===a,this._is_v=d.y===e):this._is_v&&h?(d.x=a,d.y=e,d=this.line[this.line.length-2],this._is_h=d.x===a,this._is_v=d.y===e):(this.line.push(new c.Point(a,e)),this._is_h=b,this._is_v=h))}else this.line.push(new c.Point(a,e))};return a}();a.TileClipper=q;q=function(){function a(){}a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.type=a;this.lines=[];this.line=null};a.prototype.moveTo=function(a,e){this.line&&this.lines.push(this.line);
this.line=[];var b=this._ratio;this.line.push(new c.Point(Math.round(a*b),Math.round(e*b)))};a.prototype.lineTo=function(a,e){var b=this._ratio;this.line.push(new c.Point(Math.round(a*b),Math.round(e*b)))};a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};a.prototype.result=function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&1!==this._ratio&&l.simplify(64,this.lines);return this.lines};return a}();a.SimpleBuilder=
q;var l=function(){function a(){}a.simplify=function(b,c){if(c){var e=-b,d=4096+b,l=-b,k=4096+b;b=[];for(var n=[],q=c.length,t=0;t<q;++t){var u=c[t];if(u&&!(2>u.length))for(var x=u[0],z=void 0,y=u.length,D=1;D<y;++D)z=u[D],x.x===z.x&&(x.x<=e&&(x.y>z.y?(b.push(t),b.push(D),b.push(0),b.push(-1)):(n.push(t),n.push(D),n.push(0),n.push(-1))),x.x>=d&&(x.y<z.y?(b.push(t),b.push(D),b.push(1),b.push(-1)):(n.push(t),n.push(D),n.push(1),n.push(-1)))),x.y===z.y&&(x.y<=l&&(x.x<z.x?(b.push(t),b.push(D),b.push(2),
b.push(-1)):(n.push(t),n.push(D),n.push(2),n.push(-1))),x.y>=k&&(x.x>z.x?(b.push(t),b.push(D),b.push(3),b.push(-1)):(n.push(t),n.push(D),n.push(3),n.push(-1)))),x=z}0!==b.length&&0!==n.length&&(a.fillParent(c,n,b),a.fillParent(c,b,n),e=[],a.calcDeltas(e,n,b),a.calcDeltas(e,b,n),a.addDeltas(e,c))}};a.fillParent=function(a,c,d){for(var b=d.length,e=c.length,h=0;h<e;h+=4){for(var l=c[h],n=c[h+1],q=c[h+2],u=a[l][n-1],l=a[l][n],n=8092,x=-1,E=0;E<b;E+=4)if(d[E+2]===q){var y=d[E],D=d[E+1],v=a[y][D-1],y=
a[y][D];switch(q){case 0:case 1:z.between(u.y,v.y,y.y)&&z.between(l.y,v.y,y.y)&&(v=Math.abs(y.y-v.y),v<n&&(n=v,x=E));break;case 2:case 3:z.between(u.x,v.x,y.x)&&z.between(l.x,v.x,y.x)&&(v=Math.abs(y.x-v.x),v<n&&(n=v,x=E))}}c[h+3]=x}};a.calcDeltas=function(b,c,d){for(var e=c.length,h=0;h<e;h+=4){var k=a.calcDelta(h,c,d,[]);b.push(c[h]);b.push(c[h+1]);b.push(c[h+2]);b.push(k)}};a.calcDelta=function(b,c,d,m){b=c[b+3];if(-1===b)return 0;var e=m.length;if(1<e&&m[e-2]===b)return 0;m.push(b);return a.calcDelta(b,
d,c,m)+1};a.addDeltas=function(a,c){for(var b=a.length,d=0,e=0;e<b;e+=4){var k=a[e+3];k>d&&(d=k)}for(e=0;e<b;e+=4){var l=c[a[e]],n=a[e+1],k=d-a[e+3];switch(a[e+2]){case 0:l[n-1].x-=k;l[n].x-=k;break;case 1:l[n-1].x+=k;l[n].x+=k;break;case 2:l[n-1].y-=k;l[n].y-=k;break;case 3:l[n-1].y+=k,l[n].y+=k}}a=c.length;for(b=0;b<a;++b)l=c[b],!l||2>l.length||l[l.length-1].x!==l[0].x&&l[l.length-1].y!==l[0].y&&l.push(l[0])};return a}()})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require",
"exports","./StyleLayer"],function(q,a,c){return function(){function a(c,l){this.styleJSON=c;this.version=parseFloat(c.version);this.sprite=l?l.spriteUrl:c.sprite;this.glyphs=l?l.glyphsUrl:c.glyphs;this.layers=(c.layers||[]).map(a._create);this._identifyRefLayers()}a.prototype._identifyRefLayers=function(){for(var a=[],c=[],d=0,b=this.layers;d<b.length;d++){var e=b[d];if(1===e.type){var h=e.sourceLayer,h=h+("|"+JSON.stringify(e.minzoom)),h=h+("|"+JSON.stringify(e.maxzoom)),h=h+("|"+JSON.stringify(e.filter));
a.push({key:h,layer:e})}2===e.type&&(h=e.sourceLayer,h+="|"+JSON.stringify(e.minzoom),h+="|"+JSON.stringify(e.maxzoom),h+="|"+JSON.stringify(e.filter),h+="|"+JSON.stringify(e.layout["line-cap"]),h+="|"+JSON.stringify(e.layout["line-join"]),c.push({key:h,layer:e}))}this._assignRefLayers(a);this._assignRefLayers(c)};a.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var c,d,b=a.length,e=0;e<b;e++){var h=a[e];if(h.key===c)h.layer.refLayerId=d;else if(c=
h.key,d=h.layer.id,1===h.layer.type&&!h.layer.hasPaintProperty("fill-outline-color"))for(var m=e+1;m<b;m++){var n=a[m];if(n.key===c){if(n.layer.hasPaintProperty("fill-outline-color")){a[e]=n;a[m]=h;d=n.layer.id;break}}else break}}};a._create=function(a,l,d){l=1-1/(d.length+1)*(1+l);switch(a.type){case "background":return new c.StyleLayer(0,a,l);case "fill":return new c.StyleLayer(1,a,l);case "line":return new c.StyleLayer(2,a,l);case "symbol":return new c.StyleLayer(3,a,l);case "raster":throw Error("Unsupported vector tile raster layer");
case "circle":throw Error("Unsupported vector tile circle layer");}throw Error("Unknown vector tile layer");};return a}()})},"*noref":1}});
define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),function(q,a,c,z,n,l){return function(){function a(){this._tiles={};this._spriteInfo={};this._glyphInfo={}}a.prototype.reset=function(){var a=new c;this._spriteInfo={};this._glyphInfo={};var e=this._tiles,d;for(d in e){var l=e[d];l&&l.setObsolete()}this._tiles={};a.resolve();return a.promise};a.prototype.getLayers=function(){return this._layers};a.prototype.setLayers=function(a){this._layers=
(new l(a)).layers;return z.resolve({data:""})};a.prototype.getTile=function(a,c){var b=this,e=a.key,d=new n(a.key,a.refKey,this,a.rotation),k=a.cacheTile;return c.invoke("fetchTileData",a.refKey).then(function(a){return d.setDataAndParse(a.protobuff,c).then(function(a){k&&6!==d.status&&(b._tiles[e]=d);return a}).otherwise(function(a){d.setObsolete();return z.reject(a)})}).otherwise(function(a){d.setObsolete();b._tiles[d.tileKey]&&delete b._tiles[d.tileKey];return z.reject(a)}).always(function(a){return a})};
a.prototype.update=function(a){var b=this._tiles[a.key];return b?b.updateSymbols(a.rotation):z.reject()};a.prototype.destructTileData=function(a){this._tiles[a.key]&&delete this._tiles[a.key];return z.resolve()};a.prototype.fetchSprites=function(a,c){var b=[],d=this._spriteInfo;a.forEach(function(a){void 0===d[a]&&b.push(a)});return 0===b.length?z.resolve():c.invoke("getSprites",{sprites:b}).then(function(a){a=a.spriteItems;for(var b in a)d[b]=a[b]})};a.prototype.getSpriteItems=function(){return this._spriteInfo};
a.prototype.fetchGlyphs=function(a,c,d,l){var b=[],e=this._glyphInfo[c];e?d.forEach(function(a){e[a]||b.push(a)}):(e=this._glyphInfo[c]=[],d.forEach(function(a){return b.push(a)}));return 0===b.length?z.resolve():l.invoke("getGlyphs",{tileID:a,font:c,codePoints:b}).then(function(a){a=a.glyphItems;for(var b in a)e[b]=a[b]})};a.prototype.getGlyphItems=function(a){return this._glyphInfo[a]};return a}()});