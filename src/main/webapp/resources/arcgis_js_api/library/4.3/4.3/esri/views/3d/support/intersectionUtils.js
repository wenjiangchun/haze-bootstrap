// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define(["../lib/glMatrix"],function(k){function p(d,b,a,c){c.clip[0]=0;c.clip[1]=a?c.len:Number.MAX_VALUE;for(a=0;a<d.length;a++){var e;var g=d[a],h=b;e=c;var l=f.dot(g,e.dir),h=-f.dot(h,g)-g[3];0>h&&0<=l?e=!1:-1E-6<l&&1E-6>l?e=!0:!(0>h||0>l)||0>h&&0>l?(h/=l,0<l?h<e.clip[1]&&(e.clip[1]=h):h>e.clip[0]&&(e.clip[0]=h),e=e.clip[0]<=e.clip[1]):e=!0;if(!e)return!1}return!0}function q(d,b,a,c){d?(a&&c&&(g.len=f.dist(b,a)),f.set(d,g.dir)):c?(g.len=f.dist(b,a),f.scale(f.subtract(a,b,g.dir),1/g.len)):f.normalize(f.subtract(a,
b,g.dir));return g}var f=k.vec3d;k=k.vec2d;var g={dir:f.create(),len:0,clip:k.create()},r={planeSphere:function(d,b,a){return d[0]*b[0]+d[1]*b[1]+d[2]*b[2]+d[3]<a},frustumSphere:function(d,b,a){for(var c=0;6>c;c++)if(!r.planeSphere(d[c],b,a))return!1;return!0},frustumRay:function(d,b,a,c){a=q(c,b,a,!1);return p(d,b,null,a)},frustumPoint:function(d,b){for(var a=0;6>a;a++){var c=d[a];if(0>-f.dot(b,c)-c[3])return!1}return!0},conservativeFrustumConvexBuffer:function(d,b,a,c,e){e=e||0;for(var f=0;6>f;f++){for(var h=
(e+f)%6,g=!1,k=0;k<c;k++){var m=d[h],n=a+3*k;if(0<=-m[0]*b[n]-m[1]*b[n+1]-m[2]*b[n+2]-m[3]){g=!0;break}}if(!g)return h}return-1},frustumLineSegment:function(d,b,a,c){c=q(c,b,a,!0);return p(d,b,a,c)}};return r});