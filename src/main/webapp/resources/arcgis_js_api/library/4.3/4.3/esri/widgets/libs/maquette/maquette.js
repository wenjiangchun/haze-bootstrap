// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
(function(q,A){"function"===typeof define&&define.amd?define(["exports"],A):"object"===typeof exports&&"string"!==typeof exports.nodeName?A(exports):A(q.maquette={})})(this,function(q){var A=[],y=function(b,a){var c={};Object.keys(b).forEach(function(a){c[a]=b[a]});a&&Object.keys(a).forEach(function(b){c[b]=a[b]});return c},D=function(b,a){return b.vnodeSelector!==a.vnodeSelector?!1:b.properties&&a.properties?b.properties.key!==a.properties.key?!1:b.properties.bind===a.properties.bind:!b.properties&&
!a.properties},F=function(b){return{vnodeSelector:"",properties:void 0,children:void 0,text:b.toString(),domNode:null}},G=function(b,a,c){for(var d=0,f=a.length;d<f;d++){var e=a[d];Array.isArray(e)?G(b,e,c):null!==e&&void 0!==e&&(e.hasOwnProperty("vnodeSelector")||(e=F(e)),c.push(e))}},H=function(){throw Error("Provide a transitions object to the projectionOptions to do animations");},x={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(b,a,c){b.style[a]=c},transitions:{enter:H,
exit:H}},I=function(b){if("string"!==typeof b)throw Error("Style values must be strings");},L=function(b,a,c){if(a)for(var d=c.eventHandlerInterceptor,f=Object.keys(a),e=f.length,h=0;h<e;h++){var g=f[h],k=a[g];if("className"===g)throw Error('Property "className" is not supported, use "class".');if("class"===g)k.split(/\s+/).forEach(function(a){return b.classList.add(a)});else if("classes"===g)for(var r=Object.keys(k),u=r.length,g=0;g<u;g++){var m=r[g];k[m]&&b.classList.add(m)}else if("styles"===g)for(r=
Object.keys(k),u=r.length,g=0;g<u;g++){var m=r[g],n=k[m];n&&(I(n),c.styleApplyer(b,m,n))}else"key"!==g&&null!==k&&void 0!==k&&(r=typeof k,"function"===r?0===g.lastIndexOf("on",0)&&(d&&(k=d(g,k,b,a)),"oninput"===g&&function(){var a=k;k=function(b){b.target["oninput-value"]=b.target.value;a.apply(this,[b])}}(),b[g]=k):"string"===r&&"value"!==g&&"innerHTML"!==g?"http://www.w3.org/2000/svg"===c.namespace&&"href"===g?b.setAttributeNS("http://www.w3.org/1999/xlink",g,k):b.setAttribute(g,k):b[g]=k)}},J=
function(b,a){var c=b.domNode;if(b.properties){var d=b.properties.exitAnimation;if(d){c.style.pointerEvents="none";var f=function(){c.parentNode&&c.parentNode.removeChild(c)};"function"===typeof d?d(c,f,b.properties):a.exit(b.domNode,b.properties,d,f);return}}c.parentNode&&c.parentNode.removeChild(c)},E=function(b,a,c,d){var f=b[a];if(""!==f.vnodeSelector){var e=f.properties;if(!(e&&(void 0===e.key?e.bind:e.key)))for(e=0;e<b.length;e++)if(e!==a&&D(b[e],f)){if("added"===d)throw Error(c.vnodeSelector+
" had a "+f.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable.");throw Error(c.vnodeSelector+" had a "+f.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.");}}},z,C,K=function(b,a,c){var d=a.children;if(d)for(var f=0;f<d.length;f++)z(d[f],b,void 0,c);a.text&&(b.textContent=a.text);L(b,a.properties,c);a.properties&&a.properties.afterCreate&&a.properties.afterCreate.apply(a.properties.bind||
a.properties,[b,c,a.vnodeSelector,a.properties,a.children])};z=function(b,a,c,d){var f,e,h,g=0,k=b.vnodeSelector;if(""===k)f=b.domNode=document.createTextNode(b.text),void 0!==c?a.insertBefore(f,c):a.appendChild(f);else{for(e=0;e<=k.length;++e)if(h=k.charAt(e),e===k.length||"."===h||"#"===h)h=k.charAt(g-1),g=k.slice(g,e),"."===h?f.classList.add(g):"#"===h?f.id=g:("svg"===g&&(d=y(d,{namespace:"http://www.w3.org/2000/svg"})),void 0!==d.namespace?f=b.domNode=document.createElementNS(d.namespace,g):(f=
b.domNode=document.createElement(g),"input"===g&&b.properties&&void 0!==b.properties.type&&f.setAttribute("type",b.properties.type)),void 0!==c?a.insertBefore(f,c):a.appendChild(f)),g=e+1;K(f,b,d)}};C=function(b,a,c){var d=b.domNode;if(b===a)return!1;var f=!1;if(""===a.vnodeSelector){if(a.text!==b.text)return b=document.createTextNode(a.text),d.parentNode.replaceChild(b,d),a.domNode=b,!0}else{0===a.vnodeSelector.lastIndexOf("svg",0)&&(c=y(c,{namespace:"http://www.w3.org/2000/svg"}));b.text!==a.text&&
(f=!0,void 0===a.text?d.removeChild(d.firstChild):d.textContent=a.text);var e;e=b.children;var h=a.children,g=c;if(e===h)e=!1;else{e=e||A;for(var h=h||A,k=e.length,r=h.length,u=g.transitions,m=0,n=0,t=!1;n<r;){var p=m<k?e[m]:void 0,l=h[n];if(void 0!==p&&D(p,l))t=C(p,l,g)||t,m++;else{b:{var p=e,v=l;if(""!==v.vnodeSelector)for(var w=m+1;w<p.length;w++)if(D(p[w],v)){p=w;break b}p=-1}if(0<=p){for(;m<p;m++)J(e[m],u),E(e,m,a,"removed");t=C(e[p],l,g)||t;m=p+1}else z(l,d,m<k?e[m].domNode:void 0,g),p=u,l.properties&&
(v=l.properties.enterAnimation)&&("function"===typeof v?v(l.domNode,l.properties):p.enter(l.domNode,l.properties,v)),E(h,n,a,"added")}n++}if(k>m)for(;m<k;m++)J(e[m],u),E(e,m,a,"removed");e=t}f=e||f;e=b.properties;h=a.properties;g=c;if(h){t=!1;k=Object.keys(h);r=k.length;for(u=0;u<r;u++)if(l=k[u],n=h[l],m=e[l],"class"===l){if(m!==n)throw Error('"class" property may not be updated. Use the "classes" property for conditional css classes.');}else if("classes"===l)for(p=d.classList,v=Object.keys(n),w=
v.length,l=0;l<w;l++){var q=v[l],x=!!n[q];x!==!!m[q]&&(t=!0,x?p.add(q):p.remove(q))}else if("styles"===l)for(p=Object.keys(n),v=p.length,l=0;l<v;l++)w=p[l],q=n[w],q!==m[w]&&(t=!0,q?(I(q),g.styleApplyer(d,w,q)):g.styleApplyer(d,w,""));else if(n||"string"!==typeof m||(n=""),"value"===l)d[l]!==n&&d["oninput-value"]!==n&&(d[l]=n,d["oninput-value"]=void 0),n!==m&&(t=!0);else if(n!==m){t=typeof n;if("function"===t)throw Error("Functions may not be updated on subsequent renders (property: "+l+"). Hint: declare event handler functions outside the render() function.");
"string"===t&&"innerHTML"!==l?"http://www.w3.org/2000/svg"===g.namespace&&"href"===l?d.setAttributeNS("http://www.w3.org/1999/xlink",l,n):d.setAttribute(l,n):d[l]!==n&&(d[l]=n);t=!0}e=t}else e=void 0;f=e||f;a.properties&&a.properties.afterUpdate&&a.properties.afterUpdate.apply(a.properties.bind||a.properties,[d,c,a.vnodeSelector,a.properties,a.children])}f&&a.properties&&a.properties.updateAnimation&&a.properties.updateAnimation(d,a.properties,b.properties);a.domNode=b.domNode;return!1};var B=function(b,
a){return{update:function(c){if(b.vnodeSelector!==c.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");C(b,c,a);b=c},domNode:b.domNode}};q.h=function(b){var a=arguments[1];if("string"!==typeof b)throw Error();var c=1;!a||a.hasOwnProperty("vnodeSelector")||Array.isArray(a)||"object"!==typeof a?a=void 0:c=2;var d=void 0,f=void 0,e=arguments.length;if(e===c+1){var h=arguments[c];"string"===typeof h?d=
h:void 0!==h&&null!==h&&1===h.length&&"string"===typeof h[0]&&(d=h[0])}if(void 0===d)for(f=[];c<e;c++)h=arguments[c],null!==h&&void 0!==h&&(Array.isArray(h)?G(b,h,f):h.hasOwnProperty("vnodeSelector")?f.push(h):f.push(F(h)));return{vnodeSelector:b,properties:a,children:f,text:""===d?void 0:d,domNode:null}};q.dom={create:function(b,a){a=y(x,a);z(b,document.createElement("div"),void 0,a);return B(b,a)},append:function(b,a,c){c=y(x,c);z(a,b,void 0,c);return B(a,c)},insertBefore:function(b,a,c){c=y(x,
c);z(a,b.parentNode,b,c);return B(a,c)},merge:function(b,a,c){c=y(x,c);a.domNode=b;K(b,a,c);return B(a,c)}};q.createCache=function(){var b=void 0,a=void 0;return{invalidate:function(){b=a=void 0},result:function(c,d){if(b)for(var f=0;f<c.length;f++)b[f]!==c[f]&&(a=void 0);a||(a=d(),b=c);return a}}};q.createMapping=function(b,a,c){var d=[],f=[];return{results:f,map:function(e){for(var h=e.map(b),g=f.slice(),k=0,r=0;r<e.length;r++){var u=e[r],m=h[r];if(m===d[k])f[r]=g[k],c(u,g[k],r),k++;else{for(var n=
!1,q=1;q<d.length+1;q++){var p=(k+q)%d.length;if(d[p]===m){f[r]=g[p];c(e[r],g[p],r);k=p+1;n=!0;break}}n||(f[r]=a(u,r))}}f.length=e.length;d=h}}};q.createProjector=function(b){var a,c=y(x,b);c.eventHandlerInterceptor=function(b,c,e,d){return function(){a.scheduleRender();return c.apply(d.bind||this,arguments)}};var d=!0,f,e=!1,h=[],g=[],k=function(){f=void 0;if(d){d=!1;for(var a=0;a<h.length;a++){var b=g[a]();h[a].update(b)}d=!0}};return a={renderNow:k,scheduleRender:function(){f||e||(f=requestAnimationFrame(k))},
stop:function(){f&&(cancelAnimationFrame(f),f=void 0);e=!0},resume:function(){e=!1;d=!0;a.scheduleRender()},append:function(a,b){h.push(q.dom.append(a,b(),c));g.push(b)},insertBefore:function(a,b){h.push(q.dom.insertBefore(a,b(),c));g.push(b)},merge:function(a,b){h.push(q.dom.merge(a,b(),c));g.push(b)},replace:function(a,b){var d=b();z(d,a.parentNode,a,c);a.parentNode.removeChild(a);h.push(B(d,c));g.push(b)},detach:function(a){for(var b=0;b<g.length;b++)if(g[b]===a)return g.splice(b,1),h.splice(b,
1)[0];throw Error("renderMaquetteFunction was not found");}}}});