// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../../core/tsSupport/extendsHelper","../../../lib/glMatrix","./MomentumNavigationBase"],function(f,g,h,b,k){f=function(f){function c(a,d){a=f.call(this,a,d)||this;a._scaleState={plane:{distance:0,normal:b.vec3d.create()},center:b.vec3d.create()};a._rotationState={center:b.vec3d.create(),axis:b.vec3d.create()};a._panState={direction:b.vec3d.create()};a.pan.enabled=!1;return a}h(c,f);c.prototype.addPanValue=function(a,d,e){this.pan.estimator.add(a[0],a[1],d);b.vec3d.set(e,
this._panState.direction);b.vec3d.normalize(this._panState.direction)};c.prototype.addRotationValue=function(a,d,e){this.rotation.estimator.add(e);b.vec3d.set(a,this._rotationState.center);b.vec3d.set(d,this._rotationState.axis)};c.prototype.addScaleValue=function(a,d,e){this.zoom.estimator.add(a);this._scaleState.plane.distance=d.distance;b.vec3d.set(d.normal,this._scaleState.plane.normal);b.vec3d.set(e,this._scaleState.center)};c.prototype.onUpdate=function(a,d,e){if(this.zoom.momentum){var c=this.zoom.momentum.valueDelta(a,
d);this.helper.planar.applyZoom(this._scaleState.plane,this.view,e,this._scaleState.center,c)}this.pan.momentum&&(b.vec3d.normalize(this._panState.direction),c=b.vec3d.dist(this.pan.momentum.dataOldest,this.pan.momentum.dataNewest),c/=this.pan.momentum.dataTimeDelta,c*=this.pan.momentum.velocityFactor(a),b.vec3d.scale(this._panState.direction,c*d),b.vec3d.subtract(e.eye,this._panState.direction),b.vec3d.subtract(e.center,this._panState.direction),e.markViewDirty());this.rotation.momentum&&(a=this.rotation.momentum.valueDelta(a,
d),this.helper.applyRotation(e,this._rotationState.center,this._rotationState.axis,a))};return c}(k.MomentumNavigationBase);g.MomentumNavigationLocal=f});