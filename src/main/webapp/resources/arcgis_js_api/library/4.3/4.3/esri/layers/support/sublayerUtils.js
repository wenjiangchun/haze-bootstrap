// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define(["require","exports","./layerSourceUtils"],function(l,e,h){function k(b,c){function f(d){var b=d.sublayers;a.unshift(d.id);b&&b.forEach(f)}if(!b||!b.length)return!0;var a=[];c.forEach(f);if(b.length>a.length)return!1;c=0;for(var d=a.length,g=0;g<b.length;g++){for(var e=b[g].id;c<d&&a[c]!==e;)c++;if(c>=d)return!1}return!0}e.isExportDynamic=function(b,c,f){return b.some(function(a){var d=a.source;return!(!d||d.type===h.MAPLAYER&&d.mapLayerId===a.id&&(!d.gdbVersion||d.gdbVersion===f.gdbVersion))||
null!=a.renderer||null!=a.labelingInfo||a.hasOwnProperty("opacity")&&null!=a.opacity||a.hasOwnProperty("labelsVisible")&&null!=a.labelsVisible})?!0:!k(b,c)};e.sameStructureAsService=function(b,c){return c.flatten(function(b){return(b=b.sublayers)&&b.toArray().reverse()}).toArray().reverse().every(function(c,a){return(a=b[a])&&c.id===a.id&&(null==c.sublayers&&null==a.sublayers||null!=c.sublayers&&null!=a.sublayers&&c.sublayers.map(function(a){return a.id}).join(",")===a.sublayers.map(function(a){return a.id}).join(","))})}});