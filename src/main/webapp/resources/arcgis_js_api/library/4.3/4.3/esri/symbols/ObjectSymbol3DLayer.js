// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/promiseUtils ../core/Error ./Symbol3DLayer ./support/Symbol3DMaterial ./support/Symbol3DResource ../views/3d/support/aaBoundingBox ../views/3d/layers/graphics/Graphics3DObjectSymbolLayer ../views/3d/layers/graphics/objectResourceUtils ../core/accessorSupport/decorators".split(" "),function(b,t,k,d,f,l,m,n,p,q,r,h,a){b=g=function(b){function a(c){c=b.call(this)||this;c.material=null;c.resource=null;
c.type="Object";c.width=void 0;c.height=void 0;c.depth=void 0;c.anchor=void 0;c.heading=void 0;return c}k(a,b);a.prototype.computeResourceSize=function(){return this._fetchBoundingBox().then(function(c){return q.size(c)})};a.prototype.computeSize=function(){var c=this;return this.computeResourceSize().then(function(a){return c.computeSizeWithResourceSize(a)})};a.prototype.computeSizeWithResourceSize=function(c){if(null==this.width&&null==this.height&&null==this.depth){var a=this._isPrimitive()?10:
1;return[a*c[0],a*c[1],a*c[2]]}for(var a=[this.width,this.depth,this.height],b,e=0;3>e;e++){var d=a[e];if(null!=d){b=d/c[e];break}}for(e=0;3>e;e++)null==a[e]&&(a[e]=c[e]*b);return a};a.prototype.clone=function(){return new g({heading:this.heading,anchor:this.anchor,depth:this.depth,enabled:this.enabled,height:this.height,material:this.material&&this.material.clone(),resource:this.resource&&this.resource.clone(),width:this.width})};a.prototype._fetchBoundingBox=function(){var a=this;if(this._isPrimitive()){var b=
r.PRIMITIVE_BOUNDING_BOX[this.resource.primitive];return b?f.resolve(b):f.reject(new l("symbol:invalid-resource","The symbol does not have a valid resource"))}var d=this.resource.href;return d===this._cachedResourceUrl?f.resolve(this._cachedResourceBoundingBox):h.fetch(d).then(function(b){a._cachedResourceBoundingBox=h.computeBoundingBox(b);a._cachedResourceUrl=d;return a._cachedResourceBoundingBox})};a.prototype._isPrimitive=function(){return!this.resource||"string"!==typeof this.resource.href};
return a}(a.declared(m));d([a.property({type:n.default})],b.prototype,"material",void 0);d([a.property({type:p.default,json:{write:!0}})],b.prototype,"resource",void 0);d([a.property()],b.prototype,"type",void 0);d([a.property({json:{write:!0}})],b.prototype,"width",void 0);d([a.property({json:{write:!0}})],b.prototype,"height",void 0);d([a.property({json:{write:!0}})],b.prototype,"depth",void 0);d([a.property({json:{write:!0}})],b.prototype,"anchor",void 0);d([a.property({json:{write:!0}})],b.prototype,
"heading",void 0);b=g=d([a.subclass("esri.symbols.ObjectSymbol3DLayer")],b);var g;return b});