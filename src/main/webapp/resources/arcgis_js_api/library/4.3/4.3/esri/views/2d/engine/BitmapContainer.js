// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Container ../ViewState ../viewStateUtils ../viewpointUtils".split(" "),function(q,r,f,t,l,m,n,p){var h=[0,0];return function(d){function b(){var a=null!==d&&d.apply(this,arguments)||this;a._offScreenCanvas=null;a._offScreenRenderParameters={budget:null,clip:[],context:null,devicePixelRatio:1,state:new m({viewpoint:p.create()}),stationary:!0,rotated:!0};return a}f(b,d);b.prototype.attach=function(a){this._offScreenCanvas||
(this._offScreenCanvas=document.createElement("canvas"),this._offScreenRenderParameters.context=this._offScreenCanvas.getContext("2d"));return d.prototype.attach.call(this,a)};b.prototype.detach=function(a){d.prototype.detach.call(this,a);this._offScreenCanvas=null;this._offScreenRenderParameters.context=null};b.prototype.render=function(a){this.visible&&d.prototype.render.call(this,a)};b.prototype.prepareChildrenRenderParameters=function(a){var k=a.state,c=this._offScreenRenderParameters,b=this._offScreenCanvas,
d=c.state,f=c.context,e=n.getOuterSize(h,k),g=e[0],e=e[1];d.viewpoint=k.viewpoint.clone();d.viewpoint.rotation=0;d.size=h;b.width!==g||b.height!==e?(b.width=g,b.height=e):f.clearRect(0,0,g,e);c.budget=a.budget;c.devicePixelRatio=a.devicePixelRatio;c.clip.length=0;return c};b.prototype.detachChild=function(a,b){a.detach()};b.prototype.attachChild=function(a,b){return a.attach(b)};b.prototype.renderChild=function(a,b){a.render(b)};b.prototype.beforeRenderChildren=function(a,b){this.sortChildren(function(a,
b){return b.resolution-a.resolution})};b.prototype.afterRenderChildren=function(a,b){var c=a.context;a=a.state;var d=b.context;b=b.state;0===a.rotation?c.drawImage(d.canvas,0,0):(c.save(),c.translate(.5*a.width,.5*a.height),c.rotate(a.rotation*Math.PI/180),c.translate(.5*-a.width,.5*-a.height),c.drawImage(d.canvas,.5*(a.width-b.width),.5*(a.height-b.height)),c.restore())};return b}(l)});