// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../request ../core/kebabDictionary ../core/promiseUtils ../core/screenUtils ../core/urlUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/Symbol3DOutline ./support/Symbol3DMaterial ./support/Symbol3DResource ../views/3d/layers/graphics/Graphics3DIconSymbolLayer".split(" "),function(f,x,l,d,n,p,q,r,g,a,e,t,u,v,w){var m=p({topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right"});
f=h=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);c.prototype.readHref=function(b,a,c){return b?g.read(b,c):a.dataURI};c.prototype.writeHref=function(b,a,c,d){b&&(g.isDataProtocol(b)?a.dataURI=b:a.href=g.write(b,d))};c.prototype.clone=function(){return new h({href:this.href,primitive:this.primitive})};return c}(a.declared(v.default));d([a.property({json:{write:!0,read:{source:["href","dataURI"]}}})],f.prototype,"href",void 0);d([a.reader("href")],f.prototype,"readHref",
null);d([a.writer("href")],f.prototype,"writeHref",null);f=h=d([a.subclass("esri.symbols.support.IconSymbol3DLayerResource")],f);e=k=function(a){function c(b){b=a.call(this)||this;b.material=null;b.resource=null;b.type="Icon";b.size=void 0;b.anchor=void 0;b.outline=void 0;return b}l(c,a);c.prototype.readAnchor=function(b){return m.fromJSON(b)};c.prototype.writeAnchor=function(b,a){a.anchor=m.toJSON(b)};c.prototype.computeResourceSize=function(){if(this.resource.href)return this._fetchImage().then(function(b){return[b.width,
b.height]});if(this.resource.primitive)return q.resolve(w.PRIMITIVE_SIZE)};c.prototype.computeSize=function(){var b=this;return this.computeResourceSize().then(function(a){if(null==b.size)return a;a=a[0]/a[1];return 1<a?[b.size,b.size/a]:[b.size*a,b.size]})};c.prototype.clone=function(){return new k({anchor:this.anchor,enabled:this.enabled,material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),size:this.size})};c.prototype._fetchImage=
function(){return n(this.resource.href,{responseType:"image"}).then(function(a){return a.data})};return c}(a.declared(e));d([a.property({type:u.default})],e.prototype,"material",void 0);d([a.property({type:f,json:{write:!0}})],e.prototype,"resource",void 0);d([a.property()],e.prototype,"type",void 0);d([a.property({json:{write:!0}}),a.cast(r.toPt)],e.prototype,"size",void 0);d([a.property({type:String})],e.prototype,"anchor",void 0);d([a.reader("anchor")],e.prototype,"readAnchor",null);d([a.writer("anchor")],
e.prototype,"writeAnchor",null);d([a.property({type:t.default,json:{write:!0}})],e.prototype,"outline",void 0);e=k=d([a.subclass("esri.symbols.IconSymbol3DLayer")],e);var h,k;return e});