// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define("require exports dojo/_base/lang ../../core/Accessor ../../core/Collection ../../core/accessorSupport/utils".split(" "),function(A,v,g,w,h,x){function r(a){return a instanceof h?Object.keys(a.items):a instanceof w?x.getProperties(a).keys():a?Object.keys(a):[]}function p(a,b){return a instanceof h?a.items[b]:a[b]}function y(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function k(a){return a?a.declaredClass:null}function t(a,b){var d=a.diff;if(d&&g.isFunction(d))return d(a,
b);var l=r(a),m=r(b);if(0!==l.length||0!==m.length){if(!l.length||!m.length||y(a,b))return{type:"complete",oldValue:a,newValue:b};var n=m.filter(function(a){return-1===l.indexOf(a)}),c=l.filter(function(a){return-1===m.indexOf(a)}),n=l.filter(function(c){return-1<m.indexOf(c)&&p(a,c)!==p(b,c)}).concat(n,c).sort();if((c=k(a))&&-1<z.indexOf(c)&&n.length)return{type:"complete",oldValue:a,newValue:b};var q,h;for(h in n){var c=n[h],e=p(a,c),f=p(b,c),u=void 0;g.isFunction(e)||g.isFunction(f)||e===f||!(u=
d&&d[c]&&g.isFunction(d[c])?d[c](e,f):"object"===typeof e&&"object"===typeof f&&k(e)===k(f)?t(e,f):{type:"complete",oldValue:e,newValue:f})||(q=q||{type:"partial",diff:{}},q.diff[c]=u)}return q}}var z=["esri.Color","esri.portal.Portal"];v.diff=function(a,b){if(!g.isFunction(a)&&!g.isFunction(b)&&(a||b))return!a||!b||"object"===typeof a&&"object"===typeof a&&k(a)!==k(b)?{type:"complete",oldValue:a,newValue:b}:t(a,b)}});