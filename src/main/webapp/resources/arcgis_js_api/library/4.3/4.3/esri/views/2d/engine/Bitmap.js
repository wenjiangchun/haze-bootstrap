// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(m,n,h,k){var l=[0,0];return function(g){function b(c){var a=g.call(this)||this;a.source=c;a.coords=[0,0];a.resolution=0;a.rotation=0;a.width=0;a.height=0;a.source.onReady(function(){return a.requestRender()});return a}h(b,g);b.prototype.attach=function(c){return!0};b.prototype.detach=function(){};b.prototype.render=function(c){this.source&&this.source.ready&&null!=c.context&&this.renderCanvas2D(c)};b.prototype.renderCanvas2D=
function(c){var a=this.source,d=c.context,e=c.state;c=e.rotation;var b=this.resolution/e.resolution;if(!(.05>b)){d.save();var f=e.toScreen(l,this.coords),e=f[0],f=f[1];1===b?d.translate(Math.round(e),Math.round(f)):(d.translate(e,f),d.scale(b,b));c&&d.rotate(c*Math.PI/180);a.rotation&&(d.translate(.5*a.width,.5*a.height),d.rotate(-a.rotation*Math.PI/180),d.translate(.5*-a.width,.5*-a.height));c=(this.coords[0]-a.coords[0])/a.resolution;b=-(this.coords[1]-a.coords[1])/a.resolution;e=this.resolution/
a.resolution*a.width;f=this.resolution/a.resolution*a.height;d.clearRect(0,0,this.width,this.height);a.draw(d,Math.round(c),Math.round(b),Math.round(e),Math.round(f),0,0,this.width,this.height);d.restore()}};return b}(k)});