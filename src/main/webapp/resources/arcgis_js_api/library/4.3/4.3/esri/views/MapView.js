// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../core/accessorSupport/decorators ../core/HandleRegistry ../core/watchUtils ../core/promiseUtils ../Viewpoint ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/SpatialReference ./View ./ViewAnimation ./2d/FrameTask ./2d/PaddedViewState ./2d/MapViewConstraints ./2d/AnimationManager ./2d/viewpointUtils".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q,t,r,w,n,v,x,C,y){l=function(e){function h(a){var b=e.call(this,a)||this;b._frameTask=new n(b);b._handles=new k;b.interacting=!1;b.resizeAlign="center";b.type="2d";b.constraints=new x;b.padding={top:0,right:0,bottom:0,left:0};b._frameTask=new n(b);b.watch("stationary",function(a){b._frameTask.stationary=a;b._frameTask.requestFrame()},!0);b.watch("state.viewpoint",function(a){b._flipStationary();b._frameTask.requestFrame()},!0);b._handles.add([b.on("resize",function(a){return b._resizeHandler(a)})]);
b.watch("ready",function(a){return b._readyWatcher(a)},!0);b.watch("animationManager.animation",function(a){b.animation||(b.animation=a)});a=b.notifyChange.bind(b,"tileInfo");d.on(b,"map.basemap.baseLayers","change",a,a,a);d.on(b,"map.layers","change",a,a,a);var c=function(){this._set("updating",this.layerViewManager.factory.working||this.allLayerViews.some(function(a){return!0===a.updating}))}.bind(b);b.allLayerViews.on("change",function(){c();b._handles.remove("layerViewsUpdating");b._handles.add(b.allLayerViews.map(function(a){return a.watch("updating",
c)}).toArray(),"layerViewsUpdating")});return b}g(h,e);Object.defineProperty(h.prototype,"animation",{set:function(a){var b=this,c=this._get("animation");c&&c.stop();!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),a.then(function(){return b.animation=null},function(){return b.animation=null},function(a){return b.state.viewpoint=a}))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=
this.content.center;return new b({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a)if(this.ready){var b=this.viewpoint;y.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired")},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"constraints",{set:function(a){var b=this,c=this._get("constraints");c&&(this._handles.remove("constraints"),c.view=null);this._set("constraints",a);a&&(this.ready&&(a.view=
this,this.state.viewpoint=a.constrain(this.content.viewpoint,null)),this._handles.add(a.on("update",function(){b.ready&&b.state&&(b.state.viewpoint=a.constrain(b.content.viewpoint,null))}),"constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"extent",{get:function(){return this.ready?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a)if(this.ready){var b=this.viewpoint;y.setExtent(b,b,a,this.size,{constraints:this.constraints});this.viewpoint=
b}else this._set("extent",a),this._set("center",null),this._set("scale",0),this.notifyChange("initialExtentRequired")},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"initialExtentRequired",{get:function(){var a=this.get("map.initialViewProperties.viewpoint"),b=this._get("extent"),c=this._get("center"),d=this._get("scale"),h=this._get("viewpoint"),e=this._get("zoom"),k=this.initialExtent;return a?!(!(c&&0<d)||k):k?!1:!(b||h||c&&(0<d||-1!==e))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){this.ready?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});h.prototype._readyGetter=function(){var a=this.get("map.basemap"),b=this.get("map.basemap.baseLayers.0"),c=this.get("map.layers.0"),d=!0;a&&a.load();b&&b.load();c&&c.load();a&&a.loaded?b&&b.loaded?d=!1:!b&&c&&c.loaded&&(d=!1):a||(c&&c.loaded?d=!1:c||(d=!1));return this.inherited(arguments)&&
!d};Object.defineProperty(h.prototype,"rotation",{get:function(){return this.ready?this.content.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.ready){var b=this.viewpoint;y.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"scale",{get:function(){return this.ready?this.content.scale:this._get("scale")},set:function(a){if(!isNaN(a))if(this.ready){var b=this.viewpoint;y.scaleTo(b,b,a);this.viewpoint=
b}else{this._set("scale",a);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"tileInfo",{get:function(){return this.get("map.basemap.baseLayers.0.tileInfo")||this.get("map.layers.0.tileInfo")},
enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"viewpoint",{get:function(){return this.ready?this.content.viewpoint.clone():this._get("viewpoint")},set:function(a){if(null!=a)if(this.ready){var b=y.create();y.copy(b,a);this.constraints.constrain(b,this.content.viewpoint);this.state.viewpoint=b;this._frameTask.requestFrame();this._set("viewpoint",b)}else this._set("viewpoint",a),this.notifyChange("initialExtentRequired")},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a&&(this.ready||(this.notifyChange("initialExtentRequired"),this._set("zoom",a)),this.constraints.effectiveLODs)){var b=this.viewpoint;y.scaleTo(b,b,this.constraints.zoomToScale(a));this.viewpoint=b;this._set("zoom",this.constraints.scaleToZoom(this.scale))}},enumerable:!0,configurable:!0});h.prototype.goTo=function(b,c){var d=this,h=this.content;c=a.mixin({animate:!0},c,{spatialReference:this.spatialReference||
null,size:h?h.size:this.size,currentViewpoint:h?h.viewpoint:this.viewpoint,constraints:this.constraints,snapToZoom:this.constraints.snapToZoom});return y.createAsync(b,c).then(function(a){if(c.animate){var b=null;if(!d.ready||!d.animationManager)return d.viewpoint=a,b=new w({target:a}),b.finish(),b;d.constraints.constrain(a,d.viewpoint);return b=d.animation=d.animationManager.animateTo(a,d.viewpoint,c)}d.viewpoint=a})};h.prototype.hitTest=function(a,b){return c.reject("Should be implemented by subclasses")};
h.prototype.toMap=function(a,c,d){if(!this.ready)return null;a&&null!=a.x&&(d=c,c=a.y,a=a.x);var h=[0,0];this.state.toMap(h,[a,c]);d=d||new b;d.x=h[0];d.y=h[1];d.spatialReference=this.spatialReference;return d};h.prototype.toScreen=function(a,b,c,d){if(!this.ready)return null;a&&null!=a.x&&(d=b,b=a.y,a=a.x);d=c||d||new p;a=[a,b];this.state.toScreen(a,a);d.x=a[0];d.y=a[1];return d};h.prototype.pixelSizeAt=function(a,b){if(!this.ready)return NaN;a&&null!=a.x&&(b=a.y,a=a.x);return this.content.pixelSizeAt([a,
b])};h.prototype.requestLayerViewUpdate=function(a){this.ready&&this._frameTask.requestLayerViewUpdate(a)};h.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")};h.prototype._resizeHandler=function(a){var b=this.state;if(b){var c=this.content.viewpoint,d=this.content.size.concat();b.size=[a.width,a.height];y.resize(c,c,d,this.content.size,this.resizeAlign);c=this.constraints.constrain(c,null);this.state.viewpoint=
c}};h.prototype._readyWatcher=function(a){a||this._frameTask.stop();this.constraints.view=this;a={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),padding:this._get("padding"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint")};var b=this.get("map.initialViewProperties.viewpoint"),b=y.create(!b||a.center||a.extent?a:{viewpoint:b},{spatialReference:this.spatialReference,size:this.size,constraints:this.constraints,extent:this.initialExtent});
this._set("animationManager",new C);this.state=new v({padding:a.padding,size:this.size,viewpoint:b});this.content=this.state.content;this._frameTask.start()};h.prototype._flipStationary=function(){var a=this;this._stationaryTimer&&clearTimeout(this._stationaryTimer);this._stationaryTimer=setTimeout(function(){a._stationaryTimer=null;a.notifyChange("stationary")},160);this.notifyChange("stationary")};return h}(e.declared(r));f([e.property()],l.prototype,"animation",null);f([e.property({readOnly:!0})],
l.prototype,"animationManager",void 0);f([e.property({value:null,type:b,dependsOn:["content.center"]})],l.prototype,"center",null);f([e.property({type:x})],l.prototype,"constraints",null);f([e.property()],l.prototype,"content",void 0);f([e.property({value:null,type:q,dependsOn:["content.extent"]})],l.prototype,"extent",null);f([e.property({readOnly:!0})],l.prototype,"interacting",void 0);f([e.property({type:q})],l.prototype,"initialExtent",void 0);f([e.property({dependsOn:["map.initialViewProperties.viewpoint"]})],
l.prototype,"initialExtentRequired",null);f([e.property({value:{top:0,right:0,bottom:0,left:0},cast:function(b){return a.mixin({top:0,right:0,bottom:0,left:0},b)}})],l.prototype,"padding",null);f([e.property()],l.prototype,"resizeAlign",void 0);f([e.property({value:0,type:Number,dependsOn:["content.rotation"]})],l.prototype,"rotation",null);f([e.property({type:Number,dependsOn:["content.scale"]})],l.prototype,"scale",null);f([e.property({type:t,dependsOn:["map.initialViewProperties.spatialReference"]})],
l.prototype,"spatialReference",void 0);f([e.property()],l.prototype,"state",void 0);f([e.property()],l.prototype,"stationary",null);f([e.property({readOnly:!0,dependsOn:["map.initialViewProperties.viewpoint","map.layers","map.basemap"]})],l.prototype,"tileInfo",null);f([e.property({readOnly:!0})],l.prototype,"type",void 0);f([e.property({value:null,type:h,dependsOn:["content.viewpoint"]})],l.prototype,"viewpoint",null);f([e.property({value:-1,dependsOn:["content.scale"]})],l.prototype,"zoom",null);
return l=f([e.subclass("esri.views.MapViewBase")],l)})},"esri/geometry/ScreenPoint":function(){define(["./Point"],function(l){return l.createSubclass({declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}})})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/Scheduler","./FrameBudget"],function(l,m,g,f){return function(){function a(a){var e=this;this.view=a;this._frameTaskHandle=null;this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._layerViewsState={};
this._budget=new f(this.budget);this._updateParameters={budget:this._budget,state:this.view.state,devicePixelRatio:window.devicePixelRatio,stationary:!0};this.budget=6;this.updateEnabled=this.stationary=!0;this.prepare=function(){e._updateParameters.state=e.view.state;e._updateParameters.stationary=e.view.stationary;e._budget.reset(e.budget)};this.update=function(){if(e.updateEnabled){for(var a=e._budget,c=e.view,h=c.allLayerViews.toArray().filter(function(a){return null==a.layerViews}),b=h.length,
k=c.state,q=0;q<h.length;q++)if(c=h[q],c.attached){var f=e._layerViewsState[c.uid];if(null==f||!e.stationary&&!c.moving)c.moving=!0,c.moveStart();f!==k.id&&c.viewChange();e.stationary&&c.moving&&(c.moving=!1,c.moveEnd());e._layerViewsState[c.uid]=k.id}k=e._layerViewsTrash;for(q=0;q<k.length;q++)c=k[q],c.attached&&(c.detach(),c.attached=!1);for(q=k.length=0;q<b;q++)c=h[q],c.attached||e._attachLayerView(c);h=e._layerViewsToUpdate;b=h.slice();c=e._updateParameters;for(e._layerViewsToUpdate.length=0;!a.done&&
0<b.length;)b.shift().processUpdate(c);0<b.length&&h.unshift.apply(h,b);0===h.length&&0===k.length&&e._frameTaskHandle.pause()}}}a.prototype.destroy=function(){this._allLayerViewsChangeHandle.remove();this._frameTaskHandle.remove()};a.prototype.start=function(){var a=this;this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(e){Array.prototype.push.apply(a._layerViewsTrash,e.removed);a.requestFrame()});this._frameTaskHandle=g.addFrameTask(this);this._frameTaskHandle.pause()};
a.prototype.stop=function(){this._allLayerViewsChangeHandle.remove();this._allLayerViewsChangeHandle=null;this._frameTaskHandle.pause()};a.prototype.requestLayerViewUpdate=function(a){this._layerViewsToUpdate.push(a);this.requestFrame()};a.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.isPaused()&&this._frameTaskHandle.resume()};a.prototype._attachLayerView=function(a){a.attached||(a.attached=!0,a.attach())};a.prototype._detachLayerView=function(a){a.attached&&(a.detach(),
a.attached=!1)};return a}()})},"esri/views/2d/FrameBudget":function(){define(["require","exports","../../core/now"],function(l,m,g){return function(){function f(a){void 0===a&&(a=Number.MAX_VALUE);this._budget=this._begin=0;this.enabled=!0;this.reset(a)}f.now=function(){return g()};Object.defineProperty(f.prototype,"done",{get:function(){return this.enabled&&this.elapsed>=this._budget},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"elapsed",{get:function(){return g()-this._begin},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"remaining",{get:function(){return Math.max(this._budget-this.elapsed,0)},enumerable:!0,configurable:!0});f.prototype.reset=function(a){void 0===a&&(a=Number.MAX_VALUE);this._begin=g();this._budget=this.enabled?a:Number.MAX_VALUE};return f}()})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./viewpointUtils ./ViewState ./math/vec2 ./math/mat2d ./math/common ../../core/Accessor".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b){var p=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}g(b,a);return b}(a.declared(b)),p=f([a.subclass("esri.views.2d.PaddedViewState.Padding")],p);l=function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.content=new k;b.padding=new p;b.size=d.fromValues(0,0);return b}g(b,a);Object.defineProperty(b.prototype,"clipRect",{get:function(){var a=this.worldScreenWidth;
if(!a)return null;var b=h.toRadian(this.rotation),e=this.width*Math.abs(Math.cos(b))+this.height*Math.abs(Math.sin(b));if(a>e)return null;var k=d.clone(this.screenCenter),p=c.fromTranslation(c.create(),k);c.rotate(p,p,b);d.negate(k,k);c.translate(p,p,k);d.transformMat2d(k,this.paddedScreenCenter,p);return{top:-Math.round(e),left:Math.round(k[0]-.5*a),right:Math.round(k[0]+.5*a),bottom:+Math.round(e)}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"padding",{set:function(a){this._set("padding",
a||new p);this._updateContent()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{set:function(a){this._set("size",a);this._updateContent()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"paddedScreenCenter",{get:function(){var a=this.content.size,b=this.padding,a=d.scale(d.create(),a,.5);a[0]+=b.left;a[1]+=b.top;return a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"viewpoint",{set:function(a){var b=a.clone();this.content.viewpoint=
a;e.addPadding(b,a,this._get("size"),this._get("padding"));this._set("viewpoint",e.addPadding(b.clone(),a,this._get("size"),this._get("padding")))},enumerable:!0,configurable:!0});b.prototype._updateContent=function(){var a=d.create(),b=this._get("size"),c=this._get("padding");if(b&&c){var h=this.content;d.set(a,c.left+c.right,c.top+c.bottom);d.subtract(a,b,a);h.size=a;if(a=h.viewpoint)this.viewpoint=a}};return b}(a.declared(k));f([a.shared({transform:{dependsOn:["padding"]}})],l.prototype,"properties",
void 0);f([a.property({dependsOn:["worldScreenWidth","rotation","paddedScreenCenter","screenCenter"],readOnly:!0})],l.prototype,"clipRect",null);f([a.property()],l.prototype,"content",void 0);f([a.property({type:p})],l.prototype,"padding",null);f([a.property()],l.prototype,"size",null);f([a.property({dependsOn:["size","padding"],readOnly:!0})],l.prototype,"paddedScreenCenter",null);f([a.property()],l.prototype,"viewpoint",null);return l=f([a.subclass("esri.views.2d.PaddedViewState")],l)})},"esri/views/2d/viewpointUtils":function(){define("require exports ./math/common ./math/mat2d ./math/vec2 ../../Viewpoint ../../core/promiseUtils ../../core/Error ../../geometry/SpatialReference ../../geometry/Geometry ../../geometry/Point ../../geometry/Extent ../../geometry/support/webMercatorUtils ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q,t,r,w){function n(b,c,d,h){return h&&d&&!h.equals(d)&&q.canProject(h,d)&&h.isWebMercator?(h.isWebMercator?(d=c[1],89.99999<d?d=89.99999:-89.99999>d&&(d=-89.99999),d=Math.sin(g.toRadian(d)),b=a.set(b,6378137*g.toRadian(c[0]),3189068.5*Math.log((1+d)/(1-d)))):(d=g.toDegree(c[0]/6378137),b=a.set(b,d-360*Math.floor((d+180)/360),g.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*c[1]/6378137))))),b):a.copy(b,c)}function v(a){return a.wkid?a:a.spatialReference||c.WGS84}function x(b,
c){return c.type?a.set(b,c.x,c.y):a.copy(b,c)}function C(a,b){return Math.max(a.width/b[0],a.height/b[1])*u(a.spatialReference)}function y(a,c,d){var e;if(!a)return null;if(Array.isArray(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1])return new b(a);if(a.reduce)return a.reduce(function(a,b){return y(b,c,a)},d);a instanceof h?e=a:a.geometry&&(e=a.geometry);if(!e)return null;a="point"===e.type?new p({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference}):e.extent;
if(!a)return null;e=q.canProject(a,c);if(!a.spatialReference.equals(c)&&e)a=q.project(a,c);else if(!e)return null;return d=d?d.union(a):a.clone()}function L(c,d){if(!c)return new e({targetGeometry:new b,scale:0,rotation:0});var k=d.spatialReference,p=d.size,q=d.currentViewpoint,f=d.constraints,g=null;"esri.Viewpoint"===c.declaredClass?g=c:c.viewpoint?g=c.viewpoint:c.target&&"esri.Viewpoint"===c.target.declaredClass&&(g=c.target);var t=null;if(g&&g.targetGeometry)t=g.targetGeometry;else if(c instanceof
h)t=c;else if(c||c&&(c.hasOwnProperty("center")||c.hasOwnProperty("extent")||c.hasOwnProperty("target")))t=y(c.center,k)||y(c.extent,k)||y(c.target,k)||y(c,k);!t&&q&&q.targetGeometry?t=q.targetGeometry:!t&&d.extent&&(t=d.extent);var l=v(t);k||(k=v(d.spatialReference||d.extent||t));if(!w.canProject(t,k)&&l&&!l.equals(k))return null;var r=x(a.create(),t.center?t.center:t),k=new b(n(r,r,l,k),k),l=null,l=g&&g.targetGeometry&&"point"===g.targetGeometry.type?g.scale:c.hasOwnProperty("scale")&&c.scale?c.scale:
c.hasOwnProperty("zoom")&&-1!==c.zoom&&f&&f.effectiveLODs?f.zoomToScale(c.zoom):Array.isArray(t)||"point"===t.type||"extent"===t.type&&0===t.width&&0===t.height?d.extent?C(d.extent,p):q.scale:C(t.extent,p);d=0;g?d=g.rotation:c.hasOwnProperty("rotation")?d=c.rotation:q&&(d=q.rotation);f&&(f.rotationEnabled||(d=0),f.snapToZoom&&(l=f.snapScale(l)),0!==f.effectiveMinScale&&(l=Math.min(f.effectiveMinScale,l)),0!==f.effectiveMaxScale&&(l=Math.max(f.effectiveMaxScale,l)));return new e({targetGeometry:k,
scale:l,rotation:d})}function F(a,b){var c=a.targetGeometry,d=b.targetGeometry;c.x=d.x;c.y=d.y;c.spatialReference=d.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function E(b,c,d){return d?a.set(b,.5*(c[0]-d.right+d.left),.5*(c[1]-d.bottom+d.top)):a.scale(b,c,.5)}function N(a,b,c){m.getTransform(a,b,c);return f.invert(a,a)}function H(b,c,d){var h=g.toRadian(c.rotation)||0;c=Math.abs(Math.cos(h));h=Math.abs(Math.sin(h));return a.set(b,Math.round(d[1]*h+d[0]*c),Math.round(d[1]*c+d[0]*
h))}function I(a){return a.scale*(1/(39.37*(t.getUnitValueForSR(a.targetGeometry.spatialReference)||A)*96))}function u(a){return 39.37*(t.getUnitValueForSR(a)||A)*96}function z(a){return a.isWrappable?(a=r.getInfo(a),a.valid[1]-a.valid[0]):0}function D(a,b){return Math.round(z(a)/b)}var A=6370997*Math.PI/180,B=180/Math.PI;m.create=L;m.copy=F;m.getAnchor=E;m.getExtent=function(){var b=a.create();return function(a,c,d){var h=c.targetGeometry;x(b,h);c=.5*I(c);a.xmin=b[0]-c*d[0];a.ymin=b[1]-c*d[1];a.xmax=
b[0]+c*d[0];a.ymax=b[1]+c*d[1];a.spatialReference=h.spatialReference;return a}}();m.setExtent=function(a,b,c,d,h){m.centerAt(a,b,c.center);a.scale=C(c,d);h&&h.constraints&&h.constraints.constrain(a);return a};m.getOuterExtent=function(){var b=a.create(),c=a.create();return function(a,d,h){x(b,d.targetGeometry);H(c,d,h);h=.5*I(d);a.set({xmin:b[0]-h*c[0],ymin:b[1]-h*c[1],xmax:b[0]+h*c[0],ymax:b[1]+h*c[1],spatialReference:d.targetGeometry.spatialReference});return a}}();m.getClippedExtent=function(){var b=
a.create(),c=a.create();return function(a,d,h){var e=I(d),k=d.targetGeometry.spatialReference,p=D(k,e);x(b,d.targetGeometry);H(c,d,h);k.isWrappable&&c[0]>p&&(c[0]=p);d=.5*e;a.set({xmin:b[0]-d*c[0],ymin:b[1]-d*c[1],xmax:b[0]+d*c[0],ymax:b[1]+d*c[1],spatialReference:k});return a}}();m.getOuterSize=H;m.getPaddingScreenTranslation=function(){var b=a.create();return function(c,d,h){return a.sub(c,a.scale(c,d,.5),E(b,d,h))}}();var G=function(){var b=f.create(),c=a.create();return function(d,h,e,k){var p=
I(h);h=g.toRadian(h.rotation)||0;a.set(c,p,p);f.fromScaling(b,c);f.rotate(b,b,h);f.translate(b,b,m.getPaddingScreenTranslation(c,e,k));f.translate(b,b,[0,k.top-k.bottom]);return a.set(d,b[4],b[5])}}();m.getResolution=I;m.getResolutionToScaleFactor=u;m.getMatrix=function(){var b=a.create(),c=a.create(),d=a.create();return function(h,e,k,p,n){a.negate(b,e);a.scale(c,k,.5);a.set(d,1/p,-1/p);f.identity(h);f.translate(h,h,c);n&&f.rotate(h,h,n);f.scale(h,h,d);f.translate(h,h,b);return h}}();m.getTransform=
function(){var b=a.create();return function(a,c,d){var h=I(c),e=g.toRadian(c.rotation)||0;x(b,c.targetGeometry);return m.getMatrix(a,b,d,h,e)}}();m.getTransformNoRotation=function(){var b=a.create();return function(a,c,d){var h=I(c);x(b,c.targetGeometry);return m.getMatrix(a,b,d,h,0)}}();m.getWorldWidth=z;m.getWorldScreenWidth=D;m.createAsync=function(a,b){if(a=L(a,b))return k.resolve(a);a=new d("viewpointUtils-createAsync:different-spatialReference","Target spatialReference cannot be projected and is different from out spatialReference");
return k.reject(a)};m.angleBetween=function(){var b=a.create(),c=a.create(),d=a.create();return function(h,e,k){a.subtract(b,h,e);a.normalize(b,b);a.subtract(c,h,k);a.normalize(c,c);a.cross(d,b,c);h=Math.acos(a.dot(b,c)/(a.length(b)*a.length(c)))*B;0>d[2]&&(h=-h);isNaN(h)&&(h=0);return h}}();m.addPadding=function(){var b=a.create();return function(a,c,d,h){var e=a.targetGeometry;F(a,c);G(b,c,d,h);e.x+=b[0];e.y+=b[1];return a}}();m.removePadding=function(){var b=a.create();return function(a,c,d,h){var e=
a.targetGeometry;F(a,c);G(b,c,d,h);e.x-=b[0];e.y-=b[1];return a}}();m.centerAt=function(){var b=a.create();return function(a,c,d){F(a,c);c=a.targetGeometry;var h=v(d),e=v(c);x(b,d);n(b,b,h,e);c.x=b[0];c.y=b[1];return a}}();m.pixelSizeAt=function(a,b,c){return I(b)};m.resize=function(){var b=a.create();return function(c,d,h,e,k){k||(k="center");a.sub(b,h,e);a.scale(b,b,.5);h=b[0];e=b[1];switch(k){case "center":a.set(b,0,0);break;case "left":a.set(b,-h,0);break;case "top":a.set(b,0,e);break;case "right":a.set(b,
h,0);break;case "bottom":a.set(b,0,-e);break;case "top-left":a.set(b,-h,e);break;case "bottom-left":a.set(b,-h,-e);break;case "top-right":a.set(b,h,e);break;case "bottom-right":a.set(b,h,-e)}m.translateBy(c,d,b);return c}}();m.rotateBy=function(a,b,c){F(a,b);a.rotation+=c;return a};m.rotateTo=function(a,b,c){F(a,b);a.rotation=c;return a};m.scaleBy=function(){var b=a.create();return function(c,d,h,e,k){F(c,d);0!==h&&(m.toMap(b,e,d,k),c.scale=d.scale/h,m.toScreen(b,b,c,k),m.translateBy(c,c,a.set(b,
b[0]-e[0],e[1]-b[1])));return c}}();m.scaleTo=function(a,b,c){F(a,b);a.scale=c;return a};m.scaleAndRotateBy=function(){var b=a.create();return function(c,d,h,e,k,p){F(c,d);0!==h&&(m.toMap(b,k,d,p),c.scale=d.scale/h,c.rotation+=e,m.toScreen(b,b,c,p),m.translateBy(c,c,a.set(b,b[0]-k[0],k[1]-b[1])));return c}}();m.toMap=function(){var b=f.create();return function(c,d,h,e){return a.transformMat2d(c,d,N(b,h,e))}}();m.toScreen=function(){var b=f.create();return function(c,d,h,e){return a.transformMat2d(c,
d,m.getTransform(b,h,e))}}();m.translateBy=function(){var b=a.create(),c=f.create();return function(d,h,e){F(d,h);var k=I(h),p=d.targetGeometry;f.fromRotation(c,g.toRadian(h.rotation)||0);f.scale(c,c,a.fromValues(k,k));a.transformMat2d(b,e,c);p.x+=b[0];p.y+=b[1];return d}}()})},"esri/views/2d/math/common":function(){define([],function(){if(!l)var l=1E-6;if(!m)var m="undefined"!==typeof Float32Array?Float32Array:Array;if(!g)var g=Math.random;var f={GLMAT_EPSILON:l,GLMAT_ARRAY_TYPE:m,GLMAT_RANDOM:g,
setMatrixArrayType:function(a){f.GLMAT_ARRAY_TYPE=a}},a=Math.PI/180,e=180/Math.PI;f.toRadian=function(e){return e*a};f.toDegree=function(a){return a*e};f.setMatrixArrayType(Array);return f})},"esri/views/2d/math/mat2d":function(){define(["./common"],function(l){var m=l.GLMAT_ARRAY_TYPE;l={create:function(){var g=new m(6);g[0]=1;g[1]=0;g[2]=0;g[3]=1;g[4]=0;g[5]=0;return g},clone:function(g){var f=new m(6);f[0]=g[0];f[1]=g[1];f[2]=g[2];f[3]=g[3];f[4]=g[4];f[5]=g[5];return f},copy:function(g,f){g[0]=
f[0];g[1]=f[1];g[2]=f[2];g[3]=f[3];g[4]=f[4];g[5]=f[5];return g},identity:function(g){g[0]=1;g[1]=0;g[2]=0;g[3]=1;g[4]=0;g[5]=0;return g},invert:function(g,f){var a=f[0],e=f[1],k=f[2],d=f[3],c=f[4];f=f[5];var h=a*d-e*k;if(!h)return null;h=1/h;g[0]=d*h;g[1]=-e*h;g[2]=-k*h;g[3]=a*h;g[4]=(k*f-d*c)*h;g[5]=(e*c-a*f)*h;return g},determinant:function(g){return g[0]*g[3]-g[1]*g[2]},multiply:function(g,f,a){var e=f[0],k=f[1],d=f[2],c=f[3],h=f[4];f=f[5];var b=a[0],p=a[1],q=a[2],t=a[3],l=a[4];a=a[5];g[0]=e*
b+d*p;g[1]=k*b+c*p;g[2]=e*q+d*t;g[3]=k*q+c*t;g[4]=e*l+d*a+h;g[5]=k*l+c*a+f;return g}};l.mul=l.multiply;l.rotate=function(g,f,a){var e=f[0],k=f[1],d=f[2],c=f[3],h=f[4];f=f[5];var b=Math.sin(a);a=Math.cos(a);g[0]=e*a+d*b;g[1]=k*a+c*b;g[2]=e*-b+d*a;g[3]=k*-b+c*a;g[4]=h;g[5]=f;return g};l.scale=function(g,f,a){var e=f[1],k=f[2],d=f[3],c=f[4],h=f[5],b=a[0];a=a[1];g[0]=f[0]*b;g[1]=e*b;g[2]=k*a;g[3]=d*a;g[4]=c;g[5]=h;return g};l.translate=function(g,f,a){var e=f[0],k=f[1],d=f[2],c=f[3],h=f[4];f=f[5];var b=
a[0];a=a[1];g[0]=e;g[1]=k;g[2]=d;g[3]=c;g[4]=e*b+d*a+h;g[5]=k*b+c*a+f;return g};l.fromRotation=function(g,f){var a=Math.sin(f);f=Math.cos(f);g[0]=f;g[1]=a;g[2]=-a;g[3]=f;g[4]=0;g[5]=0;return g};l.fromScaling=function(g,f){g[0]=f[0];g[1]=0;g[2]=0;g[3]=f[1];g[4]=0;g[5]=0;return g};l.fromTranslation=function(g,f){g[0]=1;g[1]=0;g[2]=0;g[3]=1;g[4]=f[0];g[5]=f[1];return g};l.str=function(g){return"mat2d("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+", "+g[4]+", "+g[5]+")"};l.frob=function(g){return Math.sqrt(Math.pow(g[0],
2)+Math.pow(g[1],2)+Math.pow(g[2],2)+Math.pow(g[3],2)+Math.pow(g[4],2)+Math.pow(g[5],2)+1)};return l})},"esri/views/2d/math/vec2":function(){define(["./common"],function(l){var m=l.GLMAT_ARRAY_TYPE,g=l.GLMAT_RANDOM,f={create:function(){var a=new m(2);a[0]=0;a[1]=0;return a},clone:function(a){var e=new m(2);e[0]=a[0];e[1]=a[1];return e},fromValues:function(a,e){var k=new m(2);k[0]=a;k[1]=e;return k},copy:function(a,e){a[0]=e[0];a[1]=e[1];return a},set:function(a,e,k){a[0]=e;a[1]=k;return a},add:function(a,
e,k){a[0]=e[0]+k[0];a[1]=e[1]+k[1];return a},subtract:function(a,e,k){a[0]=e[0]-k[0];a[1]=e[1]-k[1];return a}};f.sub=f.subtract;f.multiply=function(a,e,k){a[0]=e[0]*k[0];a[1]=e[1]*k[1];return a};f.mul=f.multiply;f.divide=function(a,e,k){a[0]=e[0]/k[0];a[1]=e[1]/k[1];return a};f.div=f.divide;f.min=function(a,e,k){a[0]=Math.min(e[0],k[0]);a[1]=Math.min(e[1],k[1]);return a};f.max=function(a,e,k){a[0]=Math.max(e[0],k[0]);a[1]=Math.max(e[1],k[1]);return a};f.scale=function(a,e,k){a[0]=e[0]*k;a[1]=e[1]*
k;return a};f.scaleAndAdd=function(a,e,k,d){a[0]=e[0]+k[0]*d;a[1]=e[1]+k[1]*d;return a};f.distance=function(a,e){var k=e[0]-a[0];a=e[1]-a[1];return Math.sqrt(k*k+a*a)};f.dist=f.distance;f.squaredDistance=function(a,e){var k=e[0]-a[0];a=e[1]-a[1];return k*k+a*a};f.sqrDist=f.squaredDistance;f.length=function(a){var e=a[0];a=a[1];return Math.sqrt(e*e+a*a)};f.len=f.length;f.squaredLength=function(a){var e=a[0];a=a[1];return e*e+a*a};f.sqrLen=f.squaredLength;f.negate=function(a,e){a[0]=-e[0];a[1]=-e[1];
return a};f.inverse=function(a,e){a[0]=1/e[0];a[1]=1/e[1];return a};f.normalize=function(a,e){var k=e[0],d=e[1],k=k*k+d*d;0<k&&(k=1/Math.sqrt(k),a[0]=e[0]*k,a[1]=e[1]*k);return a};f.dot=function(a,e){return a[0]*e[0]+a[1]*e[1]};f.cross=function(a,e,k){e=e[0]*k[1]-e[1]*k[0];a[0]=a[1]=0;a[2]=e;return a};f.lerp=function(a,e,k,d){var c=e[0];e=e[1];a[0]=c+d*(k[0]-c);a[1]=e+d*(k[1]-e);return a};f.random=function(a,e){e=e||1;var k=2*g()*Math.PI;a[0]=Math.cos(k)*e;a[1]=Math.sin(k)*e;return a};f.transformMat2=
function(a,e,k){var d=e[0];e=e[1];a[0]=k[0]*d+k[2]*e;a[1]=k[1]*d+k[3]*e;return a};f.transformMat2d=function(a,e,k){var d=e[0];e=e[1];a[0]=k[0]*d+k[2]*e+k[4];a[1]=k[1]*d+k[3]*e+k[5];return a};f.transformMat3=function(a,e,k){var d=e[0];e=e[1];a[0]=k[0]*d+k[3]*e+k[6];a[1]=k[1]*d+k[4]*e+k[7];return a};f.transformMat4=function(a,e,k){var d=e[0];e=e[1];a[0]=k[0]*d+k[4]*e+k[12];a[1]=k[1]*d+k[5]*e+k[13];return a};f.forEach=function(){var a=f.create();return function(e,k,d,c,h,b){k||(k=2);d||(d=0);for(c=c?
Math.min(c*k+d,e.length):e.length;d<c;d+=k)a[0]=e[d],a[1]=e[d+1],h(a,a,b),e[d]=a[0],e[d+1]=a[1];return e}}();f.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return f})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../geometry/Extent ./viewpointUtils ./math/vec2 ./math/mat2d".split(" "),function(l,m,g,f,a,e,k,d,c,h){l=b=function(a){function e(){var b=
null!==a&&a.apply(this,arguments)||this;b.size=[0,0];return b}g(e,a);Object.defineProperty(e.prototype,"center",{get:function(){var a=this.viewpoint.targetGeometry;return c.set(c.create(),a.x,a.y)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"extent",{get:function(){return d.getExtent(new k,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"height",{get:function(){return this.size?this.size[1]:0},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,
"id",{get:function(){return this._get("id")+1},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"inverseTransform",{get:function(){return h.invert(h.create(),this.transform)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"latitude",{get:function(){return this.viewpoint.targetGeometry.latitude},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"longitude",{get:function(){return this.viewpoint.targetGeometry.longitude},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"resolution",{get:function(){return d.getResolution(this.viewpoint)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"rotation",{get:function(){return this.viewpoint.rotation},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"scale",{get:function(){return this.viewpoint.scale},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"screenCenter",{get:function(){return c.scale(c.create(),this.size,.5)},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"spatialReference",{get:function(){return this.viewpoint.targetGeometry.spatialReference},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"transform",{get:function(){return d.getTransform(h.create(),this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"transformNoRotation",{get:function(){return d.getTransformNoRotation(h.create(),this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,
"clippedExtent",{get:function(){return d.getClippedExtent(new k,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"width",{get:function(){return this.size?this.size[0]:0},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"worldScreenWidth",{get:function(){return d.getWorldScreenWidth(this.spatialReference,this.resolution)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"worldWidth",{get:function(){return d.getWorldWidth(this.spatialReference)},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"wrappable",{get:function(){return!!this.spatialReference&&this.spatialReference.isWrappable},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"x",{get:function(){return this.center[0]},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"y",{get:function(){return this.center[1]},enumerable:!0,configurable:!0});e.prototype.copy=function(a){this.viewpoint&&this.size?(this._set("viewpoint",d.copy(this.viewpoint,
a.viewpoint)),this._set("size",c.copy(this.size,a.size))):(this.viewpoint=a.viewpoint.clone(),c.copy(this.size,a.size))};e.prototype.clone=function(){return new b({viewpoint:this.viewpoint.clone(),size:c.clone(this.size)})};e.prototype.toMap=function(a,b){return c.transformMat2d(a,b,this.inverseTransform)};e.prototype.toScreen=function(a,b){return c.transformMat2d(a,b,this.transform)};e.prototype.pixelSizeAt=function(a){return d.pixelSizeAt(a,this.viewpoint,this.size)};return e}(a.declared(e));f([a.property({dependsOn:["viewpoint"]})],
l.prototype,"center",null);f([a.property({readOnly:!0,dependsOn:["viewpoint","size"]})],l.prototype,"extent",null);f([a.property({readOnly:!0,dependsOn:["size"]})],l.prototype,"height",null);f([a.property({value:0,readOnly:!0,dependsOn:["transform"]})],l.prototype,"id",null);f([a.property({readOnly:!0,dependsOn:["transform"]})],l.prototype,"inverseTransform",null);f([a.property({readOnly:!0,dependsOn:["viewpoint"]})],l.prototype,"latitude",null);f([a.property({readOnly:!0,dependsOn:["viewpoint"]})],
l.prototype,"longitude",null);f([a.property({readOnly:!0,dependsOn:["viewpoint"]})],l.prototype,"resolution",null);f([a.property({readOnly:!0,dependsOn:["viewpoint"]})],l.prototype,"rotation",null);f([a.property({readOnly:!0,dependsOn:["viewpoint"]})],l.prototype,"scale",null);f([a.property({readOnly:!0,dependsOn:["size"]})],l.prototype,"screenCenter",null);f([a.property()],l.prototype,"size",void 0);f([a.property({readOnly:!0,dependsOn:["viewpoint"]})],l.prototype,"spatialReference",null);f([a.property({readOnly:!0,
dependsOn:["viewpoint","size"]})],l.prototype,"transform",null);f([a.property({readOnly:!0,dependsOn:["viewpoint","size"]})],l.prototype,"transformNoRotation",null);f([a.property()],l.prototype,"viewpoint",void 0);f([a.property({readOnly:!0,dependsOn:["viewpoint","size"]})],l.prototype,"clippedExtent",null);f([a.property({readOnly:!0,dependsOn:["size"]})],l.prototype,"width",null);f([a.property({readOnly:!0,dependsOn:["worldWidth","resolution"]})],l.prototype,"worldScreenWidth",null);f([a.property({readOnly:!0,
dependsOn:["spatialReference"]})],l.prototype,"worldWidth",null);f([a.property({readOnly:!0,dependsOn:["spatialReference"]})],l.prototype,"wrappable",null);f([a.property({readOnly:!0,dependsOn:["center"]})],l.prototype,"x",null);f([a.property({readOnly:!0,dependsOn:["center"]})],l.prototype,"y",null);l=b=f([a.subclass("esri.views.2d.ViewState")],l);var b;return l})},"esri/views/2d/MapViewConstraints":function(){define(["../../core/Accessor","../../core/Evented","../../layers/support/LOD","./constraints/ZoomConstraint",
"./constraints/RotationConstraint"],function(l,m,g,f,a){return l.createSubclass([m],{declaredClass:"esri.views.2d.MapViewConstraints",destroy:function(){this.view=null},initialize:function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)},properties:{effectiveLODs:{readOnly:!0,aliasOf:"_zoom.effectiveLODs"},effectiveMinScale:{readOnly:!0,aliasOf:"_zoom.effectiveMinScale"},effectiveMaxScale:{readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"},effectiveMinZoom:{readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"},
effectiveMaxZoom:{readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"},enabled:!0,lods:{value:null,type:[g]},minScale:0,maxScale:0,minZoom:-1,maxZoom:-1,rotationEnabled:!0,snapToZoom:!0,view:{value:null},_zoom:{type:f,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom view.tileInfo".split(" "),get:function(){return new f({lods:this.lods||this.view&&this.view.tileInfo&&this.view.tileInfo.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}},
_rotation:{type:a,dependsOn:["rotationEnabled"],get:function(){return new a({rotationEnabled:this.rotationEnabled})}}},constrain:function(a,k){if(!this.enabled)return a;this._zoom.constrain(a,k);this._rotation.constrain(a,k);return a},zoomToScale:function(a){return this._zoom.zoomToScale(a)},scaleToZoom:function(a){return this._zoom.scaleToZoom(a)},snapScale:function(a,k){return this._zoom.snapScale(a,k)}})})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../layers/support/LOD".split(" "),
function(l,m,g,f,a,e,k){l=d=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._lodByScale={};b._scales=[];b.effectiveLODs=null;b.effectiveMinZoom=-1;b.effectiveMaxZoom=-1;b.effectiveMinScale=0;b.effectiveMaxScale=0;b.enabled=!0;b.lods=null;b.minZoom=-1;b.maxZoom=-1;b.minScale=0;b.maxScale=0;b.snapToZoom=!0;return b}g(c,a);c.prototype.initialize=function(){var a=this,c=this.lods,d=this.minScale,h=this.maxScale,e=this.minZoom,k=this.maxZoom,n=-1,f=-1,g=!1,l=!1;0!==d&&0!==h&&d<
h&&(h=[h,d],d=h[0],h=h[1]);if(c&&c.length){c=c.map(function(a){return a.clone()});c.sort(function(a,b){return b.scale-a.scale});c.forEach(function(a,b){return a.level=b});for(var y,m=0,F=c;m<F.length;m++){var E=F[m];!g&&0<d&&d>=E.scale&&(n=E.level,g=!0);!l&&0<h&&h>=E.scale&&(f=y?y.level:-1,l=!0);y=E}-1===e&&(e=0===d?0:n);-1===k&&(k=0===h?c.length-1:f);e=Math.max(e,0);e=Math.min(e,c.length-1);k=Math.max(k,0);k=Math.min(k,c.length-1);e>k&&(d=[k,e],e=d[0],k=d[1]);d=c[e].scale;h=c[k].scale;c.splice(0,
e);c.splice(k-e+1,c.length);c.forEach(function(b,c){a._lodByScale[b.scale]=b;a._scales[c]=b.scale});this._set("effectiveLODs",c);this._set("effectiveMinZoom",e);this._set("effectiveMaxZoom",k)}this._set("effectiveMinScale",d);this._set("effectiveMaxScale",h)};c.prototype.constrain=function(a,c){if(!this.enabled||c&&a.scale===c.scale)return a;var b=this.effectiveMinScale,d=this.effectiveMaxScale,h=a.targetGeometry,e=c&&c.targetGeometry,k=0!==b&&a.scale>b;if(0!==d&&a.scale<d||k)b=k?b:d,e&&(c=(b-c.scale)/
(a.scale-c.scale),h.x=e.x+(h.x-e.x)*c,h.y=e.y+(h.y-e.y)*c),a.scale=b;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};c.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};c.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c=0,d=b.length-
1,h,e;for(c;c<d;c++){h=b[c];e=b[c+1];if(h<=a)return c+this.effectiveMinZoom;if(e===a)return c+1+this.effectiveMinZoom;if(h>a&&e<a)return c+1-(a-e)/(h-e)+this.effectiveMinZoom}return c};c.prototype.snapScale=function(a,c){void 0===c&&(c=.95);if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return(a+1)%Math.floor(a+1)>=c?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};c.prototype.clone=function(){return new d({enabled:this.enabled,lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,
minScale:this.minScale,maxScale:this.maxScale})};c.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c,d,h){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};return c}(a.declared(e));f([a.property({readOnly:!0})],l.prototype,"effectiveLODs",void 0);f([a.property({readOnly:!0})],l.prototype,"effectiveMinZoom",void 0);f([a.property({readOnly:!0})],l.prototype,"effectiveMaxZoom",void 0);
f([a.property({readOnly:!0})],l.prototype,"effectiveMinScale",void 0);f([a.property({readOnly:!0})],l.prototype,"effectiveMaxScale",void 0);f([a.property()],l.prototype,"enabled",void 0);f([a.property({type:[k]})],l.prototype,"lods",void 0);f([a.property()],l.prototype,"minZoom",void 0);f([a.property()],l.prototype,"maxZoom",void 0);f([a.property()],l.prototype,"minScale",void 0);f([a.property()],l.prototype,"maxScale",void 0);f([a.property()],l.prototype,"snapToZoom",void 0);l=d=f([a.subclass("esri.views.2d.constraints.ZoomConstraint")],
l);var d;return l})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor".split(" "),function(l,m,g,f,a,e){l=k=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.enabled=!0;c.rotationEnabled=!0;return c}g(c,a);c.prototype.constrain=function(a,b){if(!this.enabled)return a;this.rotationEnabled||(a.rotation=
0);return a};c.prototype.clone=function(){return new k({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return c}(a.declared(e));f([a.property()],l.prototype,"enabled",void 0);f([a.property()],l.prototype,"rotationEnabled",void 0);l=k=f([a.subclass("esri.views.2d.constraints.RotationConstraint")],l);var k;return l})},"esri/views/2d/AnimationManager":function(){define("../../core/Accessor ../../core/Scheduler ../../core/now ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(l,
m,g,f,a,e){var k=function(d,c,e,b){var h=d.targetGeometry,k=c.targetGeometry;b?"string"===typeof b&&(b=a.parse(b)||a.ease):b=a.ease;this.easing=b;this.duration=e;this.sCenterX=h.x;this.sCenterY=h.y;this.sScale=d.scale;this.sRotation=d.rotation;this.tCenterX=k.x;this.tCenterY=k.y;this.tScale=c.scale;this.tRotation=c.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?
this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};k.prototype.applyRatio=function(a,c){var d=this.easing(c),b,e;1<=c?(c=this.tCenterX,b=this.tCenterY,e=this.tRotation,d=this.tScale):(c=this.sCenterX+d*this.dCenterX,b=this.sCenterY+d*this.dCenterY,e=this.sRotation+d*this.dRotation,d=this.sScale+d*this.dScale);a.targetGeometry.x=c;a.targetGeometry.y=b;a.scale=d;a.rotation=e};return l.createSubclass({constructor:function(){this._updateTask=m.addFrameTask({postRender:this._postRender.bind(this)});
this._updateTask.pause()},getDefaults:function(){return{viewpoint:e.create()}},properties:{animation:null,duration:{value:200},transition:{value:null},easing:{value:a.ease},viewpoint:null},animateTo:function(a,c,h){e.copy(this.viewpoint,c);this.transition=new k(this.viewpoint,a,h&&h.duration||this.duration,h&&h.easing||this.easing);this.animation&&(this.animation.stop(),this.animation=null);a=this.animation=new f({target:a.clone()});a.always(function(){this._updateTask&&(this._updateTask.pause(),
this.animation=null)}.bind(this));this._startTime=g();this._updateTask.resume();return a},animateContinous:function(a,c){this.updateFunction=c;this.viewpoint=a;this.animation&&(this.animation.stop(),this.animation=null);a=this.animation=new f({target:a.clone()});a.always(function(){this._updateTask&&(this._updateTask.pause(),this.animation=null)}.bind(this));this._startTime=g();this._updateTask.resume();return a},stop:function(){this.animation&&(this.animation.finish(),this.animation=this.updateFunction=
null)},_postRender:function(a){if((a=this.animation)&&a.state!==f.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint);else{a=(g()-this._startTime)/this.transition.duration;var c=1<=a;this.transition.applyRatio(this.viewpoint,a);c&&this.animation.finish()}this.animation._dfd.progress(this.viewpoint)}else this._updateTask.pause()}})})},"esri/views/2d/unitBezier":function(){define([],function(){var l=function(g,f,a,e){function k(a,b){var e,k,f,g;b=null==b?1E-6:b;f=a;for(k=0;8>k;k++){g=
((h*f+c)*f+d)*f-a;if(Math.abs(g)<b)return f;e=(3*h*f+2*c)*f+d;if(1E-6>Math.abs(e))break;f-=g/e}e=0;k=1;f=a;if(f<e)return e;if(f>k)return k;for(;e<k;){g=((h*f+c)*f+d)*f;if(Math.abs(g-a)<b)break;a>g?e=f:k=f;f=.5*(k-e)+e}return f}var d=3*g,c=3*(a-g)-d,h=1-d-c,b=3*f,p=3*(e-f)-b,q=1-b-p;return function(a,c){a=k(a,c);return((q*a+p)*a+b)*a}},m=/^cubic-bezier\((.*)\)/;l.parse=function(g){var f=l[g]||null;!f&&(g=m.exec(g))&&(g=g[1].split(",").map(function(a){return parseFloat(a.trim())}),4!==g.length||g.some(function(a){return isNaN(a)})||
(f=l.apply(l,g)));return f};l.ease=l(.25,.1,.25,1);l.linear=l(0,0,1,1);l.easeIn=l["ease-in"]=l(.42,0,1,1);l.easeOut=l["ease-out"]=l(0,0,.58,1);l.easeInOut=l["ease-in-out"]=l(.42,0,.58,1);return l})},"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang dojo/on dojo/dom dojo/dom-construct ../core/Accessor ../core/HandleRegistry ../core/Scheduler ../core/watchUtils ../widgets/Popup ./PopupManager ./ui/DefaultUI ../core/accessorSupport/decorators".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q,t,r,w){var n=[0,0];l=function(c){function f(){var a=c.call(this)||this;a.height=0;a.position=null;a.resizing=!1;a.root=null;a.surface=null;a.suspended=!0;a.width=0;Object.defineProperty(a,"_measureInfo",{enumerable:!1,writable:!1,value:{task:null,freq:16,time:750}});a._domHandles=new h;a.watch("interacting",function(b){var c=a.surface;c&&c.setAttribute("data-interacting",b.toString())});return a}g(f,c);f.prototype.getDefaults=function(){return a.mixin(this.inherited(arguments),
{popup:{},ui:{}})};f.prototype.initialize=function(){var a=this,c=this._measureInfo,d=null;p.init(this,"container",function(h,k,f,n){if(null!=h||null!=k)d&&(d.remove(),d=null,c.freq=16,c.time=750),c.task&&(c.task.remove(),c.task=null),h?(d=e(window,"resize",function(){c.freq=16;c.time=750}),c.task=b.addFrameTask({prepare:function(b){var c=a._measureInfo;c.time+=b.deltaTime;c.time<c.freq||(c.time=0,a._measure()?(c.freq=16,a._set("resizing",!0)):(c.freq=Math.min(750,2*c.freq),512<=c.freq&&a._set("resizing",
!1)))}})):a._set("resizing",!1),a._measure(),h=a.root,k=a.surface,f=a.width,n=a.height,h&&k&&f&&n&&(h.style.width=k.style.width=f+"px",h.style.height=k.style.height=n+"px")})};f.prototype.destroy=function(){this.ui.destroy();this.popup&&this.popup.destroy();this.container=null};Object.defineProperty(f.prototype,"container",{set:function(a){var b=this._get("container");if(b!==a){b&&(b.classList.remove("esri-view"),this.popupManager.destroy(),this.popupManager=null,d.destroy(this.root),this._set("root",
null));if(a){a.classList.add("esri-view");b=document.createElement("div");b.className="esri-view-root";a.insertBefore(b,a.firstChild);this._set("root",b);var c=document.createElement("div");c.className="esri-view-surface";k.setSelectable(c,!1);b.appendChild(c);this._set("surface",c);this._forceReadyCycle();this.popupManager=new t({enabled:!0,view:this})}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null);this._set("container",
a)}},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"popup",{set:function(a){var b=this._get("popup");a!==b&&(this._domHandles.remove("view-popup"),b&&b.destroy(),a&&(a.viewModel.view=this,a._started||a.startup(),this._domHandles.add([p.init(this,"root",function(b,c){var d=a.domNode;k.isDescendant(d.parentNode,c)&&d.parentNode.removeChild(d);b&&!d.parentNode&&a.placeAt(b)})],"view-popup")),this._set("popup",a))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,
"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"ui",{set:function(a){var b=this._get("ui");a!==b&&(this._domHandles.remove("ui"),b&&b.destroy(),a&&(a.view=this,this._domHandles.add([p.init(this,"root",function(b){a.container=b?d.create("div",null,b):null})],"ui")),this._set("ui",a))},enumerable:!0,configurable:!0});f.prototype.pageToContainer=function(a,b,c){var d=this.position;a-=d[0];b-=d[1];c?(c[0]=a,c[1]=b):c=[a,b];return c};
f.prototype.containerToPage=function(a,b,c){var d=this.position;a+=d[0];b+=d[1];c?(c[0]=a,c[1]=b):c=[a,b];return c};f.prototype._measure=function(){var a=this.container,b=a?a.clientWidth:0,c=a?a.clientHeight:0;if(0===b||0===c||"hidden"===window.getComputedStyle(a).visibility)return this._set("suspended",!0),!1;var d=this.root,e=this.surface,h=this.width,k=this.height,f=this.position;if(b===h&&c===k)return this._set("suspended",!1),!1;d&&e&&(d.style.width=e.style.width=b+"px",d.style.height=e.style.height=
c+"px");this._set("width",b);this._set("height",c);this._set("suspended",!1);d=(a.ownerDocument||window.document).defaultView;a=a.getBoundingClientRect();n[0]=a.left+d.pageXOffset;n[1]=a.top+d.pageYOffset;f&&n[0]===f[0]&&n[1]===f[1]||this._set("position",n.slice());this.emit("resize",{oldWidth:h,oldHeight:k,width:b,height:c});return!0};return f}(w.declared(c));f([w.property({value:null,cast:function(a){return k.byId(a)}})],l.prototype,"container",null);f([w.property({readOnly:!0})],l.prototype,"height",
void 0);f([w.property({type:q})],l.prototype,"popup",null);f([w.property({readOnly:!0})],l.prototype,"position",void 0);f([w.property({readOnly:!0})],l.prototype,"resizing",void 0);f([w.property({readOnly:!0})],l.prototype,"root",void 0);f([w.property({value:null,dependsOn:["width","height"],readOnly:!0})],l.prototype,"size",null);f([w.property({readOnly:!0})],l.prototype,"surface",void 0);f([w.property({readOnly:!0})],l.prototype,"suspended",void 0);f([w.property({type:r})],l.prototype,"ui",null);
f([w.property({readOnly:!0})],l.prototype,"width",void 0);return l=f([w.subclass("esri.views.DOMContainer")],l)})},"esri/widgets/Popup":function(){define("./support/viewModelWiring ./Widgette ./Popup/PopupViewModel ../core/HandleRegistry ../core/watchUtils ../views/2d/viewpointUtils dijit/a11yclick dijit/_TemplatedMixin dojo/keys dojo/on dojo/query dojo/Deferred dojo/i18n!./Popup/nls/Popup dojo/text!./Popup/templates/Popup.html ../core/lang dojo/_base/lang dojo/dom-class dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style ./Popup/PopupRenderer ./Popup/PopupRendererViewModel ./Spinner ./Message require".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q,t,r,w,n,v,x,C,y,L,F,E,N,H){var I=H.toUrl("./Popup/images/default-action.svg"),u={hidden:"esri-hidden",invisible:"esri-invisible",iconText:"esri-icon-font-fallback-text",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",
iconPaginationMenu:"esri-icon-layer-list",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-rotating esri-icon-loading-indicator",iconZoom:"esri-icon-zoom-in-magnifying-glass",base:"esri-popup",container:"esri-popup__position-container",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",shadow:"esri-popup--shadow",showDock:"esri-popup--dock-button-visible",showContent:"esri-popup--content-visible",showFooter:"esri-popup--footer-visible",showTitle:"esri-popup--title-visible",
showPagination:"esri-popup--pagination-visible",hasPopupRenderer:"esri-popup--has-popup-renderer",hasPromiseFeatures:"esri-popup--has-promise-features",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",
canDockToLeft:"esri-popup--can-dock-to-left",canDockToRight:"esri-popup--can-dock-to-right",canDockToTop:"esri-popup--can-dock-to-top",canDockToBottom:"esri-popup--can-dock-to-bottom",hasPaginationMenuOpen:"esri-popup--feature-menu-open",alignTop:"esri-popup--top-aligned",alignBottom:"esri-popup--bottom-aligned",alignLeftTop:"esri-popup--left-top-aligned",alignLeftBottom:"esri-popup--left-bottom-aligned",alignRightTop:"esri-popup--right-top-aligned",alignRightBottom:"esri-popup--right-bottom-aligned",
hasPendingPromises:"esri-popup--has-pending-promises",isPendingPromisesResult:"esri-popup--is-pending-promises-result",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",button:"esri-popup__button",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",actions:"esri-popup__actions",action:"esri-popup__action",
actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",pagination:"esri-popup__pagination",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",
paginationText:"esri-popup__pagination-page-text",paginationDocked:"esri-popup__pagination-docked",paginationDockedButtons:"esri-popup__pagination-docked-buttons",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",
featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title"},z={auto:"auto",topLeft:"top-left",topCenter:"top-center",topRight:"top-right",bottomLeft:"bottom-left",bottomCenter:"bottom-center",bottomRight:"bottom-right"},D={buttonEnabled:!0,position:z.auto,breakpoint:{width:544}},A={popupRenderer:"popup-renderer",acions:"actions",actionsChange:"actions-change",paginationTitles:"pagination-titles",view:"view"};return m.createSubclass([d],{declaredClass:"esri.widgets.Popup",
baseClass:u.base,templateString:t,constructor:function(){this._handleRegistry=new f;this._contentStorage=x.create("div")},postCreate:function(){var b=this;this.inherited(arguments);var c=this.viewModel;this.own(a.whenTrue(c,"view.ready",function(){this._wireUpView(this.viewModel.view)}.bind(this)),a.init(c,"pendingPromisesCount,featureCount,promises,location",function(){var a=this.viewModel;this._displayPendingFeaturesStatus(a.pendingPromisesCount,a.featureCount,a.promises,a.location)}.bind(this)),
a.init(c,"features",this._updateFeatures.bind(this)),a.init(c,"selectedFeatureIndex,selectedFeature",function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateActions(a.actions,a.features,a.selectedFeature);this._updatePageText(a.features,a.selectedFeatureIndex);this._createPaginationNodes(a.features,a.selectedFeatureIndex);this._bodyContentNode.scrollTop=0}.bind(this)),a.init(c,"title",function(a){this._updateTitle(a);this.reposition()}.bind(this)),a.init(c,"actions",
function(a){var b=this.viewModel;this._updateActions(a,b.features,b.selectedFeature);this._actionChangeListener(a)}.bind(this)),a.init(c,"content",function(a){this._updateContent(a);this.reposition()}.bind(this)),a.init(c,"location",function(a){this._togglePopupLocationRepositioning(this.visible);this._autoAlign();this.reposition()}.bind(this)),h(this._dockNode,k,this._toggleDock.bind(this)),h(this._closeNode,k,this.close.bind(this)),h(this._previousNode,k,c.previous.bind(c)),h(this._previousDockedNode,
k,c.previous.bind(c)),h(this._nextNode,k,c.next.bind(c)),h(this._nextDockedNode,k,c.next.bind(c)),h(this._pageMenuNode,k,this._togglePageMenu.bind(this)),h(this._pageMenuDockedNode,k,this._togglePageMenu.bind(this)),h(this._pageMenuInfoNode,k,this._togglePageMenu.bind(this)),h(this._paginationNode,h.selector("li",k),function(){b._selectFeature(this)}),h(this._paginationNode,h.selector("li","keyup"),function(a){b._keyupFeature(a,this)}),h(this._actionsNode,h.selector("[data-action-index]",k),function(){b._actionEvent(this)}),
h(c,"trigger-action",function(a){a.action&&"zoom-to"===a.action.id&&this.viewModel.zoomToLocation()}.bind(this)));l.setUpEventDelegates(this,"trigger-action")},destroy:function(){this._destroyPopupRendererVMs();this._destroyMessage();this._destroySpinner();this._destroyPopupRenderer();this._handleRegistry.destroy();this._handleRegistry=null},properties:{_popupRenderer:{readOnly:!0,value:null},actions:{aliasOf:"viewModel.actions"},alignment:{value:"top",set:function(a){this._set("alignment",a);this.reposition()}},
autoPanEnabled:!0,autoAlignmentEnabled:!1,content:{aliasOf:"viewModel.content"},closeOnViewChangeEnabled:!1,currentDockPosition:{readOnly:!0,value:null},dockOptions:{value:D,set:function(a){var b=w.clone(D),c=this.viewModel.get("view.breakpoints"),d={};c&&(d.width=c.xsmall,d.height=c.xsmall);a=w.mixin({},b,a);b=w.mixin({},b.breakpoint,d);!0===a.breakpoint?a.breakpoint=b:"object"===typeof a.breakpoint&&(a.breakpoint=w.mixin({},b,a.breakpoint));this._set("dockOptions",a);this._toggleDockButton(a)}},
dockEnabled:{value:!1,set:function(a){this._set("dockEnabled",a);this._togglePopupDocking(a);this._togglePopupLocationRepositioning(this.visible);this._autoAlign();this.reposition()}},featureCount:{aliasOf:"viewModel.featureCount"},features:{aliasOf:"viewModel.features"},location:{aliasOf:"viewModel.location"},messageEnabled:{value:!1,set:function(a){this._set("messageEnabled",a);this._createMessage(a,this.viewModel.view)}},paginationEnabled:{value:!0,set:function(a){var b=this.viewModel;this._set("paginationEnabled",
a);this._updatePagination(b.features,b.selectedFeatureIndex);this._updateFooterVisibility(b.features,b.actions);this.reposition()}},promises:{aliasOf:"viewModel.promises"},rendered:{dependsOn:["viewModel.content","_popupRenderer.rendered"],get:function(){var a=this._contentIsPopupRenderer()&&this.get("_popupRenderer.rendered");return this._popupRenderer?a:!0},readOnly:!0},selectedFeature:{aliasOf:"viewModel.selectedFeature"},selectedFeatureIndex:{aliasOf:"viewModel.selectedFeatureIndex"},spinnerEnabled:{value:!0,
set:function(a){this._set("spinnerEnabled",a);this._createSpinner(a,this.viewModel.view)}},title:{aliasOf:"viewModel.title"},view:{aliasOf:"viewModel.view"},viewModel:{type:g},visible:{value:!1,set:function(a){this._set("visible",a);n.remove(this._containerNode,u.hasPaginationMenuOpen);n.toggle(this.domNode,u.invisible,!a);this._togglePopupLocationRepositioning(a);this._toggleContentVisibility(a);this._autoAlign();this.reposition()}}},_css:u,_i18n:q,_hideActionsTextNum:3,_animationDelay:10,_pointerOffset:16,
_popupRendererVMs:[],clear:l.createMethodDelegate("clear"),close:function(){this.set("visible",!1)},next:l.createMethodDelegate("next"),previous:l.createMethodDelegate("previous"),reposition:function(){this._positionPopup();return this._moveIntoView()},open:function(a){var b=w.mixin({updateLocationEnabled:!1},a);this.viewModel.set(b);a&&a.promises?this.set("visible",!1):this.set("visible",!0)},triggerAction:l.createMethodDelegate("triggerAction"),_actionChangeListener:function(a){this._handleRegistry.remove(A.actionsChange);
a&&this._handleRegistry.add([a.on("change",function(){var a=this.viewModel;this._updateActions(a.actions,a.features,a.selectedFeature)}.bind(this))],A.actionsChange)},_actionEvent:function(a){var b=this.viewModel;if(a=v.get(a,"data-action-index"))a=parseInt(a,10),b.triggerAction(a)},_addContent:function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateContent(a.content);this._updateTitle(a.title);this._updatePageText(a.features,a.selectedFeatureIndex)},_updateActions:function(a,
b,c){this._updateActionButtons(a,c);this._updateFooterVisibility(b,a);this.reposition()},_contentIsPopupRenderer:function(){var a=this.get("viewModel.content"),b=this.get("_popupRenderer.domNode");return!(!a||!b||a!==b)},_updateActionButtons:function(b,c){this._handleRegistry.remove(A.actions);if(this._actionsNode){var d=document.createDocumentFragment(),e=b.length;e&&b.forEach(function(b,h){"zoom-to"===b.id&&(b.title=this._i18n.zoom,b.className=u.iconZoom);var k=b.title,f=b.className,g=b.image;g||
f||(g=I);var p=c&&c.attributes;p&&(k=k?r.substitute(p,k):"",f=f?r.substitute(p,f):null,g=g?r.substitute(p,g):null);var q=x.create("div",{tabindex:"0",title:k},d);v.set(q,"data-action-index",h);n.add(q,[u.button,u.action]);var t=x.create("span",{"aria-hidden":!0},q);n.add(t,u.icon);f&&n.add(t,f);g&&(n.add(t,u.actionImage),y.set(t,"background-image","url("+g+")"));h={className:u.actionText,textContent:k};e>=this._hideActionsTextNum&&(h.className=u.iconText);var l=x.create("span",h,q);this._handleRegistry.add([a.init(b,
"visible",function(a){n.toggle(q,u.hidden,!a)}),a.init(b,"className",function(a,b){p&&(a=r.substitute(p,a),b=r.substitute(p,b));n.remove(t,b);n.add(t,a)}),a.init(b,"image",function(a){p&&(a=r.substitute(p,a));n.toggle(t,u.actionImage,!!a);y.set(t,"background-image",a?"url("+a+")":"")}),a.init(b,"title",function(a){p&&(a=r.substitute(p,a));a=a||"";v.set(q,"title",a);v.set(l,"textContent",a)})],A.actions)},this);x.place(d,this._actionsNode,"only")}},_getLocationScreenPoint:function(){var a=this.viewModel,
b;if(a.location&&this.visible){var c=a.location;c&&a.get("view.ready")&&(b=a.view.toScreen(c))}return b},_calculatePosition:function(a,b,c){var d=this.alignment,e,h=this._pointerOffset,k=null,f=null,n=null,g=null;if(a&&b&&c){e=b.h;if("top"===d||"bottom"===d)e+=h;b=b.w;if("left-top"===d||"left-bottom"===d||"right-top"===d||"right-bottom"===d)b+=h,e+=h;var p=b/2,q=a.y,x=a.x,t=c.height-q,l=c.width-x,v=b;switch(d){case "bottom":k=q+h;f=x-p;v=p;break;case "left-top":n=t+h;g=l+h;break;case "left-bottom":k=
q+h;g=l+h;break;case "right-top":n=t+h;f=x+h;break;case "right-bottom":k=q+h;f=x+h;break;default:n=t+h,f=x-p,v=p}c=c.padding;c=this.dockEnabled?{left:c.left?c.left+"px":"",top:c.top?c.top+"px":"",right:c.right?c.right+"px":"",bottom:c.bottom?c.bottom+"px":""}:{top:null!==k?k+"px":"auto",left:null!==f?f+"px":"auto",bottom:null!==n?n+"px":"auto",right:null!==g?g+"px":"auto"};return{height:e,width:b,box:{top:null!==k?k:a.y-e,left:null!==f?f:a.x-v,bottom:null!==n?n:a.y+e,right:null!==g?g:a.x+v},style:c}}},
_createPopupRendererVMs:function(a){this._destroyPopupRendererVMs();a&&1<a.length&&a.forEach(function(a,b){a=new F({contentEnabled:!1,graphic:a});this._popupRendererVMs.push(a)},this)},_destroyPopupRendererVMs:function(){this._handleRegistry.remove(A.paginationTitles);this._popupRendererVMs.forEach(function(a){a.destroy()});this._popupRendererVMs.length=0},_createPaginationNodes:function(b,c){this._handleRegistry.remove(A.paginationTitles);if(b){var d=b.length;this._paginationNode&&v.set(this._paginationNode,
"innerHTML","");1<d&&(d=r.substitute({total:d},this._i18n.selectedFeatures),v.set(this._pageMenuInfoNode,"textContent",d),b.forEach(function(b,d){b=this._i18n.untitled;var e=x.create("li",{role:"menuitem",className:u.featureMenuItem},this._paginationNode);d===c?(v.set(e,"aria-label",q.selectedFeature),n.add(e,u.featureMenuSelected)):v.set(e,"data-feature-index",d);var h=x.create("span",{className:u.featureMenuTitle,innerHTML:b},e);if(b=this._popupRendererVMs[d])b=a.init(b,"title",function(a){v.set(h,
"innerHTML",a)}),this._handleRegistry.add(b,A.paginationTitles);d===c&&x.create("span",{className:u.iconCheckMark},h)},this))}},_createMessage:function(a,b){this._destroyMessage();a&&b&&(this._message=new N({visible:!1,text:this._i18n.noFeaturesFound,viewModel:{view:b}}),this._message.startup(),x.place(this._message.domNode,b.root))},_createSpinner:function(a,b){this._destroySpinner();a&&b&&(this._spinner=new E({visible:!1,viewModel:{view:b}}),this._spinner.startup(),x.place(this._spinner.domNode,
b.root))},_updateContent:function(a){a&&a.nodeName?(x.place(a,this._contentStorage),x.place(a,this._bodyContentNode,"only")):"string"===typeof a&&(this._destroyPopupRenderer(),v.set(this._bodyContentNode,"innerHTML",a));this._bodyContentNode.scrollTop=0;n.toggle(this._containerNode,u.hasPopupRenderer,this._contentIsPopupRenderer());n.toggle(this._containerNode,u.showContent,!!a);n.remove(this._containerNode,u.hasPaginationMenuOpen);this._autoAlign()},_destroyPopupRenderer:function(){this._popupRenderer&&
!this._popupRenderer._destroyed&&(this._handleRegistry.remove(A.popupRenderer),this._popupRenderer.destroy(),this._set("_popupRenderer",null))},_destroyMessage:function(){this._message&&(this._message.destroyRendering(),this._message.destroy(),this._message=null)},_destroySpinner:function(){this._spinner&&(this._spinner.destroyRendering(),this._spinner.destroy(),this._spinner=null)},_setDockEnabledForViewSize:function(a){a.breakpoint&&this.set("dockEnabled",this._shouldDockAtCurrentViewSize(a))},
_togglePopupDocking:function(a){n.remove(this._containerNode,u.hasPaginationMenuOpen);n.toggle(this._containerNode,u.isDocked,!!a);v.set(this._dockNode,"title",a?this._i18n.undock:this._i18n.dock);this._updateDockPosition(this.dockOptions)},_dockingThresholdCrossed:function(a,b,c){var d=a[0];a=a[1];var e=b[0];b=b[1];var h=c.width;c=c.height;return d<=h&&e>h||d>h&&e<=h||a<=c&&b>c||a>c&&b<=c},_determineDockPosition:function(a){var b=this.viewModel,c=b.view,d=c&&c.padding,d=c&&c.width-d.left-d.right;
return(b=c&&b.get("view.breakpoints"))&&d<=b.xsmall?a.bottomCenter:this.isLeftToRight()?a.topRight:a.topLeft},_updateDockPosition:function(a){n.remove(this._containerNode,[u.isDockedTopLeft,u.isDockedTopCenter,u.isDockedTopRight,u.isDockedBottomLeft,u.isDockedBottomCenter,u.isDockedBottomRight,u.canDockToTop,u.canDockToBottom,u.canDockToLeft,u.canDockToRight]);var b,c,d;b=a.position;b=b===z.auto?this._determineDockPosition(z):"function"===typeof b?b.call(this):b;switch(b){case z.topLeft:c=u.isDockedTopLeft;
d=u.canDockToLeft;break;case z.topCenter:c=u.isDockedTopCenter;d=u.canDockToTop;break;case z.bottomLeft:c=u.isDockedBottomLeft;d=u.canDockToLeft;break;case z.bottomCenter:c=u.isDockedBottomCenter;d=u.canDockToBottom;break;case z.bottomRight:c=u.isDockedBottomRight;d=u.canDockToRight;break;default:c=u.isDockedTopRight,d=u.canDockToRight}n.toggle(this._containerNode,d,!!a.buttonEnabled);this.dockEnabled?(n.add(this._containerNode,c),this._set("currentDockPosition",b)):this._set("currentDockPosition",
null);this._popupRenderer&&this._popupRenderer.resize();this.reposition()},_toggleDockButton:function(a){var b=this._containerNode;n.toggle(b,u.showDock,!!a.buttonEnabled);n.toggle(b,u.isDocked,!!this.dockEnabled);this._updateDockPosition(a)},_updateFooterVisibility:function(a,b){a=this._isPaginationEnabled(a)||b&&b.length;n.toggle(this._containerNode,u.showFooter,!!a)},_isPaginationEnabled:function(a){return this.paginationEnabled&&a&&1<a.length},_updatePagination:function(a,b){this._updatePageText(a,
b);this._createPaginationNodes(a,b);n.toggle(this._containerNode,u.showPagination,this._isPaginationEnabled(a))},_displayPendingFeaturesStatus:function(a,b,c,d){var e=0<a&&0===b;c=c&&c.length;a&&c&&a===c&&this.set("visible",!1);n.toggle(this._containerNode,u.hasPendingPromises,!!a);n.toggle(this._containerNode,u.isPendingPromisesResult,!!e);n.toggle(this._containerNode,u.hasPromiseFeatures,!!b);this._message&&this._message.set({visible:!1});e?this._spinner&&(this._spinner.set({visible:!0}),this._spinner.viewModel.point=
d):(this._spinner&&(this._spinner.viewModel.point=null),c&&b&&!this.visible?this.set("visible",!0):c&&!b&&this.visible&&this.set("visible",!1),!b&&c&&this._message&&(this._message.set({visible:!0}),this._message.viewModel.point=d))},_moveIntoView:function(){var a=new p;setTimeout(a.resolve.bind(this),this._animationDelay);return a.then(function(){if(!this._destroyed){var a=this.viewModel,b=this.get("viewModel.view");if(a&&b&&b.stationary){var c=this._getLocationScreenPoint();if(c){var d=this._sizePopup(),
d=this._calculatePosition(c,d,b),h=b.width,k=b.height,f=b.padding,n=b.ui.padding;if(this.autoPanEnabled&&!this.autoAlignmentEnabled){if(c.y<f.top||c.y>k-f.bottom||c.x<f.left||c.x>h-f.right)return a.centerAtLocation();if(!this.dockEnabled&&d&&d.width<b.width&&d.height<b.height){var g=c=0;d.box.top<f.top?g=-d.box.top+n.top+f.top:d.box.bottom>k-f.bottom&&(g=-(d.box.bottom-k+f.bottom)-n.bottom);d.box.left<f.left?c=d.box.left-n.left-f.left:d.box.right>h-f.right&&(c=d.box.right-h+f.right+n.right);if(c||
g)return d=e.translateBy(e.create(),b.viewpoint,[c,g]),b.goTo(d,a.animationOptions)}}}}}}.bind(this))},_isScreenPointWithinView:function(a,b){return b&&a&&-1<a.x&&-1<a.y&&a.x<=b.width&&a.y<=b.height},_autoAlign:function(){if(this.autoAlignmentEnabled&&this.visible){var a=this.get("viewModel.view"),b=this._getLocationScreenPoint();if(this._isScreenPointWithinView(b,a)){var c=this._sizePopup(),d=this._pointerOffset,e=c.h+d,c=(c.w+d)/2,h,k,f,n,d=a.padding;b.x-c<0+d.left&&(k=!0);b.x+c>a.width-d.right&&
(h=!0);b.y-e<0+d.top&&(f=!0);b.y+e>a.height-d.bottom&&(n=!0);k?this._set("alignment",f?"right-bottom":"right-top"):h?this._set("alignment",f?"left-bottom":"left-top"):f?this._set("alignment",n?"top":"bottom"):this._set("alignment","top")}}},_positionPopup:function(){var a=this.viewModel.view;if(a){n.remove(this._containerNode,[u.alignTop,u.alignBottom,u.alignLeftTop,u.alignLeftBottom,u.alignRightTop,u.alignRightBottom]);this._triggerOffset();var b;switch(this.alignment){case "bottom":b=u.alignBottom;
break;case "right-top":b=u.alignRightTop;break;case "right-bottom":b=u.alignRightBottom;break;case "left-top":b=u.alignLeftTop;break;case "left-bottom":b=u.alignLeftBottom;break;default:b=u.alignTop}n.add(this._containerNode,b);b=this._getLocationScreenPoint();var c=this._sizePopup();(a=(a=this._calculatePosition(b,c,a))&&a.style)&&y.set(this._containerNode,a)}},_removeContent:function(){this._destroyPopupRenderer();v.set(this._bodyContentNode,"innerHTML","");v.set(this._titleNode,"innerHTML","");
v.set(this._pageTextNode,"innerHTML","");v.set(this._pageTextDockedNode,"innerHTML","");n.remove(this._containerNode,[u.showTitle,u.showContent])},_keyupFeature:function(a,d){var e=a.keyCode;if(e===c.UP_ARROW||e===c.DOWN_ARROW){a.stopPropagation();a.preventDefault();a=b("li",this._paginationNode);var h=a.length;d=a.indexOf(d);var k;e===c.UP_ARROW?k=d-1:e===c.DOWN_ARROW&&(k=d+1);0>k?k=h-1:k>=h&&(k=0);a[k].focus()}},_selectFeature:function(a){var b=this.viewModel,c=-1;(a=v.get(a,"data-feature-index"))&&
(c=parseInt(a,10));-1!==c&&(b.selectedFeatureIndex=c);n.remove(this._containerNode,u.hasPaginationMenuOpen);this._pageMenuNode.focus()},_updateSelectedFeature:function(b){var c=this.viewModel,d,e="",k="";if(b){if(d=b.layer)e=d.id||"",k=d.title||"";if(!this._popupRenderer||this._popupRenderer&&this._popupRenderer._destroyed){this._handleRegistry.remove(A.popupRenderer);this._set("_popupRenderer",new L);d=a.init(this._popupRenderer.viewModel,"title",function(a){c.title=a});var f=a.init(this._popupRenderer.viewModel,
"content",function(a){c.content=a?this._popupRenderer.domNode:null}.bind(this)),n=h(this._popupRenderer,"resize",this.reposition.bind(this));this._handleRegistry.add([d,f,n],A.popupRenderer);this._popupRenderer.startup()}this._popupRenderer.viewModel.graphic=b}this._toggleFeatureUpdatedClass();v.set(this._containerNode,"data-layer-title",k);v.set(this._containerNode,"data-layer-id",e);this.reposition()},_updateFeatures:function(a){var b=this.viewModel;this._createPopupRendererVMs(a);this._updatePagination(a,
b.selectedFeatureIndex);this._updateFooterVisibility(a,b.actions);this.reposition()},_shouldDockAtCurrentViewSize:function(a){var b=this.viewModel;a=a.breakpoint;return b.view&&(a.hasOwnProperty("width")&&b.view.ui.width<=a.width||a.hasOwnProperty("height")&&b.view.ui.height<=a.height)},_sizePopup:function(){return C.getContentBox(this._containerNode)},_updateTitle:function(a){a=a||"";v.set(this._titleNode,"innerHTML",a);n.toggle(this._containerNode,u.showTitle,!!a);n.remove(this._containerNode,u.hasPaginationMenuOpen)},
_toggleDock:function(){this.set("dockEnabled",!this.dockEnabled)},_togglePageMenu:function(){n.toggle(this._containerNode,u.hasPaginationMenuOpen);var a=n.contains(this._containerNode,u.hasPaginationMenuOpen);v.set(this._pageMenuSectionNode,"aria-hidden",!a);var c=b("li",this._paginationNode),d=c[0];c.forEach(function(b){v.set(b,"tabIndex",a?"0":"")});a?d&&d.focus():this._pageMenuNode.focus()},_updatePageText:function(a,b){var c="";this._isPaginationEnabled(a)&&(c=r.substitute({index:b+1,total:a.length},
this._i18n.pageText));this._pageTextNode&&v.set(this._pageTextNode,{textContent:c});this._pageTextDockedNode&&v.set(this._pageTextDockedNode,{textContent:c})},_triggerOffset:function(){this._containerNode.offsetWidth=this._containerNode.offsetWidth},_toggleFeatureUpdatedClass:function(){n.remove(this._containerNode,u.hasFeatureUpdated);this._triggerOffset();n.add(this._containerNode,u.hasFeatureUpdated)},_viewPointChanged:function(){this.closeOnViewChangeEnabled?this.close():this._positionPopup()},
_wireUpView:function(b){this._handleRegistry.remove(A.view);this._viewPointEvent=null;if(b){var c="viewpoint";"3d"===b.type&&(c="camera");this._viewPointEvent=a.pausable(b,c,this._viewPointChanged.bind(this));this._handleRegistry.add([b.watch("padding",this.reposition.bind(this)),b.watch("size",this._updateDockEnabledForViewSize.bind(this)),h(b,"resize",this.reposition.bind(this)),this._viewPointEvent],A.view);this._togglePopupLocationRepositioning(this.visible);this._createMessage(this.messageEnabled,
b);this._createSpinner(this.spinnerEnabled,b);this._setDockEnabledForViewSize(this.dockOptions);this._toggleDockButton(this.dockOptions);this.reposition()}},_updateDockEnabledForViewSize:function(a,b){var c=this.get("viewModel.view.padding"),d=c.left+c.right,e=c.top+c.bottom,c=[],h=[];c[0]=a[0]-d;c[1]=a[1]-e;h[0]=b[0]-d;h[1]=b[1]-e;a=this.dockOptions;this._dockingThresholdCrossed(c,h,a.breakpoint)&&this._setDockEnabledForViewSize(a);this._updateDockPosition(a)},_togglePopupLocationRepositioning:function(a){var b=
this.viewModel;this._viewPointEvent&&(a&&b.location&&!this.dockEnabled?this._viewPointEvent.resume():this._viewPointEvent.pause())},_toggleContentVisibility:function(a){a?this._addContent():this._removeContent()}})})},"esri/widgets/support/viewModelWiring":function(){define(["../../core/watchUtils"],function(l){function m(g,f){Array.isArray(f)||(f=[f]);return f.map(function(a){return g.viewModel.on(a,function(e){g.emit(a,e)})})}return{createGetterDelegate:function(g){var f="viewModel."+g;return function(){return this.get(f)}},
createSetterDelegate:function(g){return function(f){var a=this.get("viewModel");a&&a.set(g,f)}},createMethodDelegate:function(g){var f="viewModel."+g;return function(){var a=this.get(f);if(a)return a.apply(this.viewModel,arguments)}},setUpEventDelegates:function(g,f){var a=m(g,f),e=l.init(g,"viewModel",function(e,d){a.forEach(function(a){a.remove()});a.length=0;e&&(a=m(g,f));g.own.apply(g,a)});g.own(e)}}})},"esri/widgets/Widgette":function(){define("../core/Accessor ../core/declare ../core/accessorSupport/metadata dijit/_WidgetBase dijit/Destroyable dijit/registry dojo/_base/lang dojo/_base/window dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/on".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q){function t(a){return function(b){this._set(a,b)}}function r(a,b){return function(c){w.call(this,a,b,c);this._set(a,c)}}function w(a,c,d){(Array.isArray(c)?c:[c]).forEach(function(c){var e=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":k.isFunction(d)&&(d=d.bind(this));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;e.tagName?b.set(e,c,d):e.set(c,d);break;case "innerText":e.innerHTML="";e.appendChild(this.ownerDocument.createTextNode(d));
break;case "innerHTML":e.innerHTML=d;break;case "class":c=this._get(a),p.replace(e,d,c)}},this)}m.before(function(a,b){if(b.declaredClass===n||m.hasMixin(a,n)){var c=g.getPropertiesMetadata(b);Object.keys(c).forEach(function(a){var b=c[a];var d=b.set;a="function"===typeof d?d:null===d?t(b.name):"string"===typeof d||"object"===typeof d?r(a,d):void 0;b.set=a})}});var n="esri.widgets._WidgetBase";return l.createSubclass([a],{declaredClass:n,postscript:function(a){var h=this.__accessor__;a=h.ctorArgs||
a;var k;(k=this.getDefaults?a?this.getDefaults(a):this.getDefaults({}):null)&&Object.getOwnPropertyNames(k).forEach(function(a){h.set(a,k[a])},this);this.postMixInProperties();this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=d.body(this.ownerDocument);e.add(this);this.buildRendering();h.initialize();a&&(this.set(a),h.ctorArgs=null);h.initialize();this.initialize();this.postCreate();if(this.domNode){var f;(a=this.srcNodeRef)&&a.parentNode&&
this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),f=!0);b.set(this.domNode,{widgetId:this.id,id:this.id});f&&(this.srcNodeRef=null)}this._created=!0;this.notifyChange("container");c.around(this,"startup",function(a){return function(){this._started||a.apply(this)}});this.autoStart&&this.startup()},getDefaults:function(a){var b={};b.id=a.id?a.id:a.srcNodeRef&&a.srcNodeRef.id||e.getUniqueId(this.declaredClass.replace(/\./g,"_"));delete a.id;a.srcNodeRef&&(b.srcNodeRef=a.srcNodeRef,delete a.srcNodeRef);
return k.mixin(this.inherited(arguments),b)},normalizeCtorArgs:function(a,b){a=a||{};if(b=a.container||a.srcNodeRef||b)a.srcNodeRef=h.byId(b);return a},destroy:function(){this._customWidgetBaseDestroy()},postMixInProperties:f.prototype.postMixInProperties,buildRendering:f.prototype.buildRendering,postCreate:f.prototype.postCreate,startup:f.prototype.startup,_beingDestroyed:!1,_destroyed:!1,_created:!1,properties:{autoStart:!0,"class":{value:"",set:{node:"domNode",type:"class"}},domNode:{value:null},
focused:!1,id:{value:""},srcNodeRef:{value:null},style:{value:null,set:f.prototype._setStyleAttr},widgetId:{}},destroyDescendants:f.prototype.destroyDescendants,destroyRecursive:f.prototype.destroyRecursive,destroyRendering:f.prototype.destroyRendering,emit:f.prototype.emit,on:function(a,b){return this.own(q(this.domNode,a,b))[0]},toString:f.prototype.toString,getChildren:f.prototype.getChildren,getParent:f.prototype.getParent,isLeftToRight:f.prototype.isLeftToRight,placeAt:f.prototype.placeAt,onFocus:function(){},
onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()},dojoAttachEvent:"",dojoAttachPoint:"",_customWidgetBaseDestroy:function(a){function b(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.domNode&&e.findWidgets(this.domNode,this.containerNode).forEach(b);this.destroyRendering(a);e.remove(this.id);this._destroyed=!0}}).createSubclass({declaredClass:"esri.widgets.Widgette",getDefaults:function(){return k.mixin(this.inherited(arguments),
{viewModel:{}})},buildRendering:function(){this.inherited(arguments);p.add(this.domNode,"esri-widget")},destroy:function(){this.viewModel.destroy&&this.viewModel.destroy();this.viewModel=null},properties:{container:{get:function(){return this._created?this.domNode:this._get("container")},set:function(a){var b=this._get("container");this._created||b||!a||this._set("container",h.byId(a))}},viewModel:{value:null},visible:{value:!0,set:function(a){this._set("visible",a);p.toggle(this.domNode,"esri-hidden",
!a)}}}})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/HandleRegistry ../../core/promiseUtils ../../core/watchUtils ../../geometry/support/webMercatorUtils ../../geometry/Point ../../support/Action dojo/fx/easing dojo/_base/lang".split(" "),function(l,m,g,f,a,e,k,d,c,h,b,p){var q={id:"zoom-to"};return l.createSubclass([f],{declaredClass:"esri.widgets.Popup.PopupViewModel",properties:{actions:{type:m.ofType(h)},
animationOptions:{},content:{},featureCount:{readOnly:!0},features:{},location:{type:c},pendingPromisesCount:{readOnly:!0},promises:{},selectedFeature:{readOnly:!0},selectedFeatureIndex:{},state:{dependsOn:["view.ready"],readOnly:!0},title:{},updateLocationEnabled:{},view:{},waitingForResult:{dependsOn:["pendingPromisesCount","featureCount"],readOnly:!0},zoomFactor:{},zoomScale:{readOnly:!0}},_handles:null,constructor:function(){this._handles=new a},getDefaults:function(a){return p.mixin(this.inherited(arguments),
{actions:[q],animationOptions:{duration:300,easing:b.quadInOut},promises:[]})},initialize:function(){this._handles.add(k.init(this,"view.scale",this._scaleWatcher))},destroy:function(){this._handles.destroy();this.view=this._handles=null},actions:[q],animationOptions:{duration:300,easing:b.quadInOut},content:null,featureCount:0,features:null,_featuresSetter:function(a){this._set("features",a);this._updateFeatureCount(a);this.pendingPromisesCount||(this.selectedFeatureIndex=-1,a.length&&(this.selectedFeatureIndex=
0))},location:null,_locationSetter:function(a){var b=this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&b&&(a=d.geographicToWebMercator(a));this._set("location",a)},pendingPromisesCount:0,waitingForResult:!1,_waitingForResultGetter:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},promises:[],_promisesSetter:function(a){var b=this._get("promises");b&&b.forEach(function(a){a.cancel()});this.features=[];this._set("pendingPromisesCount",0);this._set("promises",
a);a&&a.length&&(this._set("pendingPromisesCount",a.length),a=a.slice(0),a.forEach(function(a){a.always(function(b){a.isCanceled()||(this._set("pendingPromisesCount",this.pendingPromisesCount-1),this._updateFeatures(a,b))}.bind(this))},this))},selectedFeature:null,selectedFeatureIndex:-1,_selectedFeatureIndexSetter:function(a){if(isNaN(a)||-1>a)a=-1;var b=null,c=this.features;c&&c.length&&(a=(a+c.length)%c.length,b=c[a]);this._set("selectedFeature",b);this._set("selectedFeatureIndex",a);this._selectedFeatureChange(b,
this.updateLocationEnabled)},state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},title:null,updateLocationEnabled:!1,_updateLocationEnabledSetter:function(a){this._selectedFeatureChange(this.selectedFeature,a);this._set("updateLocationEnabled",a)},view:null,zoomFactor:4,_zoomFactorSetter:function(a){var b=this.view;b&&null!=b.scale&&this._setZoomScale(b.scale,a);this._set("zoomFactor",a)},zoomScale:0,centerAtLocation:function(){return this.location&&this.view?
this.view.goTo({target:this.location,scale:this.view.scale},this.animationOptions):e.reject(new g(this.declaredClass+"::Cannot center at location without a location and view."))},clear:function(){this.set({promises:[],features:[],content:null,title:null,location:null})},triggerAction:function(a){(a=this.actions.getItemAt(a))&&this.emit("trigger-action",{action:a})},next:function(){this.selectedFeatureIndex+=1;return this},previous:function(){--this.selectedFeatureIndex;return this},zoomToLocation:function(){var a=
this.view,b=this.location,c=this.zoomScale;if(!b||!a)return e.reject(new g(this.declaredClass+"::Cannot zoom to location without a location and view."));var d=this.selectedFeature,h=d&&d.geometry,k=d&&"3d"===a.type;h||k?(b={target:d},h&&"point"===h.type&&this._isScreenSize(d)&&(b.scale=c,this.location=h)):b={target:b,scale:c};return a.goTo(b,this.animationOptions)},_isScreenSize:function(a){if("3d"!==this.view.type||"esri.Graphic"!==a.declaredClass)return!0;var b=!0,c=this.view.getViewForGraphic(a);
c&&c.whenGraphicBounds&&c.whenGraphicBounds(a).then(function(a){b=!a||a[0]===a[3]&&a[1]===a[4]&&a[2]===a[5]});return b},_getSelectedFeatureActions:function(){this._originalActions&&(this.actions=this._originalActions,this._originalActions=null);var a=this.actions.filter(function(a){return!a.temporary},this),b=a,c=this.selectedFeature.getEffectivePopupTemplate();if(c&&c.actions){for(var b=c.actions,d=0;d<b.length;d++)b.getItemAt(d).temporary=!0;c.overwriteActions?this._originalActions=a:b=a.concat(b)}this.actions=
b},_scaleWatcher:function(a){null!=a&&this._setZoomScale(a,this.zoomFactor)},_getPointFromGeometry:function(a){switch(a&&a.type){case "point":return a;case "extent":return a.center;case "polygon":return a.centroid;case "multipoint":case "polyline":return a.extent.center;default:return null}},_selectedFeatureChange:function(a,b){a&&(b&&(this.location=this._getPointFromGeometry(this.selectedFeature.geometry)),this._getSelectedFeatureActions())},_updateFeatureCount:function(a){var b=0;a&&a.length&&(b=
a.length);this._set("featureCount",b)},_setZoomScale:function(a,b){this._set("zoomScale",a/b)},_updateFeatures:function(a,b){a&&this.promises&&!(!this._validatePromise(a)||b instanceof g||b instanceof Error)&&b&&b.length&&(a={},this.features&&this.features.length?(b=b.filter(function(a){return-1===this.features.indexOf(a)},this),a.features=this.features.concat(b)):(a.features=b,a.selectedFeatureIndex=0),this.set(a))},_validatePromise:function(a){return-1<this.promises.indexOf(a)}})})},"dojo/fx/easing":function(){define(["../_base/lang"],
function(l){var m={linear:function(g){return g},quadIn:function(g){return Math.pow(g,2)},quadOut:function(g){return g*(g-2)*-1},quadInOut:function(g){g*=2;return 1>g?Math.pow(g,2)/2:-1*(--g*(g-2)-1)/2},cubicIn:function(g){return Math.pow(g,3)},cubicOut:function(g){return Math.pow(g-1,3)+1},cubicInOut:function(g){g*=2;return 1>g?Math.pow(g,3)/2:(Math.pow(g-2,3)+2)/2},quartIn:function(g){return Math.pow(g,4)},quartOut:function(g){return-1*(Math.pow(g-1,4)-1)},quartInOut:function(g){g*=2;return 1>g?
Math.pow(g,4)/2:-.5*(Math.pow(g-2,4)-2)},quintIn:function(g){return Math.pow(g,5)},quintOut:function(g){return Math.pow(g-1,5)+1},quintInOut:function(g){g*=2;return 1>g?Math.pow(g,5)/2:(Math.pow(g-2,5)+2)/2},sineIn:function(g){return-1*Math.cos(Math.PI/2*g)+1},sineOut:function(g){return Math.sin(Math.PI/2*g)},sineInOut:function(g){return-1*(Math.cos(Math.PI*g)-1)/2},expoIn:function(g){return 0==g?0:Math.pow(2,10*(g-1))},expoOut:function(g){return 1==g?1:-1*Math.pow(2,-10*g)+1},expoInOut:function(g){if(0==
g)return 0;if(1==g)return 1;g*=2;if(1>g)return Math.pow(2,10*(g-1))/2;--g;return(-1*Math.pow(2,-10*g)+2)/2},circIn:function(g){return-1*(Math.sqrt(1-Math.pow(g,2))-1)},circOut:function(g){return Math.sqrt(1-Math.pow(g-1,2))},circInOut:function(g){g*=2;return 1>g?-.5*(Math.sqrt(1-Math.pow(g,2))-1):.5*(Math.sqrt(1-Math.pow(g-2,2))+1)},backIn:function(g){return Math.pow(g,2)*(2.70158*g-1.70158)},backOut:function(g){--g;return Math.pow(g,2)*(2.70158*g+1.70158)+1},backInOut:function(g){g*=2;if(1>g)return Math.pow(g,
2)*(3.5949095*g-2.5949095)/2;g-=2;return(Math.pow(g,2)*(3.5949095*g+2.5949095)+2)/2},elasticIn:function(g){if(0==g||1==g)return g;--g;return-1*Math.pow(2,10*g)*Math.sin(2*(g-.075)*Math.PI/.3)},elasticOut:function(g){return 0==g||1==g?g:Math.pow(2,-10*g)*Math.sin(2*(g-.075)*Math.PI/.3)+1},elasticInOut:function(g){if(0==g)return 0;g*=2;if(2==g)return 1;var f=.3*1.5,a=f/4;if(1>g)return--g,-.5*Math.pow(2,10*g)*Math.sin(2*(g-a)*Math.PI/f);--g;return.5*Math.pow(2,-10*g)*Math.sin(2*(g-a)*Math.PI/f)+1},bounceIn:function(g){return 1-
m.bounceOut(1-g)},bounceOut:function(g){return g<1/2.75?7.5625*Math.pow(g,2):g<2/2.75?7.5625*Math.pow(g-1.5/2.75,2)+.75:g<2.5/2.75?7.5625*Math.pow(g-2.25/2.75,2)+.9375:7.5625*Math.pow(g-2.625/2.75,2)+.984375},bounceInOut:function(g){return.5>g?m.bounceIn(2*g)/2:m.bounceOut(2*g-1)/2+.5}};l.setObject("dojo.fx.easing",m);return m})},"esri/widgets/Popup/PopupRenderer":function(){define("require ../Widgette ./PopupRendererViewModel ../../core/requireUtils ../../core/watchUtils dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/on dijit/_TemplatedMixin dijit/a11yclick dojo/i18n!./nls/PopupRenderer dojo/text!./templates/PopupRenderer.html".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q,t){var r={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",iconDownload:"esri-icon-download",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconMedia:"esri-icon-media",iconChart:"esri-icon-chart",base:"esri-popup-renderer",container:"esri-popup-renderer__size-container",main:"esri-popup-renderer__main-container",btn:"esri-popup-renderer__button",icon:"esri-popup-renderer__icon",
content:"esri-popup-renderer__content",contentElement:"esri-popup-renderer__content-element",text:"esri-popup-renderer__text",showMediaPagination:"esri-popup-renderer--media-pagination-visible",attachments:"esri-popup-renderer__attachments",attachmentsTitle:"esri-popup-renderer__attachments-title",attachmentsItem:"esri-popup-renderer__attachments-item",attachmentsItemIcon:"esri-popup-renderer__attachments-item-icon",fields:"esri-popup-renderer__fields",fieldHeader:"esri-popup-renderer__field-header",
fieldData:"esri-popup-renderer__field-data",fieldDataDate:"esri-popup-renderer__field-data--date",media:"esri-popup-renderer__media",mediaContainer:"esri-popup-renderer__media-container",mediaItemContainer:"esri-popup-renderer__media-item-container",mediaItem:"esri-popup-renderer__media-item",mediaItemTitle:"esri-popup-renderer__media-item-title",mediaItemCaption:"esri-popup-renderer__media-item-caption",mediaPrevious:"esri-popup-renderer__media-previous",mediaPreviousIconLTR:"esri-popup-renderer__media-previous-icon",
mediaPreviousIconRTL:"esri-popup-renderer__media-previous-icon--rtl",mediaNext:"esri-popup-renderer__media-next",mediaNextIconLTR:"esri-popup-renderer__media-next-icon",mediaNextIconRTL:"esri-popup-renderer__media-next-icon--rtl",mediaSummary:"esri-popup-renderer__media-summary",mediaCount:"esri-popup-renderer__media-count",mediaImageSummary:"esri-popup-renderer__media-image-summary",mediaImageIcon:"esri-popup-renderer__media-image-icon",mediaChart:"esri-popup-renderer__media-chart",mediaChartSummary:"esri-popup-renderer__media-chart-summary",
mediaChartIcon:"esri-popup-renderer__media-chart-icon",loading:"esri-popup-renderer__loading",loadingSpinnerContainer:"esri-popup-renderer__loading-container",spinner:"esri-popup-renderer__loading-spinner"},w=/^\s*(https?:\/\/[^\s]+)\s*$/i;return m.createSubclass([b],{declaredClass:"esri.widgets.Popup.PopupRenderer",templateString:t,baseClass:r.base,constructor:function(){this._charts=[];this._chartTooltips=[]},postCreate:function(){this.inherited(arguments);var b=this;this.own(a.init(this,"viewModel.waitingForContent",
this._loadingSpinner.bind(this)),a.init(this,"viewModel.graphic",this._graphicChanged.bind(this)),a.init(this,"viewModel.content",this._render.bind(this)),h(this._contentNode,h.selector("."+r.mediaNext,p),function(){b._nextMedia(this)}),h(this._contentNode,h.selector("."+r.mediaPrevious,p),function(){b._previousMedia(this)}))},destroy:function(){this._destroyCharts();this._clearResizeTimer()},properties:{viewModel:{type:g},rendered:{readOnly:!0,value:!1}},_i18n:q,_css:r,resize:function(){this._resizeCharts();
this.emit("resize")},_clearResizeTimer:function(){this._mediaResizeTimer&&(clearTimeout(this._mediaResizeTimer),this._mediaResizeTimer=0)},_countMediaInfos:function(a){var b=0,c=0;a.forEach(function(a){"image"===a.type?b++:-1!==a.type.indexOf("chart")&&c++});return{total:c+b,images:b,charts:c}},_createMediaNodes:function(a){this._destroyCharts();var b=a.mediaIndex,d=a.mediaInfos[b];a=a.node;c.empty(a);var e=c.create("div",{className:r.mediaItem},a),b=this._createMediaType(d,b);c.place(b,e,"only");
d.title&&c.create("div",{className:r.mediaItemTitle,innerHTML:d.title},a);d.caption&&c.create("div",{className:r.mediaItemCaption,innerHTML:d.caption},a);this._clearResizeTimer();this._mediaResizeTimer=setTimeout(function(){this.resize();this._clearResizeTimer()}.bind(this),0)},_createMediaType:function(a,b){b=a.value;var d;if("image"===a.type){var e=c.create("img",{alt:a.title||"",src:b.sourceURL});b.linkURL?(d=c.create("a",{title:a.title||"",href:b.linkURL,target:this._preventNewTab(b.linkURL)?
"":"_blank"}),c.place(e,d)):d=e}else-1!==a.type.indexOf("chart")&&(d=c.create("div",{className:r.mediaChart},d),b=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],e=a.value.theme||this.chartTheme,"string"===typeof e&&(e=e.replace(/\./gi,"/"),-1===e.indexOf("/")&&(e="dojox/charting/themes/"+e)),e||(e="dojox/charting/themes/Claro"),b.push(e),this._cancelChartModules(),this._chartsPromise=f.when(l,b).then(function(b){this._showChart(d,a.type,a.value,b[0],b[1],b[2]);this._chartsPromise=null}.bind(this)));
return d},_cancelChartModules:function(){this._chartsPromise&&this._chartsPromise.cancel()},_destroyCharts:function(){this._cancelChartModules();var a;if(this._chartTooltips&&this._chartTooltips.length)for(a=0;a<this._chartTooltips.length;a++)this._chartTooltips[a].destroy();this._chartTooltips.length=0;if(this._charts&&this._charts.length)for(a=0;a<this._charts.length;a++)this._charts[a].destroy();this._charts.length=0},_graphicChanged:function(){this._set("rendered",!1)},_loadingSpinner:function(a){d.toggle(this.domNode,
r.loading,!!a)},_nextMedia:function(a){this._pageMedia(a,"next")},_pageMedia:function(a,b){var c;if(a=k.get(a,"data-element-index"))c=parseInt(a,10),c=this._elementInfo[c];if(c){a=c.mediaInfos;var d=c.mediaIndex;"previous"===b?d--:d++;a&&a.length&&(d=(d+a.length)%a.length);c.mediaIndex=d;this._createMediaNodes(c)}},_preventNewTab:function(a){return(a=a&&e.trim(a).toLowerCase())&&(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_previousMedia:function(a){this._pageMedia(a,"previous")},_render:function(a){this._elementInfo=
[];this._destroyCharts();c.empty(this._contentNode);var b=this.viewModel;a&&("string"===typeof a?(a=this._renderText({type:"text",text:a}))&&c.place(a,this._contentNode,"only"):a.nodeName?c.place(a,this._contentNode,"only"):Array.isArray(a)&&a.forEach(function(a,d){var e;switch(a.type){case b.contentTypes.attachments:e=this._renderAttachments(a,d);break;case b.contentTypes.fields:e=this._renderFields(a,d);break;case b.contentTypes.media:e=this._renderMedia(a,d);break;case b.contentTypes.text:e=this._renderText(a,
d)}e&&c.place(e,this._contentNode,0===d?"only":"last")},this));this.resize();setTimeout(function(){this._set("rendered",!0)}.bind(this),0)},_renderAttachments:function(a,b){var e;if((a=a.attachmentInfos)&&a.length){e=c.create("div");d.add(e,[r.attachments,r.contentElement]);c.create("div",{className:r.attachmentsTitle,textContent:q.attach},e);var h=c.create("ul",{},e);a.forEach(function(a){var b=c.create("li",{},h),b=c.create("a",{href:a.url,target:"_blank"},b);c.create("span",{className:r.iconDownload+
" "+r.attachmentsItemIcon},b);c.create("span",{className:r.attachmentsItem,textContent:a.name||q.noTitle},b)},this)}return e},_renderFields:function(a,b){var e=this.viewModel,h,k=e.graphic.getEffectivePopupTemplate();if(a=a.fieldInfos||k&&k.fieldInfos){var f=e.formattedAttributes.content[b]||e.formattedAttributes.global;h=c.create("div");d.add(h,[r.fields,r.contentElement]);b=c.create("table",{summary:q.fieldsSummary},h);var g=c.create("tbody",{},b);a.forEach(function(a){if(a.hasOwnProperty("visible")?
a.visible:1){var b=a.fieldName,e=a.label||b,b=f[b]||"",h;a=a.format&&a.format.dateFormat;b&&"string"===typeof b&&(h=b.replace(w,'\x3ca target\x3d"_blank" href\x3d"$1" title\x3d"'+e+'"\x3e'+q.view+"\x3c/a\x3e"));var k=c.create("tr",{},g),p=e,n=b;h&&h!==b&&(p=e,n=h);c.create("th",{className:r.fieldHeader,innerHTML:p},k);e=c.create("td",{className:r.fieldData,innerHTML:n},k);a&&d.add(e,r.fieldDataDate)}},this)}return h},_renderMedia:function(a,b){var h,k=a.mediaInfos;if(k&&k.length){var f=this._countMediaInfos(k);
a={tabIndex:"0",role:"button"};a["data-element-index"]=b;h=c.create("div");d.add(h,[r.media,r.contentElement]);d.toggle(h,r.showMediaPagination,1<f.total);var g=c.create("ul",{className:r.mediaSummary},h),p=c.create("li",{className:r.mediaImageSummary},g);c.create("span",{className:r.mediaCount,"aria-label":q.numImages,textContent:"("+f.images+")"},p);c.create("span",{"aria-hidden":!0,className:r.mediaImageIcon+" "+r.iconMedia},p);g=c.create("li",{className:r.mediaImageSummary},g);c.create("span",
{className:r.mediaCount,"aria-label":q.numCharts,textContent:"("+f.charts+")"},g);c.create("span",{"aria-hidden":!0,className:r.mediaChartIcon+" "+r.iconChart},g);f=c.create("div",{className:r.mediaContainer},h);g=c.create("div",e.mixin({title:q.previous},a),f);d.add(g,[r.btn,r.mediaPrevious]);p=c.create("span",{"aria-hidden":!0},g);d.add(p,[r.icon,r.mediaPreviousIconLTR,r.iconLeftTriangleArrow]);p=c.create("span",{"aria-hidden":!0},g);d.add(p,[r.icon,r.mediaPreviousIconRTL,r.iconRightTriangleArrow]);
c.create("span",{className:r.iconText,textContent:q.previous},g);k={mediaIndex:0,node:c.create("div",{className:r.mediaItemContainer},f),mediaInfos:k};this._elementInfo[b]=k;this._createMediaNodes(k);b=c.create("div",e.mixin({title:q.next},a),f);d.add(b,[r.btn,r.mediaNext]);a=c.create("span",{"aria-hidden":!0},b);d.add(a,[r.icon,r.mediaNextIconLTR,r.iconRightTriangleArrow]);a=c.create("span",{"aria-hidden":!0},b);d.add(a,[r.icon,r.mediaNextIconRTL,r.iconLeftTriangleArrow]);c.create("span",{className:r.iconText,
textContent:q.next},b)}return h},_renderText:function(a,b){var e;a&&a.text&&(e=c.create("div",{innerHTML:a.text}),d.add(e,[r.text,r.contentElement]));return e},_resizeCharts:function(){if(this._charts&&this._charts.length)for(var a=0;a<this._charts.length;a++){var b=this._charts[a],c=b.node;c&&c.offsetWidth&&c.offsetHeight&&b.resize()}},_showChart:function(a,b,c,d,e,h){a=new d(a,{margins:{l:4,t:4,r:4,b:4}});h&&a.setTheme(h);switch(b){case "pie-chart":a.addPlot("default",{type:"Pie",labels:!1});a.addSeries("Series A",
c.fields);break;case "line-chart":a.addPlot("default",{type:"Markers"});a.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});c.fields.forEach(function(a,b){a.x=b+1});a.addSeries("Series A",c.fields);break;case "column-chart":a.addPlot("default",{type:"Columns",gap:3});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});a.addSeries("Series A",c.fields);break;case "bar-chart":a.addPlot("default",{type:"Bars",
gap:3}),a.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),a.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),a.addSeries("Series A",c.fields)}b=new e(a);a.render();this._charts.push(a);this._chartTooltips.push(b)}})})},"esri/widgets/Spinner":function(){define(["./Widgette","./support/AnchorElementViewModel","dojo/i18n!./Spinner/nls/Spinner","dojo/dom-class","dojo/dom-style"],function(l,m,g,f,a){var e={base:"esri-spinner",visible:"esri-spinner--visible",
spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};return l.createSubclass({properties:{viewModel:{type:m}},declaredClass:"esri.widgets.Spinner",baseClass:e.base,postCreate:function(){this.inherited(arguments);this.own(this.viewModel.watch("point",function(a){this._setDomClasses(a)}.bind(this)),this.viewModel.watch("screenPoint",function(a){this._positionDomNode(a)}.bind(this)))},destroy:function(){this._clearTimeout()},_css:e,_i18n:g,animationDelay:500,visible:!0,_setVisibleAttr:function(a){this._set("visible",
a);this._visibleChange()},_clearTimeout:function(){this._resetTimeout&&clearTimeout(this._resetTimeout)},_setDomClasses:function(a){this.visible&&a?(f.remove(this.domNode,e.spinnerStart),f.remove(this.domNode,e.spinnerFinish),this.domNode.offsetWidth=this.domNode.offsetWidth,f.add(this.domNode,e.spinnerStart)):this.visible&&!a?f.add(this.domNode,e.spinnerFinish):(f.remove(this.domNode,e.spinnerStart),f.remove(this.domNode,e.spinnerFinish))},_positionDomNode:function(e){e?a.set(this.domNode,{left:e.x+
"px",top:e.y+"px"}):(this._clearTimeout(),this._resetTimeout=setTimeout(function(){a.set(this.domNode,{left:"",top:""});this._resetTimeout=0}.bind(this),this.animationDelay))},_visibleChange:function(){f.toggle(this.domNode,e.visible,this.visible)}})})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ../../core/Accessor ../../core/HandleRegistry".split(" "),
function(l,m,g,f,a,e,k,d){l=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._handles=new d;b.screenPoint=null;b.state="disabled";return b}g(c,a);c.prototype.destroy=function(){this._viewReady&&this._viewReady.cancel();this.view=null;this._handles.destroy();this._viewWatch=this._handles=null};Object.defineProperty(c.prototype,"point",{set:function(a){this._viewControl(a);this._createScreenPoint(a,this.view);this._set("point",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"view",{set:function(a){var b=this;this._handles&&(this._handles.remove("viewHandles"),this._viewWatch=null);this._viewReady&&this._viewReady.cancel();this._set("state","disabled");a&&(this._viewReady=a.then(function(){b._set("state","ready");var c="viewpoint";"3d"===a.type&&(c="camera");b._viewWatch=e.pausable(a,c,function(){b._createScreenPoint(b.point,b.view)});b._handles.add(b._viewWatch,"viewHandles");b._viewControl(b.point)}));this._set("view",a)},enumerable:!0,configurable:!0});c.prototype._viewControl=
function(a){this._viewWatch&&(a?this._viewWatch.resume():this._viewWatch.pause())};c.prototype._createScreenPoint=function(a,c){this.screenPoint=a?c.toScreen(a.x,a.y,a.z):null};return c}(a.declared(k));f([a.property()],l.prototype,"point",null);f([a.property()],l.prototype,"screenPoint",void 0);f([a.property({readOnly:!0})],l.prototype,"state",void 0);f([a.property()],l.prototype,"view",null);return l=f([a.subclass("esri.widgets.support.AnchorElementViewModel")],l)})},"esri/widgets/Message":function(){define(["./Widgette",
"./support/AnchorElementViewModel","dojo/dom-class","dojo/dom-construct","dojo/dom-style"],function(l,m,g,f,a){var e={base:"esri-message",visible:"esri-message--visible",text:"esri-message__text",messageFadeIn:"esri-message--fade-in"};return l.createSubclass({properties:{viewModel:{type:m}},declaredClass:"esri.widgets.Message",baseClass:e.base,constructor:function(){this._text=f.create("span",{className:e.text})},postCreate:function(){this.inherited(arguments);f.place(this._text,this.domNode);this.own(this.viewModel.watch("point",
function(a){this._setDomClasses(a)}.bind(this)),this.viewModel.watch("screenPoint",function(a){this._positionDomNode(a)}.bind(this)))},destroy:function(){this._clearTimeout()},_css:e,animationDelay:3E3,visible:!0,_setVisibleAttr:function(a){this._set("visible",a);this._visibleChange()},text:"",_setTextAttr:{node:"_text",type:"innerText"},_clearTimeout:function(){this._resetTimeout&&(clearTimeout(this._resetTimeout),this._resetTimeout=0)},_setDomClasses:function(a){this._clearTimeout();g.remove(this.domNode,
e.messageFadeIn);this.domNode.offsetWidth=this.domNode.offsetWidth;a&&(g.add(this.domNode,e.messageFadeIn),this._resetTimeout=setTimeout(function(){this.viewModel.point=null;this._resetTimeout=0}.bind(this),this.animationDelay))},_positionDomNode:function(e){e?a.set(this.domNode,{left:e.x+"px",top:e.y+"px"}):a.set(this.domNode,{left:"",top:""})},_visibleChange:function(){g.toggle(this.domNode,e.visible,this.visible)}})})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ./UI ./Component ../../widgets/Attribution ../../widgets/Compass ../../widgets/Zoom ../../widgets/NavigationToggle dojo/dom-geometry".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q){l=function(a){function k(b){b=a.call(this)||this;b._defaultPositionLookup=null;b.components=[];return b}g(k,a);k.prototype.initialize=function(){this._handles.add([e.init(this,"components",this._componentsWatcher.bind(this)),e.init(this,"view",this._updateViewAwareWidgets.bind(this))])};k.prototype._findComponentPosition=function(a){if(!this._defaultPositionLookup){var b=q.isBodyLtr();this._defaultPositionLookup={attribution:"manual",compass:b?"top-left":"top-right",
"navigation-toggle":b?"top-left":"top-right",zoom:b?"top-left":"top-right"}}return this._defaultPositionLookup[a]};k.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b.find(a))b.remove(a),a.destroy()})};k.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b.find(c))&&c.widget)&&void 0!==c.view&&c.set("view",a)})};k.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a)};k.prototype._addComponents=
function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),b._findComponentPosition(a))})};k.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new d({id:a,node:b})};k.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};k.prototype._createAttribution=
function(){return new c({view:this.view})};k.prototype._createCompass=function(){return new h({view:this.view})};k.prototype._createNavigationToggle=function(){return new p({view:this.view})};k.prototype._createZoom=function(){return new b({view:this.view})};return k}(a.declared(k));f([a.property()],l.prototype,"components",void 0);return l=f([a.subclass("esri.views.ui.DefaultUI")],l)})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Component ../../core/Accessor ../../core/HandleRegistry ../../core/watchUtils dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q){function t(a){return"object"!==typeof a||a&&a.isInstanceOf&&a.isInstanceOf(e)||!("component"in a||"index"in a||"position"in a)?null:a}var r={left:0,top:0,bottom:0,right:0},w={bottom:30,top:15,right:15,left:15};l=function(a){function k(){var b=a.call(this)||this;b._cornerNameToContainerLookup={};b._positionNameToContainerLookup={};b._components=[];b._handles=new d;b.padding=w;b.view=null;b._initContainers();return b}g(k,a);k.prototype.initialize=function(){this._handles.add([c.init(this,
"view.padding, container",this._applyViewPadding.bind(this)),c.init(this,"padding",this._applyUIPadding.bind(this))])};k.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy()};Object.defineProperty(k.prototype,"container",{set:function(a){var c=this._get("container");a!==c&&(a&&(b.add(a,"esri-ui"),this._attachContainers(a)),c&&(b.remove(c,"esri-ui"),q.set(c,{top:"",bottom:"",left:"",right:""}),p.empty(c)),
this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});k.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:h.mixin({},w,a)};Object.defineProperty(k.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();
return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});k.prototype.add=function(a,b){var c=this,d;if(Array.isArray(a))a.forEach(function(a){return c.add(a,b)});else{var h=t(a);h&&(d=h.index,b=h.position,a=h.component);b&&"object"===typeof b&&(d=b.index,b=b.position);!a||b&&!this._isValidPosition(b)||(a&&a.isInstanceOf&&a.isInstanceOf(e)||(a=new e({node:a})),this._place({component:a,position:b,index:d}),this._components.push(a))}};k.prototype.remove=function(a){if(a){if(Array.isArray(a))return a.map(this.remove,
this);if(a=this.find(a)){var b=this._components.indexOf(a);a.node.parentNode&&a.node.parentNode.removeChild(a.node);return this._components.splice(b,1)[0]}}};k.prototype.empty=function(a){var c=this;if(Array.isArray(a))return a.map(function(a){return c.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!b.contains(a,"esri-ui-corner")}).map(function(a){return c.remove(a)});if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this)};k.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var d,e=t(a)||t(b);e&&(d=e.index,b=e.position,a=e.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};k.prototype.find=function(a){return a?a&&a.isInstanceOf&&a.isInstanceOf(e)?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||a):null};k.prototype._getViewPadding=function(){return this.get("view.padding")||
r};k.prototype._attachContainers=function(a){p.place(this._manualContainer,a);p.place(this._innerContainer,a)};k.prototype._initContainers=function(){var a=p.create("div",{className:"esri-ui-inner-container esri-ui-corner-container"}),b=p.create("div",{className:"esri-ui-inner-container esri-ui-manual-container"}),c=p.create("div",{className:"esri-ui-top-left esri-ui-corner"},a),d=p.create("div",{className:"esri-ui-top-right esri-ui-corner"},a),e=p.create("div",{className:"esri-ui-bottom-left esri-ui-corner"},
a),k=p.create("div",{className:"esri-ui-bottom-right esri-ui-corner"},a);this._innerContainer=a;this._manualContainer=b;this._cornerNameToContainerLookup={"top-left":c,"top-right":d,"bottom-left":e,"bottom-right":k};this._positionNameToContainerLookup=h.mixin({manual:b},this._cornerNameToContainerLookup)};k.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};k.prototype._place=function(a){var b=a.component,c=a.index;a=this._positionNameToContainerLookup[a.position||
"manual"];var d;-1<c?(d=Array.prototype.slice.call(a.children),0===c?this._placeComponent(b,a,"first"):c>=d.length?this._placeComponent(b,a,"last"):this._placeComponent(b,d[c],"before")):this._placeComponent(b,a,"last")};k.prototype._placeComponent=function(a,b,c){var d=a.widget;d&&!d._started&&"function"===typeof d.postMixInProperties&&"function"===typeof d.buildRendering&&"function"===typeof d.postCreate&&"function"===typeof d.startup&&a.widget.startup();p.place(a.node,b,c)};k.prototype._applyViewPadding=
function(){var a=this.container;a&&q.set(a,this._toPxPosition(this._getViewPadding()))};k.prototype._applyUIPadding=function(){this._innerContainer&&q.set(this._innerContainer,this._toPxPosition(this.padding))};k.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};k.prototype._toPxUnit=function(a){return 0===a?0:a+"px"};k.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(d){(c=
d===a)&&(b=d);return c});return b};k.prototype._findById=function(a){var b=null,c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};k.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};return k}(a.declared(k));f([a.property()],l.prototype,"container",null);f([a.property()],l.prototype,"height",null);f([a.property()],l.prototype,"padding",void 0);f([a.cast("padding")],l.prototype,"castPadding",null);f([a.property()],
l.prototype,"view",void 0);f([a.property()],l.prototype,"width",null);return l=f([a.subclass("esri.views.ui.UI")],l)})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor dojo/dom dojo/dom-class".split(" "),function(l,m,g,f,a,e,k,d){l=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.widget=null;return b}g(c,a);c.prototype.destroy=
function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(c.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"node",{set:function(a){var b=this._get("node");a!==b&&(a&&d.add(a,"esri-component"),b&&d.remove(b,"esri-component"),this._set("node",a))},enumerable:!0,configurable:!0});c.prototype.castNode=function(a){if(!a)return this._set("widget",null),
null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),k.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};return c}(a.declared(e));f([a.property()],l.prototype,"id",null);f([a.property()],l.prototype,"node",null);f([a.cast("node")],l.prototype,"castNode",null);f([a.property({readOnly:!0})],l.prototype,"widget",void 0);return l=f([a.subclass("esri.views.ui.Component")],l)})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Attribution/AttributionViewModel".split(" "),
function(l,m,g,f,a,e,k,d,c){l=function(a){function b(b){b=a.call(this)||this;b._isOpen=!1;b._attributionTextOverflowed=!1;b._prevSourceNodeHeight=0;b.view=null;b.viewModel=new c;return b}f(b,a);b.prototype.render=function(){var a=(b={},b["esri-attribution--open"]=this._isOpen,b);return k.jsxFactory.createElement("div",{bind:this,class:"esri-attribution esri-widget",classes:a,onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),k.jsxFactory.createElement("div",{class:"esri-attribution__powered-by"},
"Powered by ",k.jsxFactory.createElement("a",{target:"_blank",href:"http://www.esri.com/",class:"esri-attribution__link"},"Esri")));var b};b.prototype._renderSourcesNode=function(){var a=this._isOpen,b=this._isInteractive(),c=b?0:-1,d=this.get("viewModel.attributionText"),a=(e={},e["esri-attribution__sources--open"]=a,e["esri-interactive"]=b,e),c={afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:"esri-attribution__sources",classes:a,key:b?"interactive":
"non-interactive",tabIndex:c};b&&(c.role="button");return k.jsxFactory.createElement("div",g({},c),d);var e};b.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};b.prototype._afterSourcesNodeUpdate=function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.renderNow()};
b.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};b.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};return b}(e.declared(d));a([e.aliasOf("viewModel.view")],l.prototype,"view",void 0);a([e.property({type:c}),k.renderable(["attributionText","state","view.size"])],l.prototype,"viewModel",void 0);a([k.accessibleHandler()],l.prototype,"_toggleState",null);return l=a([e.subclass("esri.widgets.Attribution")],l)})},"esri/core/tsSupport/assignHelper":function(){define([],
function(){return Object.assign||function(l){for(var m,g=1,f=arguments.length;g<f;g++){m=arguments[g];for(var a in m)Object.prototype.hasOwnProperty.call(m,a)&&(l[a]=m[a])}return l}})},"esri/widgets/support/widget":function(){define(["require","exports","./decorators","./jsxFactory","./widgetUtils"],function(l,m,g,f,a){function e(a){for(var d in a)m.hasOwnProperty(d)||(m[d]=a[d])}e(g);e(f);e(a)})},"esri/widgets/support/decorators":function(){define("require exports ./decorators/accessibleHandler ./decorators/renderable ./decorators/triggerWithSpaceOrEnter ./decorators/vmEvent ./decorators/vmMethod ./decorators/vmProperty".split(" "),
function(l,m,g,f,a,e,k,d){function c(a){for(var b in a)m.hasOwnProperty(b)||(m[b]=a[b])}c(g);c(f);c(a);c(e);c(k);c(d)})},"esri/widgets/support/decorators/accessibleHandler":function(){define(["require","exports","dojo/keys"],function(l,m,g){function f(a){return function(e){for(var k=[],d=1;d<arguments.length;d++)k[d-1]=arguments[d];d=e.type;if(e instanceof KeyboardEvent||"keyup"===d||"keydown"===d||"keypress"===d){if(e.keyCode===g.ENTER||e.keyCode===g.SPACE)e.preventDefault(),e.target.click()}else a.call.apply(a,
[this,e].concat(k))}}m.accessibleHandler=function(){return function(a,e){return{value:f(a[e])}}}})},"esri/widgets/support/decorators/renderable":function(){define(["require","exports","./propUtils"],function(l,m,g){m.renderable=function(f){var a="string"===typeof f?g.splitProps(f):f;return function(e,k){e._renderableProps||(e._renderableProps=[]);e=e._renderableProps;a?e.push.apply(e,g.normalizePropNames(a,k)):e.push(k)}}})},"esri/widgets/support/decorators/propUtils":function(){define(["require",
"exports"],function(l,m){m.splitProps=function(g){return g.split(",").map(function(f){return f.trim()})};m.normalizePropNames=function(g,f){return g.map(function(a){a=0===a.indexOf(f)?a:f+"."+a;return a})}})},"esri/widgets/support/decorators/triggerWithSpaceOrEnter":function(){define(["require","exports","../../../core/Logger","./accessibleHandler"],function(l,m,g,f){m.triggerWithSpaceOrEnter=function(){g.getLogger("esri.widgets.support.decorators.triggerWithSpaceOrEnter").warn("@triggerWithSpaceOrEnter is deprecated, use @accessibleHandler instead.");
return f.accessibleHandler.apply(this,arguments)}})},"esri/widgets/support/decorators/vmEvent":function(){define(["require","exports","./propUtils"],function(l,m,g){m.vmEvent=function(f){return function(a){a._delegatedEventNames||(a._delegatedEventNames=[]);var e=Array.isArray(f)?f:g.splitProps(f);a._delegatedEventNames=a._delegatedEventNames.concat(e)}}})},"esri/widgets/support/decorators/vmMethod":function(){define(["require","exports","../../../core/accessorSupport/get"],function(l,m,g){m.vmMethod=
function(){console.warn("@vmMethod is deprecated, use @aliasOf instead");return function(f,a,e){var k="viewModel."+a,d;e.value=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];if(e=g.default(this,k))return d||(d=k.split(".").slice(0,-1).join(".")),e=e.bind(g.default(this,d)),e.call.apply(e,[this].concat(a))}}}})},"esri/widgets/support/decorators/vmProperty":function(){define(["require","exports","../../../core/accessorSupport/decorators"],function(l,m,g){m.vmProperty=function(f){var a=
this;console.warn("@vmProperty is deprecated, use @aliasOf instead");return function(e,k){g.property.call(a,{aliasOf:"viewModel."+(f||k)}).call(a,e,k)}}})},"esri/widgets/support/jsxFactory":function(){define(["require","exports","../libs/maquette/maquette"],function(l,m,g){m.jsxFactory={createElement:g.h}})},"esri/widgets/libs/maquette/maquette":function(){(function(l,m){"function"===typeof define&&define.amd?define(["exports"],m):"object"===typeof exports&&"string"!==typeof exports.nodeName?m(exports):
m(l.maquette={})})(this,function(l){var m=[],g=function(a,b){var c={};Object.keys(a).forEach(function(b){c[b]=a[b]});b&&Object.keys(b).forEach(function(a){c[a]=b[a]});return c},f=function(a,b){return a.vnodeSelector!==b.vnodeSelector?!1:a.properties&&b.properties?a.properties.key!==b.properties.key?!1:a.properties.bind===b.properties.bind:!a.properties&&!b.properties},a=function(a){return{vnodeSelector:"",properties:void 0,children:void 0,text:a.toString(),domNode:null}},e=function(b,c,d){for(var h=
0,k=c.length;h<k;h++){var f=c[h];Array.isArray(f)?e(b,f,d):null!==f&&void 0!==f&&(f.hasOwnProperty("vnodeSelector")||(f=a(f)),d.push(f))}},k=function(){throw Error("Provide a transitions object to the projectionOptions to do animations");},d={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(a,b,c){a.style[b]=c},transitions:{enter:k,exit:k}},c=function(a){if("string"!==typeof a)throw Error("Style values must be strings");},h=function(a,b,d){if(b)for(var e=d.eventHandlerInterceptor,
h=Object.keys(b),k=h.length,f=0;f<k;f++){var g=h[f],p=b[g];if("className"===g)throw Error('Property "className" is not supported, use "class".');if("class"===g)p.split(/\s+/).forEach(function(b){return a.classList.add(b)});else if("classes"===g)for(var q=Object.keys(p),l=q.length,g=0;g<l;g++){var n=q[g];p[n]&&a.classList.add(n)}else if("styles"===g)for(q=Object.keys(p),l=q.length,g=0;g<l;g++){var n=q[g],t=p[n];t&&(c(t),d.styleApplyer(a,n,t))}else"key"!==g&&null!==p&&void 0!==p&&(q=typeof p,"function"===
q?0===g.lastIndexOf("on",0)&&(e&&(p=e(g,p,a,b)),"oninput"===g&&function(){var a=p;p=function(b){b.target["oninput-value"]=b.target.value;a.apply(this,[b])}}(),a[g]=p):"string"===q&&"value"!==g&&"innerHTML"!==g?"http://www.w3.org/2000/svg"===d.namespace&&"href"===g?a.setAttributeNS("http://www.w3.org/1999/xlink",g,p):a.setAttribute(g,p):a[g]=p)}},b=function(a,b){var c=a.domNode;if(a.properties){var d=a.properties.exitAnimation;if(d){c.style.pointerEvents="none";var e=function(){c.parentNode&&c.parentNode.removeChild(c)};
"function"===typeof d?d(c,e,a.properties):b.exit(a.domNode,a.properties,d,e);return}}c.parentNode&&c.parentNode.removeChild(c)},p=function(a,b,c,d){var e=a[b];if(""!==e.vnodeSelector){var h=e.properties;if(!(h&&(void 0===h.key?h.bind:h.key)))for(h=0;h<a.length;h++)if(h!==b&&f(a[h],e)){if("added"===d)throw Error(c.vnodeSelector+" had a "+e.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable.");throw Error(c.vnodeSelector+" had a "+
e.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.");}}},q,t,r=function(a,b,c){var d=b.children;if(d)for(var e=0;e<d.length;e++)q(d[e],a,void 0,c);b.text&&(a.textContent=b.text);h(a,b.properties,c);b.properties&&b.properties.afterCreate&&b.properties.afterCreate.apply(b.properties.bind||b.properties,[a,c,b.vnodeSelector,b.properties,b.children])};q=function(a,b,c,d){var e,h,k,f=0,p=a.vnodeSelector;if(""===p)e=a.domNode=document.createTextNode(a.text),
void 0!==c?b.insertBefore(e,c):b.appendChild(e);else{for(h=0;h<=p.length;++h)if(k=p.charAt(h),h===p.length||"."===k||"#"===k)k=p.charAt(f-1),f=p.slice(f,h),"."===k?e.classList.add(f):"#"===k?e.id=f:("svg"===f&&(d=g(d,{namespace:"http://www.w3.org/2000/svg"})),void 0!==d.namespace?e=a.domNode=document.createElementNS(d.namespace,f):(e=a.domNode=document.createElement(f),"input"===f&&a.properties&&void 0!==a.properties.type&&e.setAttribute("type",a.properties.type)),void 0!==c?b.insertBefore(e,c):b.appendChild(e)),
f=h+1;r(e,a,d)}};t=function(a,d,e){var h=a.domNode;if(a===d)return!1;var k=!1;if(""===d.vnodeSelector){if(d.text!==a.text)return a=document.createTextNode(d.text),h.parentNode.replaceChild(a,h),d.domNode=a,!0}else{0===d.vnodeSelector.lastIndexOf("svg",0)&&(e=g(e,{namespace:"http://www.w3.org/2000/svg"}));a.text!==d.text&&(k=!0,void 0===d.text?h.removeChild(h.firstChild):h.textContent=d.text);var l;l=a.children;var n=d.children,r=e;if(l===n)l=!1;else{l=l||m;for(var n=n||m,v=l.length,x=n.length,w=r.transitions,
u=0,z=0,D=!1;z<x;){var A=u<v?l[u]:void 0,B=n[z];if(void 0!==A&&f(A,B))D=t(A,B,r)||D,u++;else{b:{var A=l,G=B;if(""!==G.vnodeSelector)for(var J=u+1;J<A.length;J++)if(f(A[J],G)){A=J;break b}A=-1}if(0<=A){for(;u<A;u++)b(l[u],w),p(l,u,d,"removed");D=t(l[A],B,r)||D;u=A+1}else q(B,h,u<v?l[u].domNode:void 0,r),A=w,B.properties&&(G=B.properties.enterAnimation)&&("function"===typeof G?G(B.domNode,B.properties):A.enter(B.domNode,B.properties,G)),p(n,z,d,"added")}z++}if(v>u)for(;u<v;u++)b(l[u],w),p(l,u,d,"removed");
l=D}k=l||k;l=a.properties;n=d.properties;r=e;if(n){D=!1;v=Object.keys(n);x=v.length;for(w=0;w<x;w++)if(B=v[w],z=n[B],u=l[B],"class"===B){if(u!==z)throw Error('"class" property may not be updated. Use the "classes" property for conditional css classes.');}else if("classes"===B)for(A=h.classList,G=Object.keys(z),J=G.length,B=0;B<J;B++){var K=G[B],M=!!z[K];M!==!!u[K]&&(D=!0,M?A.add(K):A.remove(K))}else if("styles"===B)for(A=Object.keys(z),G=A.length,B=0;B<G;B++)J=A[B],K=z[J],K!==u[J]&&(D=!0,K?(c(K),
r.styleApplyer(h,J,K)):r.styleApplyer(h,J,""));else if(z||"string"!==typeof u||(z=""),"value"===B)h[B]!==z&&h["oninput-value"]!==z&&(h[B]=z,h["oninput-value"]=void 0),z!==u&&(D=!0);else if(z!==u){D=typeof z;if("function"===D)throw Error("Functions may not be updated on subsequent renders (property: "+B+"). Hint: declare event handler functions outside the render() function.");"string"===D&&"innerHTML"!==B?"http://www.w3.org/2000/svg"===r.namespace&&"href"===B?h.setAttributeNS("http://www.w3.org/1999/xlink",
B,z):h.setAttribute(B,z):h[B]!==z&&(h[B]=z);D=!0}l=D}else l=void 0;k=l||k;d.properties&&d.properties.afterUpdate&&d.properties.afterUpdate.apply(d.properties.bind||d.properties,[h,e,d.vnodeSelector,d.properties,d.children])}k&&d.properties&&d.properties.updateAnimation&&d.properties.updateAnimation(h,d.properties,a.properties);d.domNode=a.domNode;return!1};var w=function(a,b){return{update:function(c){if(a.vnodeSelector!==c.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");
t(a,c,b);a=c},domNode:a.domNode}};l.h=function(b){var c=arguments[1];if("string"!==typeof b)throw Error();var d=1;!c||c.hasOwnProperty("vnodeSelector")||Array.isArray(c)||"object"!==typeof c?c=void 0:d=2;var h=void 0,k=void 0,f=arguments.length;if(f===d+1){var g=arguments[d];"string"===typeof g?h=g:void 0!==g&&null!==g&&1===g.length&&"string"===typeof g[0]&&(h=g[0])}if(void 0===h)for(k=[];d<f;d++)g=arguments[d],null!==g&&void 0!==g&&(Array.isArray(g)?e(b,g,k):g.hasOwnProperty("vnodeSelector")?k.push(g):
k.push(a(g)));return{vnodeSelector:b,properties:c,children:k,text:""===h?void 0:h,domNode:null}};l.dom={create:function(a,b){b=g(d,b);q(a,document.createElement("div"),void 0,b);return w(a,b)},append:function(a,b,c){c=g(d,c);q(b,a,void 0,c);return w(b,c)},insertBefore:function(a,b,c){c=g(d,c);q(b,a.parentNode,a,c);return w(b,c)},merge:function(a,b,c){c=g(d,c);b.domNode=a;r(a,b,c);return w(b,c)}};l.createCache=function(){var a=void 0,b=void 0;return{invalidate:function(){a=b=void 0},result:function(c,
d){if(a)for(var e=0;e<c.length;e++)a[e]!==c[e]&&(b=void 0);b||(b=d(),a=c);return b}}};l.createMapping=function(a,b,c){var d=[],e=[];return{results:e,map:function(h){for(var k=h.map(a),f=e.slice(),g=0,p=0;p<h.length;p++){var q=h[p],l=k[p];if(l===d[g])e[p]=f[g],c(q,f[g],p),g++;else{for(var t=!1,n=1;n<d.length+1;n++){var r=(g+n)%d.length;if(d[r]===l){e[p]=f[r];c(h[p],f[r],p);g=r+1;t=!0;break}}t||(e[p]=b(q,p))}}e.length=h.length;d=k}}};l.createProjector=function(a){var b,c=g(d,a);c.eventHandlerInterceptor=
function(a,c,d,e){return function(){b.scheduleRender();return c.apply(e.bind||this,arguments)}};var e=!0,h,k=!1,f=[],p=[],t=function(){h=void 0;if(e){e=!1;for(var a=0;a<f.length;a++){var b=p[a]();f[a].update(b)}e=!0}};return b={renderNow:t,scheduleRender:function(){h||k||(h=requestAnimationFrame(t))},stop:function(){h&&(cancelAnimationFrame(h),h=void 0);k=!0},resume:function(){k=!1;e=!0;b.scheduleRender()},append:function(a,b){f.push(l.dom.append(a,b(),c));p.push(b)},insertBefore:function(a,b){f.push(l.dom.insertBefore(a,
b(),c));p.push(b)},merge:function(a,b){f.push(l.dom.merge(a,b(),c));p.push(b)},replace:function(a,b){var d=b();q(d,a.parentNode,a,c);a.parentNode.removeChild(a);f.push(w(d,c));p.push(b)},detach:function(a){for(var b=0;b<p.length;b++)if(p[b]===a)return p.splice(b,1),f.splice(b,1)[0];throw Error("renderMaquetteFunction was not found");}}}})},"esri/widgets/support/widgetUtils":function(){define(["require","exports","../../core/Logger"],function(l,m,g){function f(){for(var a=[],e=0;e<arguments.length;e++)a[e]=
arguments[e];return a.join(" ")}m.classes=function(){g.getLogger("esri.widgets.support.widgetUtils").warn("classes is deprecated, use join instead.");return f.apply(this,arguments)};m.join=f;m.isRtl=function(){return"rtl"===document.head.dir}})},"esri/widgets/Widget":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/Evented ../core/HandleRegistry ../core/Logger ../core/watchUtils dojo/_base/lang dojo/dom ./libs/maquette/maquette ../core/Collection".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q,t){var r=c.getLogger("esri.widgets.Widget"),w=0;l=function(a){function c(b,c){b=a.call(this)||this;b._attached=!1;b.className="";b.destroyed=!1;b.domNode=null;b.visible=!0;b._projector=q.createProjector({});b._handles=new d;b.render=b.render.bind(b);return b}g(c,a);c.prototype.normalizeCtorArgs=function(a,c){a=b.mixin({},a);c&&(a.container=c);return a};c.prototype.initialize=function(){var a=this;this._handles.add(this._renderableProps.map(function(b){return h.init(a,
b,function(a,c){var d=this;t.isCollection(c)&&this._handles.remove(this.declaredClass+":"+b+"-collection-change-event-listener");t.isCollection(a)&&(a=a.on("change",function(){return d.scheduleRender()}),this._handles.add(a,this.declaredClass+":"+b+"-collection-change-event-listener"));this.scheduleRender()})}));this._delegatedEventNames.length&&this._handles.add(h.init(this,"viewModel",function(){a._get("viewModel")&&a._handles.remove("delegated-events");a._delegatedEventNames.map(function(b){return a.viewModel.on(b,
function(c){a.emit(b,c)})})}),"delegated-events");this.postInitialize();this._handles.add(h.whenOnce(this,"container",function(b){return a._attach(b)}))};c.prototype.postInitialize=function(){};c.prototype.destroy=function(){this.destroyed||(this._detach(this.container),this._handles.destroy(),this._set("destroyed",!0))};c.prototype.startup=function(){r.warn("Widget.startup() is deprecated and no longer needed")};Object.defineProperty(c.prototype,"container",{set:function(a){this._get("container")||
this._set("container",a)},enumerable:!0,configurable:!0});c.prototype.castContainer=function(a){return p.byId(a)};Object.defineProperty(c.prototype,"id",{get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+w++},set:function(a){a&&this._set("id",a)},enumerable:!0,configurable:!0});c.prototype.scheduleRender=function(){this._projector.scheduleRender()};c.prototype.on=function(a,b){var c=this.inherited(arguments);this._handles.add(c);return c};c.prototype.own=
function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments));this._handles.add(a)};c.prototype.renderNow=function(){this._projector.renderNow()};c.prototype._attach=function(a){a&&(this._projector.merge(a,this.render),this._attached=!0)};c.prototype._detach=function(a){a&&this._attached&&(this._projector.detach(this.render),a.parentNode&&a.parentNode.removeChild(a),this._attached=!1)};return c}(a.declared(e,k));f([a.shared([])],l.prototype,"_renderableProps",void 0);f([a.shared([])],
l.prototype,"_delegatedEventNames",void 0);f([a.property({value:null})],l.prototype,"container",null);f([a.cast("container")],l.prototype,"castContainer",null);f([a.property({readOnly:!0})],l.prototype,"destroyed",void 0);f([a.property({aliasOf:"container"})],l.prototype,"domNode",void 0);f([a.property({dependsOn:["container"]})],l.prototype,"id",null);f([a.property()],l.prototype,"viewModel",void 0);f([a.property()],l.prototype,"visible",void 0);return l=f([a.subclass("esri.widgets.Widget")],l)})},
"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../core/HandleRegistry ../../core/Accessor ../../core/lang ../../core/watchUtils ../../geometry/Extent".split(" "),function(l,m,g,f,a,e,k,d,c,h,b){l=function(a){function d(b){b=a.call(this,b)||this;b._handles=new k;b._pendingAttributionItemsByLayerId={};b._attributionDataByLayerId=
{};b.itemDelimiter=" | ";b.items=[];b.view=null;b._updateAttributionItems=b._updateAttributionItems.bind(b);return b}g(d,a);d.prototype.initialize=function(){this._handles.add(h.init(this,"view",this._viewWatcher))};d.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(d.prototype,"attributionText",{get:function(){return this.items.join(this.itemDelimiter)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"state",{get:function(){return this.get("view.ready")?
"ready":"disabled"},enumerable:!0,configurable:!0});d.prototype._viewWatcher=function(a){var b=this,c=this._handles;c&&c.remove();a&&(c.add([a.allLayerViews.on("change",function(a){b._addLayerViews(a.added);0<a.removed.length&&(a.removed.forEach(function(a){c.remove(a.uid)}),b._updateAttributionItems())}),h.init(a,"stationary",this._updateAttributionItems)]),this._addLayerViews(a.allLayerViews))};d.prototype._addLayerViews=function(a){var b=this;a.forEach(function(a){b._handles.has(a.uid)||b._handles.add(h.init(a,
"suspended",b._updateAttributionItems),a.uid)})};d.prototype._updateAttributionItems=function(){var a=this,b=[];this._getActiveLayerViews().forEach(function(c){var d=c.layer;if(!d.hasAttributionData)c=d.get("copyright"),a._isUnique(b,c)&&b.push(c);else if(d&&d.tileInfo){var e=a._attributionDataByLayerId;if(e[d.uid])c=a._getDynamicAttribution(e[d.uid],a.view,d),a._isUnique(b,c)&&b.push(c);else{var h=a._pendingAttributionItemsByLayerId;a._inProgress(h[d.uid])||(h[d.uid]=d.fetchAttributionData().then(function(b){b=
a._createContributionIndex(b,a._isBingLayer(d));delete h[d.uid];e[d.uid]=b;a._updateAttributionItems()}))}}});this._itemsChanged(this.items,b)&&this._set("items",b)};d.prototype._itemsChanged=function(a,b){return a.length!==b.length||a.some(function(a,c){return a!==b[c]})};d.prototype._inProgress=function(a){return a&&!a.isFulfilled()};d.prototype._getActiveLayerViews=function(){return this.get("view.allLayerViews").filter(function(a){return!a.suspended&&a.get("layer.attributionVisible")})};d.prototype._isUnique=
function(a,b){return b&&-1===a.indexOf(b)};d.prototype._isBingLayer=function(a){return-1!==a.declaredClass.toLowerCase().indexOf("vetiledlayer")};d.prototype._createContributionIndex=function(a,d){a=a.contributors;var h={};if(!a)return h;a.forEach(function(a,k){var f=a.coverageAreas;f&&f.forEach(function(f){var g=f.bbox,p=f.zoomMin-(d&&f.zoomMin?1:0),q=f.zoomMax-(d&&f.zoomMax?1:0);a={extent:e.geographicToWebMercator(new b({xmin:g[1],ymin:g[0],xmax:g[3],ymax:g[2]})),attribution:a.attribution||"",score:c.isDefined(f.score)?
f.score:100,id:k};for(f=p;f<=q;f++)h[f]=h[f]||[],h[f].push(a)})});h.maxKey=Math.max.apply(null,Object.keys(h));return h};d.prototype._getDynamicAttribution=function(a,b,d){var e=b.extent;b=d.tileInfo.scaleToZoom(b.scale);b=Math.min(a.maxKey,Math.round(b));if(!e||!c.isDefined(b)||-1>=b)return"";a=a[b];var h=e.center.clone().normalize(),k={};return a.filter(function(a){var b=!k[a.id]&&a.extent.contains(h);b&&(k[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", ")};
return d}(a.declared(d));f([a.property({dependsOn:["items","itemDelimiter"],readOnly:!0})],l.prototype,"attributionText",null);f([a.property()],l.prototype,"itemDelimiter",void 0);f([a.property({readOnly:!0})],l.prototype,"items",void 0);f([a.property({dependsOn:["view.ready"],readOnly:!0})],l.prototype,"state",null);f([a.property()],l.prototype,"view",void 0);return l=f([a.subclass("esri.widgets.Attribution.AttributionViewModel")],l)})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Compass/CompassViewModel dojo/i18n!./Compass/nls/Compass".split(" "),
function(l,m,g,f,a,e,k,d,c){l=function(a){function b(b){b=a.call(this)||this;b.view=null;b.viewModel=new d;return b}g(b,a);b.prototype.reset=function(){};b.prototype.render=function(){var a=this.viewModel.orientation,b=this.viewModel.state,d="disabled"===b,h="compass"===("rotation"===b?"rotation":"compass"),b=(k={},k["esri-disabled"]=d,k["esri-interactive"]=!d,k),k=(f={},f["esri-icon-compass"]=h,f["esri-icon-dial"]=!h,f);return e.jsxFactory.createElement("div",{bind:this,class:"esri-compass esri-widget-button esri-widget",
classes:b,onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:d?-1:0},e.jsxFactory.createElement("span",{"aria-hidden":"true",class:"esri-compass__icon",classes:k,styles:this._toRotationTransform(a),title:c.reset}),e.jsxFactory.createElement("span",{class:"esri-icon-font-fallback-text"},c.reset));var k,f};b.prototype._reset=function(){this.reset()};b.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+a.z+"deg)"}};return b}(a.declared(k));f([a.aliasOf("viewModel.view")],
l.prototype,"view",void 0);f([a.property({type:d}),e.renderable(["viewModel.orientation","viewModel.state"])],l.prototype,"viewModel",void 0);f([a.aliasOf("viewModel.reset")],l.prototype,"reset",null);f([e.accessibleHandler()],l.prototype,"_reset",null);return l=f([a.subclass("esri.widgets.Compass")],l)})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/HandleRegistry ../../core/Accessor ../../core/watchUtils".split(" "),
function(l,m,g,f,a,e,k,d){l=function(a){function c(b){b=a.call(this,b)||this;b._handles=new e;b.orientation={x:0,y:0,z:0};b.view=null;b._updateForCamera=b._updateForCamera.bind(b);b._updateForRotation=b._updateForRotation.bind(b);b._updateRotationWatcher=b._updateRotationWatcher.bind(b);return b}g(c,a);c.prototype.initialize=function(){this._handles.add(d.init(this,"view",this._updateRotationWatcher))};c.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(c.prototype,
"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return a&&(a.isWebMercator||4326===a.wkid)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});c.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.view.goTo(a)}};c.prototype._updateForRotation=function(a){void 0!==
a&&null!==a&&(this.orientation={z:a})};c.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};c.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(d.init(this,"view.rotation",this._updateForRotation)):this._handles.add(d.init(this,"view.camera",this._updateForCamera)))};return c}(a.declared(k));f([a.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],l.prototype,
"canShowNorth",null);f([a.property()],l.prototype,"orientation",void 0);f([a.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],l.prototype,"state",null);f([a.property()],l.prototype,"view",void 0);return l=f([a.subclass("esri.widgets.CompassViewModel")],l)})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel dojo/i18n!./Zoom/nls/Zoom".split(" "),
function(l,m,g,f,a,e,k,d,c,h){l=function(a){function b(b){b=a.call(this)||this;b.layout="vertical";b.view=null;b.viewModel=new c;return b}g(b,a);b.prototype.postInitialize=function(){this._zoomInButton=new d({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus",title:h.zoomIn});this._zoomOutButton=new d({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus",title:h.zoomOut})};b.prototype.render=function(){var a=this.viewModel,b=(c={},c["esri-zoom--horizontal"]="horizontal"===this.layout,
c);this._zoomInButton.enabled="ready"===a.state&&a.canZoomIn;this._zoomOutButton.enabled="ready"===a.state&&a.canZoomOut;return e.jsxFactory.createElement("div",{class:"esri-zoom esri-widget",classes:b},this._zoomInButton.render(),this._zoomOutButton.render());var c};b.prototype.zoomIn=function(){};b.prototype.zoomOut=function(){};return b}(a.declared(k));f([a.property(),e.renderable()],l.prototype,"layout",void 0);f([a.aliasOf("viewModel.view"),e.renderable()],l.prototype,"view",void 0);f([a.property({type:c}),
e.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],l.prototype,"viewModel",void 0);f([a.aliasOf("viewModel.zoomIn")],l.prototype,"zoomIn",null);f([a.aliasOf("viewModel.zoomOut")],l.prototype,"zoomOut",null);return l=f([a.subclass("esri.widgets.Zoom")],l)})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/widget ../Widget".split(" "),
function(l,m,g,f,a,e,k){l=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.enabled=!0;c.iconClass="";c.title="";return c}g(c,a);c.prototype.render=function(){var a=this.enabled?0:-1,b=(c={},c["esri-disabled"]=!this.enabled,c["esri-interactive"]=this.enabled,c),c=(d={},d[this.iconClass]=!!this.iconClass,d);return e.jsxFactory.createElement("div",{bind:this,class:"esri-widget-button esri-widget",classes:b,onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",
tabIndex:a,title:this.title},e.jsxFactory.createElement("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon",classes:c}),e.jsxFactory.createElement("span",{class:"esri-icon-font-fallback-text"},this.title));var c,d};c.prototype._triggerAction=function(){this.action.call(this)};return c}(a.declared(k));f([a.property()],l.prototype,"action",void 0);f([a.property(),e.renderable()],l.prototype,"enabled",void 0);f([a.property(),e.renderable()],l.prototype,"iconClass",void 0);f([a.property(),
e.renderable()],l.prototype,"title",void 0);f([e.accessibleHandler()],l.prototype,"_triggerAction",null);return l=f([a.subclass("esri.widgets.IconButton")],l)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor".split(" "),function(l,m,g,f,a,e){l=function(a){function d(c){c=a.call(this,c)||this;c.view=null;c.zoomIn=c.zoomIn.bind(c);c.zoomOut=c.zoomOut.bind(c);
return c}g(d,a);d.prototype.destroy=function(){this.view=null};Object.defineProperty(d.prototype,"canZoomIn",{get:function(){if("2d"!==this.get("view.type"))return!0;var a=this.get("view.scale"),d=this.get("view.constraints.effectiveMaxScale");return 0===d||a>d},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"canZoomOut",{get:function(){if("2d"!==this.get("view.type"))return!0;var a=this.get("view.scale"),d=this.get("view.constraints.effectiveMinScale");return 0===d||a<d},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});d.prototype.zoomIn=function(){this.canZoomIn&&this._zoomToFactor(.5)};d.prototype.zoomOut=function(){this.canZoomOut&&this._zoomToFactor(2)};d.prototype._zoomToFactor=function(a){"ready"===this.state&&this.view.goTo({scale:this.get("view.scale")*a})};return d}(a.declared(e));f([a.property({dependsOn:["view.ready","view.scale"],readOnly:!0})],
l.prototype,"canZoomIn",null);f([a.property({dependsOn:["view.ready","view.scale"],readOnly:!0})],l.prototype,"canZoomOut",null);f([a.property({dependsOn:["view.ready"],readOnly:!0})],l.prototype,"state",null);f([a.property()],l.prototype,"view",void 0);return l=f([a.subclass("esri.widgets.Zoom.ZoomViewModel")],l)})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./NavigationToggle/NavigationToggleViewModel dojo/i18n!./NavigationToggle/nls/NavigationToggle".split(" "),
function(l,m,g,f,a,e,k,d,c){l=function(a){function b(b){b=a.call(this)||this;b.view=null;b.viewModel=new d;return b}g(b,a);Object.defineProperty(b.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});b.prototype.toggle=function(){};b.prototype.render=function(){var a="disabled"===this.get("viewModel.state"),b="pan"===this.get("viewModel.navigationMode"),d=(h={},h["esri-disabled"]=a,h),h=(k={},k["esri-navigation-toggle__button--active"]=
b,k),b=(f={},f["esri-navigation-toggle__button--active"]=!b,f);return e.jsxFactory.createElement("div",{bind:this,class:"esri-navigation-toggle esri-widget",classes:d,onclick:this._toggle,onkeydown:this._toggle,tabIndex:a?-1:0,title:c.toggle},e.jsxFactory.createElement("div",{class:e.join("esri-navigation-toggle__button esri-widget-button","esri-navigation-toggle__button--pan"),classes:h},e.jsxFactory.createElement("span",{class:"esri-icon-pan"})),e.jsxFactory.createElement("div",{class:e.join("esri-navigation-toggle__button esri-widget-button",
"esri-navigation-toggle__button--rotate"),classes:b},e.jsxFactory.createElement("span",{class:"esri-icon-rotate"})));var h,k,f};b.prototype._toggle=function(){this.toggle()};return b}(a.declared(k));f([a.property({value:"vertical"}),e.renderable()],l.prototype,"layout",null);f([a.aliasOf("viewModel.view"),e.renderable()],l.prototype,"view",void 0);f([a.property({type:d}),e.renderable(["viewModel.state","viewModel.navigationMode"])],l.prototype,"viewModel",void 0);f([a.aliasOf("viewModel.toggle")],
l.prototype,"toggle",null);f([e.accessibleHandler()],l.prototype,"_toggle",null);return l=f([a.subclass("esri.widgets.NavigationToggle")],l)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ../../core/Accessor ../../core/HandleRegistry".split(" "),function(l,m,g,f,a,e,k,d){l=function(a){function c(b){b=a.call(this,
b)||this;b._handles=new d;b.navigationMode="pan";b.view=null;b.toggle=b.toggle.bind(b);return b}g(c,a);c.prototype.initialize=function(){this._handles.add(e.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};c.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(c.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});c.prototype.toggle=function(){"disabled"!==
this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};c.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};return c}(a.declared(k));f([a.property({dependsOn:["view.ready"],readOnly:!0})],l.prototype,"state",null);f([a.property()],l.prototype,"navigationMode",void 0);f([a.property()],l.prototype,"view",void 0);return l=f([a.subclass("esri.widgets.NavigationToggleViewModel")],
l)})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI dojo/_base/lang".split(" "),function(l,m,g,f,a,e,k){l=function(a){function c(){return a.call(this)||this}g(c,a);c.prototype.getDefaults=function(){return k.mixin(this.inherited(arguments),{components:["attribution","zoom"]})};return c}(a.declared(e));return l=f([a.subclass("esri.views.ui.2d.DefaultUI2D")],
l)})},"esri/views/2d/engine/Stage":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/promiseUtils ../../../core/Scheduler ../FrameBudget ./DOMContainer ./StageGL ./Container".split(" "),function(l,m,g,f,a,e,k,d,c){function h(a){if(a instanceof d)return a;if(a instanceof c){var b=0;for(a=a.children;b<a.length;b++){var e=h(a[b]);if(e)return e}}return null}return function(b){function c(c){var d=b.call(this)||this;d.element=c;d._budget=new e;d._renderParameters={budget:d._budget,
state:d.state,devicePixelRatio:window.devicePixelRatio,stationary:!1};d._renderRequested=!1;d._taskHandle=a.addFrameTask({render:function(){return d.renderFrame()}});d._stationary=!0;d.attached=!0;d._taskHandle.pause();return d}g(c,b);c.prototype.destroy=function(){this._taskHandle.remove();this._taskHandle=null};Object.defineProperty(c.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"stationary",{get:function(){return this._stationary},set:function(a){this._stationary!==a&&(this._stationary=a,this.requestRender())},enumerable:!0,configurable:!0});c.prototype.start=function(){this._taskHandle.resume()};c.prototype.stop=function(){this._taskHandle.isPaused()||this._taskHandle.pause()};c.prototype.requestRender=function(){this._renderRequested=!0;this._taskHandle.isPaused()&&this._taskHandle.resume()};c.prototype.takeScreenshot=function(a){var b=h(this);b||f.reject("Could not find an object capable of capturing screenshot!");
return b.takeScreenshot(a)};c.prototype.renderFrame=function(){this._renderRequested&&(this._renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=this.stationary,this._renderParameters.devicePixelRatio=window.devicePixelRatio,this.render(this._renderParameters));this._renderRequested||this._taskHandle.pause()};return c}(k)})},"esri/views/2d/engine/DOMContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Container"],function(l,
m,g,f){return function(a){function e(){return null!==a&&a.apply(this,arguments)||this}g(e,a);e.prototype.createElement=function(){var a=document.createElement("div");a.setAttribute("class","esri-display-object");return a};e.prototype.setElement=function(a){this.element=a};e.prototype.render=function(e){var d=this.element.style;this.visible?(d.display="block",d.opacity=""+this.opacity,a.prototype.render.call(this,e)):d.display="none"};e.prototype.prepareChildrenRenderParameters=function(a){return a};
e.prototype.attachChild=function(a,d){var c=a.element;c||(c=a.createElement(),a.setElement(c));return a.attach(d)};e.prototype.detachChild=function(a,d){a.detach(d);this.element.removeChild(a.element);a.setElement(null)};e.prototype.renderChildren=function(e){for(var d=this.children,c=this.element.childNodes,h=0,b=d.length,k=0;k<b;k++)if(d[k].attached){var f=d[k].element;c[h]!==f&&(null!=c[h+1]?this.element.insertBefore(f,c[h]):this.element.appendChild(f));h+=1}a.prototype.renderChildren.call(this,
e)};e.prototype.renderChild=function(a,d){return a.render(d)};return e}(f)})},"esri/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(l,m,g,f){var a;(function(a){a[a.BEFORE=0]="BEFORE";a[a.ATTACHING=1]="ATTACHING";a[a.DETACHING=2]="DETACHING";a[a.RENDERING=3]="RENDERING";a[a.AFTER=4]="AFTER";a[a.DONE=5]="DONE"})(a||(a={}));return function(e){function k(){var d=null!==e&&e.apply(this,arguments)||this;d._childrenSet=
new Set;d._childrenToAttach=[];d._childrenToDetach=[];d._renderPhase=a.DONE;d.children=[];return d}g(k,e);Object.defineProperty(k.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});k.prototype.attach=function(a){return!0};k.prototype.detach=function(a){var c=this.children;a=this.prepareChildrenRenderParameters(a);for(var d=c.length,b=0;b<d;b++){var e=c[b];e.attached&&(this.detachChild(e,a),e.attached=!1,e.parent=null)}};k.prototype.render=function(d){var c=
this.prepareChildrenRenderParameters(d);this._renderPhase=a.BEFORE;this.beforeRenderChildren(d,c);this._renderPhase=a.ATTACHING;this.attachChildren(c)||this.requestRender();this._renderPhase=a.DETACHING;for(var e=this._childrenToDetach;0<e.length;){var b=e.shift();this.detachChild(b,c);b.attached=!1;b.parent=null}this._renderPhase=a.RENDERING;this.renderChildren(c);this._renderPhase=a.AFTER;this.afterRenderChildren(d,c);this._renderPhase=a.DONE};k.prototype.addChild=function(a){return this.addChildAt(a,
this.children.length)};k.prototype.addChildAt=function(d,c){void 0===c&&(c=this.numChildren);if(!d||this.contains(d))return d;var e=d.parent;e&&e!==this&&e.removeChild(d);c>=this.numChildren?this.children.push(d):this.children.splice(c,0,d);this._childrenSet.add(d);c=this._childrenToDetach.indexOf(d);-1<c&&this._childrenToDetach.splice(c,1);this._childrenToAttach.push(d);this._renderPhase>=a.RENDERING&&this.requestRender();return d};k.prototype.contains=function(a){return this._childrenSet.has(a)};
k.prototype.getChildIndex=function(a){return this.children.indexOf(a)};k.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]};k.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)};k.prototype.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.getChildIndex(a)):a};k.prototype.removeChildAt=function(d){if(0>d||d>=this.children.length)return null;d=this.children.splice(d,1)[0];this._childrenSet["delete"](d);
if(d.attached)this._childrenToDetach.push(d),this._renderPhase>=a.RENDERING&&this.requestRender();else{var c=this._childrenToAttach.indexOf(d);-1<c&&this._childrenToAttach.splice(c,1)}return d};k.prototype.requestChildRender=function(d){d&&d.parent===this&&this._renderPhase>=a.RENDERING&&this.requestRender()};k.prototype.setChildIndex=function(d,c){var e=this.getChildIndex(d);-1<e&&(this.children.splice(e,1),this.children.splice(c,0,d),this._renderPhase>=a.RENDERING&&this.requestRender())};k.prototype.sortChildren=
function(d){this._renderPhase>a.RENDERING&&this.requestRender();return this.children.sort(d)};k.prototype.attachChildren=function(a){var c=this._childrenToAttach;if(0===c.length)return!0;for(var d=0===c.length;!d;)d=c.shift(),this.attachChild(d,a)&&(d.attached=!0,d.parent=this),d=0===c.length;return 0===c.length};k.prototype.renderChildren=function(a){for(var c=this.children,d=c.length,b=0;b<d;b++){var e=c[b];e.attached&&this.renderChild(e,a)}};k.prototype.beforeRenderChildren=function(a,c){};k.prototype.afterRenderChildren=
function(a,c){};return k}(f)})},"esri/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper"],function(l,m,g){var f=0;return function(){function a(){this.attached=!1;this._opacity=1;this._visible=!0;Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-do-"+f++})}Object.defineProperty(a.prototype,"opacity",{get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=a,this.requestRender())},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible!==a&&(this._visible=a,this.requestRender())},enumerable:!0,configurable:!0});a.prototype.requestRender=function(){this.parent&&this.parent.requestChildRender(this)};a.prototype.dispose=function(){};return a}()})},"esri/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper ./../math/vec2 ./../math/mat2d ./webgl/BitBlitRenderer ../../support/screenshotUtils ../../../core/promiseUtils ../math/common ./Container ../../webgl/RenderingContext ../../webgl/FramebufferObject ../../webgl/webgl-utils ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject ./webgl/glShaderSnippets".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q,t,r,w,n){function v(a){return{budget:a.budget,state:a.state,devicePixelRatio:a.devicePixelRatio,stationary:a.stationary}}var x={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(h){function l(){var b=null!==h&&h.apply(this,arguments)||this;b._clipData=new Float32Array(8);b._upperLeft=f.create();b._upperRight=f.create();b._lowerLeft=f.create();b._lowerRight=f.create();b._mat2=a.create();b._clipRendererInitialized=!1;return b}g(l,h);l.prototype.createElement=
function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");return a};l.prototype.setElement=function(a){this.element=a};l.prototype.attach=function(a){this._resizeCanvas(a);var c=q.setupWebGL(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0});this._renderingContext=new b(c[0]);this.attached=!0;this._cachedRenderParams=v(a);return h.prototype.attach.call(this,a)};l.prototype.detach=function(a){h.prototype.detach.call(this,a);this._cachedRenderParams=this._renderingContext=
null};l.prototype.beforeRenderChildren=function(b,d){var e=b.state;if(e.spatialReference&&(e.spatialReference._isWrappable?e.spatialReference._isWrappable():e.spatialReference.isWrappable)){var h=e.width;d=e.height;var k=e.rotation,g=this._renderingContext,h=h*b.devicePixelRatio;d*=b.devicePixelRatio;var l=c.toRadian(k),q=Math.abs(Math.cos(l)),n=Math.abs(Math.sin(l)),t=Math.round(e.worldScreenWidth);if(Math.round(h*q+d*n)<=t)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===h&&this._clipFBO.height===
d||(this._clipFBO=new p(g,{colorTarget:0,depthStencilTarget:3,width:h,height:d}));var r=.5*h,m=.5*d,e=1/h,w=1/d;b=.5*t*b.devicePixelRatio;var v=.5*(h*n+d*q),h=this._upperLeft,q=this._upperRight,n=this._lowerLeft,t=this._lowerRight;f.set(h,-b,-v);f.set(q,b,-v);f.set(n,-b,v);f.set(t,b,v);a.identity(this._mat2);a.translate(this._mat2,this._mat2,[r,m]);0!==k&&a.rotate(this._mat2,this._mat2,l);f.transformMat2d(h,h,this._mat2);f.transformMat2d(q,q,this._mat2);f.transformMat2d(n,n,this._mat2);f.transformMat2d(t,
t,this._mat2);k=this._clipData;k.set([2*n[0]*e-1,2*(d-n[1])*w-1,2*t[0]*e-1,2*(d-t[1])*w-1,2*h[0]*e-1,2*(d-h[1])*w-1,2*q[0]*e-1,2*(d-q[1])*w-1]);this._clipRendererInitialized||this._initializeClipRenderer(g);this._clipVBO.setData(k);g.bindFramebuffer(this._clipFBO);g.setDepthWriteEnabled(!0);g.setStencilWriteMask(255);g.setClearColor(0,0,0,0);g.setClearDepth(1);g.setClearStencil(0);g.clear(g.gl.COLOR_BUFFER_BIT|g.gl.DEPTH_BUFFER_BIT|g.gl.STENCIL_BUFFER_BIT);this._clipFrame=!0}}else this._clipFrame=
!1};l.prototype.afterRenderChildren=function(a,b){this._clipFrame&&this._clipRendererInitialized&&(a=this._renderingContext,a.bindFramebuffer(),a.bindVAO(this._clipVAO),a.bindProgram(this._clipStencilProgram),a.setDepthWriteEnabled(!1),a.setDepthTestEnabled(!1),a.setStencilTestEnabled(!0),a.setBlendingEnabled(!1),a.setColorMask(!1,!1,!1,!1),a.setStencilOp(7680,7680,7681),a.setStencilWriteMask(255),a.setStencilFunction(519,1,255),a.drawElements(4,6,5123,0),a.bindVAO(),a.setColorMask(!0,!0,!0,!0),a.setBlendingEnabled(!0),
a.setStencilWriteMask(255),a.setStencilFunction(514,1,255),this._blitRenderer.render(a,this._clipFBO.colorTexture,9728,1),a.setStencilTestEnabled(!1))};l.prototype.render=function(a){var b=this.element.style;this.visible?(b.display="block",b.opacity=""+this.opacity,this._resizeCanvas(a),h.prototype.render.call(this,a),this._cachedRenderParams=v(a)):b.display="none"};l.prototype.takeScreenshot=function(a){var b=this._cachedRenderParams.devicePixelRatio,c=b*this._cachedRenderParams.state.width,e=b*
this._cachedRenderParams.state.height,h=0,f=0,g=c,l=e,q=c,n=e;if(q=a.area)h=b*q.x,f=b*q.y,g=b*q.width,l=b*q.height;void 0!==a.width&&void 0!==a.height?(q=a.width/a.height,l*q<g?(q*=l,h+=Math.floor((g-q)/2),g=Math.floor(q)):(q=g/q,f+=Math.floor((l-q)/2),l=Math.floor(q)),q=a.width,n=a.height):(q=g,n=l);b=document.createElement("canvas");b.width=q;b.height=n;var t=b.getContext("2d"),r=new Uint8Array(g*l*4),m=this._renderingContext,w=p.create(m,{colorTarget:1,depthStencilTarget:3,width:c,height:e});m.bindFramebuffer(w);
m.setViewport(0,0,c,e);this._cachedRenderParams.budget&&this._cachedRenderParams.budget.reset(Number.MAX_VALUE);var v=this._cachedRenderParams,C=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT|C.STENCIL_BUFFER_BIT);v.context=this._renderingContext;this.renderChildren(v);w.readPixels(h,e-(f+l),g,l,6408,5121,r);m.bindFramebuffer();
m=t.getImageData(0,0,q,n);if(0!==h||0!==f||g!==c||l!==e||q!==c||n!==e)k.resampleHermite(r,g,l,m.data,q,n,!0);else{for(var c=l-1,e=0,g=4*g,y=C=v=w=l=f=h=void 0;e<c;){C=e*g;y=c*g;for(h=0;h<g;h+=4)f=r[C+h],l=r[C+h+1],w=r[C+h+2],v=r[C+h+3],r[C+h]=r[y+h],r[C+h+1]=r[y+h+1],r[C+h+2]=r[y+h+2],r[C+h+3]=r[y+h+3],r[y+h]=f,r[y+h+1]=l,r[y+h+2]=w,r[y+h+3]=v;e++;c--}g=m.data;c=r.length;for(e=0;e<c;e++)g[e]=r[e]}t.putImageData(m,0,0);t=x[a.format?a.format.toLowerCase():"png"];r=1;void 0!==a.quality&&(r=a.quality/
100);a=b.toDataURL(t,r);return d.resolve({dataURL:a,x:0,y:0,width:q,height:n})};l.prototype.prepareChildrenRenderParameters=function(a){if(!this.attached||!this._renderingContext)return null;var b=this._renderingContext,c=b.gl;b.setDepthWriteEnabled(!0);b.setStencilWriteMask(255);b.setClearColor(0,0,0,0);b.setClearDepth(1);b.setClearStencil(0);b.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT|c.STENCIL_BUFFER_BIT);b.setViewport(0,0,this.element.width,this.element.height);b.setDepthWriteEnabled(!1);a.context=
b;return a};l.prototype.attachChild=function(a,b){return a.attach(b)};l.prototype.detachChild=function(a,b){return a.detach(b)};l.prototype.renderChild=function(a,b){return a.render(b)};l.prototype._resizeCanvas=function(a){var b=this.element,c=b.style,d=a.state,e=a.devicePixelRatio;a=d.width*e;e*=d.height;if(b.width!==a||b.height!==e)b.width=a,b.height=e,c.width=d.width+"px",c.height=d.height+"px"};l.prototype._initializeClipRenderer=function(a){if(this._clipRendererInitialized)return!0;this._blitRenderer=
new e;var b={a_pos:0},c=new t(a,n.stencilVS,n.stencilFS,b);if(!c)return!1;var d=w.createVertex(a,35040,32),h=new Uint16Array([0,1,2,2,1,3]),h=w.createIndex(a,35044,h);a=new r(a,b,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:d},h);this._clipStencilProgram=c;this._clipVBO=d;this._clipVAO=a;return this._clipRendererInitialized=!0};return l}(h)})},"esri/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ../../../webgl/Program ../../../webgl/VertexArrayObject ../../../webgl/BufferObject ./glShaderSnippets".split(" "),
function(l,m,g,f,a,e){return function(){function k(){this._initialized=!1}k.prototype.render=function(a,c,e,b){a&&c&&(this._initialized||this._initialize(a),a.setBlendFunctionSeparate(1,771,1,771),a.bindVAO(this._vertexArrayObject),a.bindProgram(this._program),c.setSamplingMode(e),a.bindTexture(c,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",b),a.drawArrays(5,0,4),a.bindVAO())};k.prototype._initialize=function(d){if(this._initialized)return!0;var c={a_pos:0,a_tex:1},
h=new g(d,e.bitblitVS,e.bitblitFS,c);if(!h)return!1;var b=new Int8Array(16);b[0]=-1;b[1]=-1;b[2]=0;b[3]=0;b[4]=1;b[5]=-1;b[6]=1;b[7]=0;b[8]=-1;b[9]=1;b[10]=0;b[11]=1;b[12]=1;b[13]=1;b[14]=1;b[15]=1;d=new f(d,c,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:a.createVertex(d,35044,b)});this._program=h;this._vertexArrayObject=d;return this._initialized=!0};return k}()})},"esri/views/2d/engine/webgl/glShaderSnippets":function(){define("require exports ../../../webgl/ShaderSnippets dojo/text!./Shaders.xml dojo/text!./bitblit.vs.glsl dojo/text!./bitblit.fs.glsl dojo/text!./stencil.vs.glsl dojo/text!./stencil.fs.glsl".split(" "),
function(l,m,g,f,a,e,k,d){function c(a,c){h+='\x3csnippet name\x3d"'+a+'"\x3e\x3c![CDATA[';h+=c;h+="]]\x3e\x3c/snippet\x3e"}var h="",h=h+'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',h=h+"\x3csnippets\x3e";c("bitblitVS",a);c("bitblitFS",e);c("stencilVS",k);c("stencilFS",d);h+="\x3c/snippets\x3e";l=new g;g.parse(h,l);g.parse(f,l);return l})},"esri/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(l,m,g){return function(){function f(a){if(a)for(var e in a)this[a[e]]=
a[e]}f.parse=function(a,e){a=g.parse(a).getElementsByTagName("snippet");for(var k=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,d=/[\$\s]+/g,c=/\(([^\(\)]*)\)/,h=0;h<a.length;h++){for(var b=a[h].getAttribute("name"),f=a[h].textContent,l=void 0;null!==(l=f.match(k));){var t=l[0].replace(d,""),r=t.match(c),m=void 0;r&&(m=r[1].split(",").map(function(a){return a.trim()}));t=t.replace(c,"");m=e._instantiate(t,m);f=f.replace(l[0],m)}e[b]=f}};f.prototype._instantiate=function(a,e){a=this[a];e||(e=[]);
for(var k;k=a.match(/\$(\d+)/);){var d=parseInt(k[1],10);a=a.replace(k[0],e[d])}return a};return f}()})},"esri/views/webgl/webgl-utils":function(){define([],function(){var l=function(l,g){for(var f=["webgl","experimental-webgl","webkit-3d","moz-webgl"],a=null,e=0;e<f.length;++e){try{a=l.getContext(f[e],g)}catch(k){}if(a)break}return a};return{create3DContext:l,setupWebGL:function(m,g){function f(a){var e=m.parentNode;e&&(e.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}if(!window.WebGLRenderingContext)return f('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];g=l(m,g);return g?[g]:(f('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'])},detectWebGL:function(){var m;try{m=window.WebGLRenderingContext}catch(f){m=[!1,0]}var g;try{g=l(document.createElement("canvas"))}catch(f){g=[!1,1]}m?g?(m=g,m=[!0,{VERSION:m.getParameter(m.VERSION),SHADING_LANGUAGE_VERSION:m.getParameter(m.SHADING_LANGUAGE_VERSION),VENDOR:m.getParameter(m.VENDOR),RENDERER:m.getParameter(m.RENDERER),
EXTENSIONS:m.getSupportedExtensions(),MAX_TEXTURE_SIZE:m.getParameter(m.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:m.getParameter(m.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:m.getParameter(m.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]):m=[!1,1]:m=[!1,0];return m}}})},"esri/views/2d/layers/support/GraphicsView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Collection ../../../../core/HandleRegistry ../../../../core/promiseUtils ../../../../Graphic ../../../layers/GraphicsView ../../engine/graphics/GFXSurface ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q){l=function(a){function c(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var e=a.apply(this,c)||this;e._frontGroup=new p;e._handles=new k;e._objects=new Map;e.container=new b;e.container.addChild(e._frontGroup);e.watch("graphics",function(){return e._reset()},!0);return e}g(c,a);c.prototype.hitTest=function(a,b){if(!this.view||!this.view.position)return null;a+=this.view.position[0]-window.pageXOffset;b+=this.view.position[1]-window.pageYOffset;return(a=
this.container.hitTest(a,b))?d.resolve(a.graphic):null};c.prototype._reset=function(){var a=this;this._handles.remove("graphics");this.graphics&&(this.graphics.forEach(this._add,this),this._handles.add(this.graphics.on("change",function(b){return a._graphicsChangeHandler(b)}),"graphics"))};c.prototype._add=function(a){if(!this._objects.has(a)){var b=new q;b.graphic=a;b.renderingInfo={symbol:a.symbol};this._objects.set(a,b);this._frontGroup.addChild(b)}};c.prototype._remove=function(a){var b=this._objects.get(a);
b&&(this._objects.delete(a),this._frontGroup.removeChild(b))};c.prototype._graphicsChangeHandler=function(a){for(var b=a.removed,c=0,d=a.added;c<d.length;c++)a=d[c],this._add(a);for(c=0;c<b.length;c++)a=b[c],this._remove(a)};return c}(a.declared(h));f([a.cast(e.ofType(c))],l.prototype,"graphics",void 0);f([a.property()],l.prototype,"view",void 0);return l=f([a.subclass("esri.views.2d.layers.support.GraphicsView2D")],l)})},"esri/views/layers/GraphicsView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Collection ../../Graphic".split(" "),
function(l,m,g,f,a,e,k,d){l=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.graphics=null;b.renderer=null;b.view=null;return b}g(c,a);return c}(a.declared(e));f([a.property({type:k.ofType(d)})],l.prototype,"graphics",void 0);f([a.property()],l.prototype,"renderer",void 0);f([a.property()],l.prototype,"view",void 0);return l=f([a.subclass("esri.views.layers.GraphicsView")],l)})},"esri/views/2d/engine/graphics/GFXSurface":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/_base/lang ../../math/mat2d ../../math/common ../../viewpointUtils ../Container ./Projector ./gfx ../cssUtils".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b){function p(a){return{xx:a[0],yx:a[1],xy:a[2],yy:a[3],dx:a[4],dy:a[5]}}var q=p([1,0,0,1,0,0]);return function(d){function l(){var b=null!==d&&d.apply(this,arguments)||this;b._transform=a.create();b._projector=new c;return b}g(l,d);l.prototype.createElement=function(){var a=document.createElement("div");a.setAttribute("class","esri-display-object");return a};l.prototype.setElement=function(a){this.surface&&(this.surface.destroy(),this.surface=null);if(this.element=a)this.surface=
h.createSurface(this.element,400,400)};l.prototype.render=function(c){var h=this.element.style;if(this.visible){h.display="block";h.opacity=""+this.opacity;var f=this._transform,g=c.state;if(c.stationary)k.getMatrix(f,g.center,g.size,g.resolution,e.toRadian(g.rotation)),this.surface.setDimensions(g.size[0],g.size[1]),this._projector.update(f,g.resolution),this.children.forEach(function(a){a.g&&a.g.setTransform(q)}),d.prototype.render.call(this,c);else{var l=a.invert(a.create(),f);a.multiply(l,g.transform,
l);this.children.forEach(function(a){a.g&&a.g.setTransform(p(l))})}b.clip(h,g.clipRect);h.transform=b.cssMatrix3d(a.fromRotation(a.create(),e.toRadian(g.rotation)));this.surface.rawNode.style.transform=b.cssMatrix(a.fromRotation(a.create(),e.toRadian(-g.rotation)))}else h.display="none"};l.prototype.hitTest=function(a,b){if(!this.attached)return null;var c=this.surface.rawNode,c=c.parentElement||c.parentNode;c.style.zIndex="9000";a=document.elementFromPoint(a,b);c.style.zIndex="";return a&&a.gfxObject||
null};l.prototype.prepareChildrenRenderParameters=function(a){return f.mixin({},a,{projector:this._projector,surface:this.surface})};l.prototype.beforeRenderChildren=function(a,b){this.surface.openBatch()};l.prototype.attachChild=function(a,b){return a.attach(b)};l.prototype.detachChild=function(a,b){return a.detach()};l.prototype.renderChild=function(a,b){return a.render(b)};l.prototype.afterRenderChildren=function(a,b){this.surface.closeBatch()};return l}(d)})},"esri/views/2d/engine/graphics/Projector":function(){define(["require",
"exports"],function(l,m){function g(k,d,c,h,b){void 0===h&&(h=0);void 0===b&&(b=k.length);for(var f=k[h],l=k[b-1],t=0,r=0,m,n=h+1;n<b-1;n++){var v=k[n];m=v[0];var v=v[1],x=f[0],C=f[1],y=l[0],L=l[1];x===y?m=a(m-x):(y=(L-C)/(y-x),m=a(y*m-v+(C-y*x))/e(y*y+1));m>t&&(r=n,t=m)}t>d?(g(k,d,c,h,r+1),g(k,d,c,r,b)):(c(f[0],f[1]),c(l[0],l[1]))}var f=Math.round,a=Math.abs,e=Math.sqrt;return function(){function a(){this._transform=null}a.prototype.update=function(a,c){this._transform=a;this._resolution=c};a.prototype.toScreenPoint=
function(a,c,e){this.transformPoint(c.x+e*this._resolution,c.y,function(b,c){a.x=b;a.y=c});return a};a.prototype.toScreenPath=function(a,c){var d=this,b=null!=a.paths;a=b?a.paths:a.rings;var e="",k=function(a,b){a+=c*d._resolution;d.transformPoint(a,b,function(a,b){isNaN(a)||isNaN(b)||(e+=a,e+=",",e+=b,e+=" ")})};if(a)for(var f=a.length,l=0;l<f;l++)e+="M ",g(a[l],this._resolution,k),b||(e+="Z ");return e};a.prototype.transformPoint=function(a,c,e){var b=this._transform,d=b[1],h=b[3],k=b[5];e(f(b[0]*
a+b[2]*c+b[4]),f(d*a+h*c+k))};return a}()})},"esri/views/2d/engine/graphics/gfx":function(){define("require exports ./gfx/svg ./gfx/Circle ./gfx/Group ./gfx/Path ./gfx/Image ./gfx/Rect ./gfx/Shape ./gfx/Surface ./gfx/Text".split(" "),function(l,m,g,f,a,e,k,d,c,h,b){m.createSurface=g.createSurface;m.Circle=f.default;m.Group=a.default;m.Path=e.default;m.Image=k.default;m.Rect=d.default;m.Shape=c.default;m.Surface=h.default;m.Text=b.default})},"esri/views/2d/engine/graphics/gfx/svg":function(){define(["require",
"exports","dojo/dom","./Surface"],function(l,m,g,f){function a(a,k){return document.createElementNS?document.createElementNS(a,k):document.createElement(k)}m.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};m.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};m._createElementNS=a;m._setAttributeNS=function(a,
k,d,c){return a.setAttributeNS?a.setAttributeNS(k,d,c):a.setAttribute(d,c)};m._createTextNode=function(a){return document.createTextNode(a)};m._createFragment=function(){return document.createDocumentFragment()};m.getRef=function(a){return a&&"none"!==a?a.match(/^url\(#.+\)$/)?g.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?g.byId(a.slice(1)):null:null};m.createSurface=function(e,k,d){var c=new f.default;c.rawNode=a(m.xmlns.svg,"svg");c.rawNode.setAttribute("overflow","hidden");k&&c.rawNode.setAttribute("width",
0>k?0:k);d&&c.rawNode.setAttribute("height",0>d?0:d);k=a(m.xmlns.svg,"defs");c.rawNode.appendChild(k);c.defNode=k;c._parent=g.byId(e);c._parent.appendChild(c.rawNode);return c}})},"esri/views/2d/engine/graphics/gfx/Surface":function(){define("require exports ../../../../../core/tsSupport/extendsHelper dojo/has dojo/_base/array dojo/dom-construct dojox/gfx/_base ./svg ./Container ./Circle ./Group ./Path ./Image ./Rect ./Text".split(" "),function(l,m,g,f,a,e,k,d,c,h,b,p,q,t,r){var w=navigator.userAgent,
n=534<function(){var a=/WebKit\/(\d*)/.exec(w);return a?parseInt(a[1],10):0}();l=function(c){function l(){var a=null!==c&&c.apply(this,arguments)||this;a.rawNode=null;a._parent=null;a._nodes=[];a._events=[];return a}g(l,c);l.prototype.destroy=function(){a.forEach(this._nodes,e.destroy);this._nodes=[];a.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;if(f("ie"))for(;this._parent.lastChild;)e.destroy(this._parent.lastChild);else this._parent.innerHTML="";this.defNode=
this._parent=null};l.prototype.setDimensions=function(a,b){if(!this.rawNode)return this;a=0>a?0:a;b=0>b?0:b;this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",b);n&&(this.rawNode.style.width=a,this.rawNode.style.height=b);return this};l.prototype.getDimensions=function(){return this.rawNode?{width:k.normalizedLength(this.rawNode.getAttribute("width")),height:k.normalizedLength(this.rawNode.getAttribute("height"))}:null};l.prototype.getEventSource=function(){return this.rawNode};
l.prototype._getRealMatrix=function(){return null};l.prototype.createShape=function(a){switch(a.type){case k.defaultPath.type:return this.createPath(a);case k.defaultRect.type:return this.createRect(a);case k.defaultCircle.type:return this.createCircle(a);case k.defaultImage.type:return this.createImage(a);case k.defaultText.type:return this.createText(a)}console.error("[gfx] unknown shape",a);return null};l.prototype.createGroup=function(){return this.createObject(b.default)};l.prototype.createRect=
function(a){return this.createObject(t.default,a)};l.prototype.createCircle=function(a){return this.createObject(h.default,a)};l.prototype.createImage=function(a){return this.createObject(q.default,a)};l.prototype.createText=function(a){return this.createObject(r.default,a)};l.prototype.createPath=function(a){return this.createObject(p.default,a)};l.prototype.createObject=function(a,b){if(!this.rawNode)return null;var c=new a;a=d._createElementNS(d.xmlns.svg,a.nodeType);c.setRawNode(a);c.setShape(b);
this.add(c);return c};return l}(c.default);Object.defineProperty(m,"__esModule",{value:!0});m.default=l})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(l,m,g,f,a,e,k,d,c){var h=m.getObject("dojox.gfx",!0),b=h._base={};h._hasClass=function(a,b){return(a=a.getAttribute("className"))&&0<=(" "+a+" ").indexOf(" "+b+" ")};h._addClass=function(a,
b){var c=a.getAttribute("className")||"";(!c||0>(" "+c+" ").indexOf(" "+b+" "))&&a.setAttribute("className",c+(c?" ":"")+b)};h._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};b._getFontMeasurements=function(){var b={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},c,e;f("ie")&&(e=a.doc.documentElement.style.fontSize||"",e||(a.doc.documentElement.style.fontSize=
"100%"));var h=d.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},a.body());for(c in b)h.style.fontSize=c,b[c]=16*Math.round(12*h.offsetHeight/16)/12/1E3;f("ie")&&(a.doc.documentElement.style.fontSize=e);a.body().removeChild(h);return b};var p=null;b._getCachedFontMeasurements=function(a){if(a||!p)p=b._getFontMeasurements();return p};var q=null,t={};b._getTextBox=function(b,
e,h){var k,f,g=arguments.length,l;q||(q=d.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},a.body()));k=q;k.className="";f=k.style;f.borderWidth="0";f.margin="0";f.padding="0";f.outline="0";if(1<g&&e)for(l in e)l in t||(f[l]=e[l]);2<g&&h&&(k.className=h);k.innerHTML=b;k.getBoundingClientRect?(f=k.getBoundingClientRect(),f={l:f.left,t:f.top,w:f.width||f.right-f.left,h:f.height||f.bottom-f.top}):f=c.getMarginBox(k);k.innerHTML="";return f};b._computeTextLocation=
function(a,b,c,d){var e={};switch(a.align){case "end":e.x=a.x-b;break;case "middle":e.x=a.x-b/2;break;default:e.x=a.x}e.y=a.y-c*(d?.75:1);return e};b._computeTextBoundingBox=function(a){if(!h._base._isRendered(a))return{x:0,y:0,width:0,height:0};var c;c=a.getShape();var d=a.getFont()||h.defaultFont;a=a.getTextWidth();d=h.normalizedLength(d.size);c=b._computeTextLocation(c,a,d,!0);return{x:c.x,y:c.y,width:a,height:d}};b._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==
a};var r=0;b._getUniqueId=function(){var a;do a=l._scopeName+"xUnique"+ ++r;while(k.byId(a));return a};var w=f("pointer-events")?"touchAction":f("MSPointer")?"msTouchAction":null;b._fixMsTouchAction=w?function(a){a.rawNode.style[w]="none"}:function(){};m.mixin(h,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},
defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},
defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=a[b];if(c)return new c;c=a[b]=new Function;c.prototype=h["default"+b];return new c}}(),normalizeColor:function(a){return a instanceof g?a:new g(a)},normalizeParameters:function(a,
b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return m.delegate(a);var d={};for(c in a)c in d||(d[c]=m.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=
h.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=0>c?a[3]:a[3].substring(0,c);var d=4;0>c&&("/"==a[4]?d=6:"/"==a[4].charAt(0)&&(d=5));d<a.length&&(b.family=a.slice(d).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return h._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*h.px_in_pt()},px2pt:function(a){return a/h.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;
if(2<a.length){var b=h.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*c*b;case "pc":return 12*c*b;case "mm":return c*h.mm_in_pt*b;case "cm":return c*h.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b="string"==typeof a?h[a]:a;b&&(e.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),
function(a){h[a]=b[a]}),"string"==typeof a?h.renderer=a:e.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return h.renderer=h[a]&&h[a].Surface===h.Surface?a:null}))}});return h})},"esri/views/2d/engine/graphics/gfx/Container":function(){define("require exports ../../../../../core/tsSupport/extendsHelper dojox/gfx/matrix ./Shape ./svg".split(" "),function(l,m,g,f,a,e){l=function(a){function d(){var c=null!==a&&a.apply(this,arguments)||this;c.children=[];c._batch=0;return c}
g(d,a);d.prototype.openBatch=function(){this._batch||(this.fragment=e._createFragment());++this._batch;return this};d.prototype.closeBatch=function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),this.fragment=null);return this};d.prototype.add=function(a){if(this===a.getParent())return this;this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode);var c=a.getParent();c&&c.remove(a,!0);this.children.push(a);
a._setParent(this,this._getRealMatrix());a.setClip(a.clip);return this};d.prototype.remove=function(a,d){void 0===d&&(d=!1);if(this!==a.getParent())return this;this.rawNode===a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode);this.fragment&&this.fragment===a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode);for(var b=0;b<this.children.length;++b)if(this.children[b]===a){d||(a.parent=null,a.parentMatrix=null);this.children.splice(b,1);break}return this};d.prototype.clear=function(a){void 0===
a&&(a=!1);for(var c=this.rawNode;c.lastChild;)c.removeChild(c.lastChild);var b=this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);c.appendChild(b)}for(b=0;b<this.children.length;++b)c=this.children[b],c.parent=null,c.parentMatrix=null,a&&c.destroy();this.children=[];return this};d.prototype.getBoundingBox=function(){if(!this.children)return null;var a=null;this.children.forEach(function(c){var b=c.getBoundingBox();b&&((c=c.getTransform())&&(b=f.multiplyRectangle(c,b)),a?(a.x=Math.min(a.x,
b.x),a.y=Math.min(a.y,b.y),a.endX=Math.max(a.endX,b.x+b.width),a.endY=Math.max(a.endY,b.y+b.height)):a={x:b.x,y:b.y,endX:b.x+b.width,endY:b.y+b.height,width:0,height:0})});a&&(a.width=a.endX-a.x,a.height=a.endY-a.y);return a};d.prototype._moveChildToFront=function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]===a){this.children.splice(c,1);this.children.push(a);break}return this};d.prototype._moveChildToBack=function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]===
a){this.children.splice(c,1);this.children.unshift(a);break}return this};return d}(a.default);Object.defineProperty(m,"__esModule",{value:!0});m.default=l})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(l,m){var g=l.matrix={},f={};g._degToRad=function(a){return f[a]||(f[a]=Math.PI*a/180)};g._radToDeg=function(a){return a/Math.PI*180};g.Matrix2D=function(a){if(a)if("number"==typeof a)this.xx=this.yy=a;else if(a instanceof Array){if(0<a.length){for(var e=g.normalize(a[0]),
k=1;k<a.length;++k){var d=e,c=g.normalize(a[k]),e=new g.Matrix2D;e.xx=d.xx*c.xx+d.xy*c.yx;e.xy=d.xx*c.xy+d.xy*c.yy;e.yx=d.yx*c.xx+d.yy*c.yx;e.yy=d.yx*c.xy+d.yy*c.yy;e.dx=d.xx*c.dx+d.xy*c.dy+d.dx;e.dy=d.yx*c.dx+d.yy*c.dy+d.dy}m.mixin(this,e)}}else m.mixin(this,a)};m.extend(g.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});m.mixin(g,{identity:new g.Matrix2D,flipX:new g.Matrix2D({xx:-1}),flipY:new g.Matrix2D({yy:-1}),flipXY:new g.Matrix2D({xx:-1,yy:-1}),translate:function(a,e){return 1<arguments.length?new g.Matrix2D({dx:a,
dy:e}):new g.Matrix2D({dx:a.x,dy:a.y})},scale:function(a,e){return 1<arguments.length?new g.Matrix2D({xx:a,yy:e}):"number"==typeof a?new g.Matrix2D({xx:a,yy:a}):new g.Matrix2D({xx:a.x,yy:a.y})},rotate:function(a){var e=Math.cos(a);a=Math.sin(a);return new g.Matrix2D({xx:e,xy:-a,yx:a,yy:e})},rotateg:function(a){return g.rotate(g._degToRad(a))},skewX:function(a){return new g.Matrix2D({xy:Math.tan(a)})},skewXg:function(a){return g.skewX(g._degToRad(a))},skewY:function(a){return new g.Matrix2D({yx:Math.tan(a)})},
skewYg:function(a){return g.skewY(g._degToRad(a))},reflect:function(a,e){1==arguments.length&&(e=a.y,a=a.x);var k=a*a,d=e*e,c=k+d,h=2*a*e/c;return new g.Matrix2D({xx:2*k/c-1,xy:h,yx:h,yy:2*d/c-1})},project:function(a,e){1==arguments.length&&(e=a.y,a=a.x);var k=a*a,d=e*e,c=k+d,h=a*e/c;return new g.Matrix2D({xx:k/c,xy:h,yx:h,yy:d/c})},normalize:function(a){return a instanceof g.Matrix2D?a:new g.Matrix2D(a)},isIdentity:function(a){return 1==a.xx&&0==a.xy&&0==a.yx&&1==a.yy&&0==a.dx&&0==a.dy},clone:function(a){var e=
new g.Matrix2D,k;for(k in a)"number"==typeof a[k]&&"number"==typeof e[k]&&e[k]!=a[k]&&(e[k]=a[k]);return e},invert:function(a){a=g.normalize(a);var e=a.xx*a.yy-a.xy*a.yx;return a=new g.Matrix2D({xx:a.yy/e,xy:-a.xy/e,yx:-a.yx/e,yy:a.xx/e,dx:(a.xy*a.dy-a.yy*a.dx)/e,dy:(a.yx*a.dx-a.xx*a.dy)/e})},_multiplyPoint:function(a,e,k){return{x:a.xx*e+a.xy*k+a.dx,y:a.yx*e+a.yy*k+a.dy}},multiplyPoint:function(a,e,k){a=g.normalize(a);return"number"==typeof e&&"number"==typeof k?g._multiplyPoint(a,e,k):g._multiplyPoint(a,
e.x,e.y)},multiplyRectangle:function(a,e){var k=g.normalize(a);e=e||{x:0,y:0,width:0,height:0};if(g.isIdentity(k))return{x:e.x,y:e.y,width:e.width,height:e.height};a=g.multiplyPoint(k,e.x,e.y);var d=g.multiplyPoint(k,e.x,e.y+e.height),c=g.multiplyPoint(k,e.x+e.width,e.y);e=g.multiplyPoint(k,e.x+e.width,e.y+e.height);var k=Math.min(a.x,d.x,c.x,e.x),h=Math.min(a.y,d.y,c.y,e.y);return{x:k,y:h,width:Math.max(a.x,d.x,c.x,e.x)-k,height:Math.max(a.y,d.y,c.y,e.y)-h}},multiply:function(a){for(var e=g.normalize(a),
k=1;k<arguments.length;++k){var d=e,c=g.normalize(arguments[k]),e=new g.Matrix2D;e.xx=d.xx*c.xx+d.xy*c.yx;e.xy=d.xx*c.xy+d.xy*c.yy;e.yx=d.yx*c.xx+d.yy*c.yx;e.yy=d.yx*c.xy+d.yy*c.yy;e.dx=d.xx*c.dx+d.xy*c.dy+d.dx;e.dy=d.yx*c.dx+d.yy*c.dy+d.dy}return e},_sandwich:function(a,e,k){return g.multiply(g.translate(e,k),a,g.translate(-e,-k))},scaleAt:function(a,e,k,d){switch(arguments.length){case 4:return g._sandwich(g.scale(a,e),k,d);case 3:return"number"==typeof k?g._sandwich(g.scale(a),e,k):g._sandwich(g.scale(a,
e),k.x,k.y)}return g._sandwich(g.scale(a),e.x,e.y)},rotateAt:function(a,e,k){return 2<arguments.length?g._sandwich(g.rotate(a),e,k):g._sandwich(g.rotate(a),e.x,e.y)},rotategAt:function(a,e,k){return 2<arguments.length?g._sandwich(g.rotateg(a),e,k):g._sandwich(g.rotateg(a),e.x,e.y)},skewXAt:function(a,e,k){return 2<arguments.length?g._sandwich(g.skewX(a),e,k):g._sandwich(g.skewX(a),e.x,e.y)},skewXgAt:function(a,e,k){return 2<arguments.length?g._sandwich(g.skewXg(a),e,k):g._sandwich(g.skewXg(a),e.x,
e.y)},skewYAt:function(a,e,k){return 2<arguments.length?g._sandwich(g.skewY(a),e,k):g._sandwich(g.skewY(a),e.x,e.y)},skewYgAt:function(a,e,k){return 2<arguments.length?g._sandwich(g.skewYg(a),e,k):g._sandwich(g.skewYg(a),e.x,e.y)}});l.Matrix2D=g.Matrix2D;return g})},"esri/views/2d/engine/graphics/gfx/Shape":function(){define("require exports dojox/gfx/matrix dojox/gfx/_base dojo/_base/lang dojo/_base/Color dojo/dom dojo/dom-attr ./svg ./Surface".split(" "),function(l,m,g,f,a,e,k,d,c,h){l=function(){function b(){this.parentMatrix=
this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=this.clip=null}b.prototype.destroy=function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=c.getRef(a))&&a.parentNode.removeChild(a)}this.clip&&(a=this.rawNode.getAttribute("clip-path"))&&(a=k.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null};b.prototype.getNode=
function(){return this.rawNode};b.prototype.getShape=function(){return this.shape};b.prototype.getTransform=function(){return this.matrix};b.prototype.getFill=function(){return this.fillStyle};b.prototype.getStroke=function(){return this.strokeStyle};b.prototype.getParent=function(){return this.parent};b.prototype.getBoundingBox=function(){return this.bbox};b.prototype.getTransformedBoundingBox=function(){var a=this.getBoundingBox();if(!a)return null;var b=this._getRealMatrix();return[g.multiplyPoint(b,
a.x,a.y),g.multiplyPoint(b,a.x+a.width,a.y),g.multiplyPoint(b,a.x+a.width,a.y+a.height),g.multiplyPoint(b,a.x,a.y+a.height)]};b.prototype.getEventSource=function(){return this.rawNode};b.prototype.getClip=function(){return this.clip};b.prototype.setTransform=function(a){this.matrix=g.clone(a?g.normalize(a):g.identity);return this._applyTransform()};b.prototype.setFill=function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),
this;var b;if("object"===typeof a&&"type"in a){switch(a.type){case "linear":b=f.makeParameters(f.defaultLinearGradient,a);a=this._setFillObject(b,"linearGradient");a.setAttribute("x1",b.x1.toFixed(8));a.setAttribute("y1",b.y1.toFixed(8));a.setAttribute("x2",b.x2.toFixed(8));a.setAttribute("y2",b.y2.toFixed(8));break;case "radial":b=f.makeParameters(f.defaultRadialGradient,a);a=this._setFillObject(b,"radialGradient");a.setAttribute("cx",b.cx.toFixed(8));a.setAttribute("cy",b.cy.toFixed(8));a.setAttribute("r",
b.r.toFixed(8));break;case "pattern":b=f.makeParameters(f.defaultPattern,a),a=this._setFillObject(b,"pattern"),a.setAttribute("x",b.x.toFixed(8)),a.setAttribute("y",b.y.toFixed(8)),a.setAttribute("width",b.width.toFixed(8)),a.setAttribute("height",b.height.toFixed(8))}this.fillStyle=b;return this}this.fillStyle=b=f.normalizeColor(a);this.rawNode.setAttribute("fill",b.toCss());this.rawNode.setAttribute("fill-opacity",b.a);this.rawNode.setAttribute("fill-rule","evenodd");return this};b.prototype.setStroke=
function(b){var d=this.rawNode;if(!b)return this.strokeStyle=null,d.setAttribute("stroke","none"),d.setAttribute("stroke-opacity",0),this;if("string"===typeof b||a.isArray(b)||b instanceof e)b={color:b};b=this.strokeStyle=f.makeParameters(f.defaultStroke,b);b.color=f.normalizeColor(b.color);if(b){var h=0>b.width?0:b.width;d.setAttribute("stroke",b.color.toCss());d.setAttribute("stroke-opacity",b.color.a);d.setAttribute("stroke-width",h);d.setAttribute("stroke-linecap",b.cap);"number"===typeof b.join?
(d.setAttribute("stroke-linejoin","miter"),d.setAttribute("stroke-miterlimit",b.join)):d.setAttribute("stroke-linejoin",b.join);var k=b.style.toLowerCase();k in c.dasharray&&(k=c.dasharray[k]);if(k instanceof Array){for(var k=a._toArray(k),g=0;g<k.length;++g)k[g]*=h;if("butt"!==b.cap){for(g=0;g<k.length;g+=2)k[g]-=h,1>k[g]&&(k[g]=1);for(g=1;g<k.length;g+=2)k[g]+=h}k=k.join(",")}d.setAttribute("stroke-dasharray",k);d.setAttribute("dojoGfxStrokeStyle",b.style)}return this};b.prototype._getParentSurface=
function(){for(var a=this.parent;a&&!(a instanceof h.default);a=a.parent);return a};b.prototype._setFillObject=function(a,b){var d=c.xmlns.svg;this.fillStyle=a;var e=this._getParentSurface().defNode,h=this.rawNode.getAttribute("fill");if(h=c.getRef(h))if(h.tagName.toLowerCase()!==b.toLowerCase()){var k=h.id;h.parentNode.removeChild(h);h=c._createElementNS(d,b);h.setAttribute("id",k);e.appendChild(h)}else for(;h.childNodes.length;)h.removeChild(h.lastChild);else h=c._createElementNS(d,b),h.setAttribute("id",
f._base._getUniqueId()),e.appendChild(h);if("pattern"===b)h.setAttribute("patternUnits","userSpaceOnUse"),d=c._createElementNS(d,"image"),d.setAttribute("x",0),d.setAttribute("y",0),d.setAttribute("width",(0>a.width?0:a.width).toFixed(8)),d.setAttribute("height",(0>a.height?0:a.height).toFixed(8)),c._setAttributeNS(d,c.xmlns.xlink,"xlink:href",a.src),h.appendChild(d);else for(h.setAttribute("gradientUnits","userSpaceOnUse"),b=0;b<a.colors.length;++b){var e=a.colors[b],k=c._createElementNS(d,"stop"),
g=e.color=f.normalizeColor(e.color);k.setAttribute("offset",e.offset.toFixed(8));k.setAttribute("stop-color",g.toCss());k.setAttribute("stop-opacity",g.a);h.appendChild(k)}this.rawNode.setAttribute("fill","url(#"+h.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return h};b.prototype._applyTransform=function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+
a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this};b.prototype.setRawNode=function(a){a=this.rawNode=a;"image"!==this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);
a.__gfxObject__=this};b.prototype.setShape=function(a){this.shape=f.makeParameters(this.shape,a);for(var b in this.shape)if("type"!==b){a=this.shape[b];if("width"===b||"height"===b)a=0>a?0:a;this.rawNode.setAttribute(b,a)}this.bbox=null;return this};b.prototype._moveToFront=function(){this.rawNode.parentNode.appendChild(this.rawNode);return this};b.prototype._moveToBack=function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this};b.prototype.setClip=
function(a){};b.prototype._removeClipNode=function(){var a,b=d.get(this.rawNode,"clip-path");b&&(a=k.byId(b.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a};b.prototype.moveToFront=function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this};b.prototype.moveToBack=function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this};b.prototype.applyRightTransform=function(a){return a?this.setTransform([this.matrix,a]):
this};b.prototype.applyLeftTransform=function(a){return a?this.setTransform([a,this.matrix]):this};b.prototype.applyTransform=function(a){return a?this.setTransform([this.matrix,a]):this};b.prototype.removeShape=function(a){this.parent&&this.parent.remove(this,a);return this};b.prototype._setParent=function(a,b){this.parent=a;return this._updateParentMatrix(b)};b.prototype._updateParentMatrix=function(a){this.parentMatrix=a?g.clone(a):null;return this._applyTransform()};b.prototype._getRealMatrix=
function(){for(var a=this.matrix,b=this.parent;b;)b.matrix&&(a=g.multiply(b.matrix,a)),b=b.parent;return a};return b}();Object.defineProperty(m,"__esModule",{value:!0});m.default=l})},"esri/views/2d/engine/graphics/gfx/Circle":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./Shape","dojox/gfx/_base"],function(l,m,g,f,a){l=function(e){function k(d){var c=e.call(this)||this;c.shape=a.getDefault("Circle");c.rawNode=d;return c}g(k,e);k.prototype.getBoundingBox=function(){if(!this.bbox){var a=
this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox};return k}(f.default);l.nodeType="circle";Object.defineProperty(m,"__esModule",{value:!0});m.default=l})},"esri/views/2d/engine/graphics/gfx/Group":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ./Container dojox/gfx/_base ./svg ./Circle ./Path ./Image ./Rect ./Text".split(" "),function(l,m,g,f,a,e,k,d,c,h,b){l=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}
g(l,f);l.prototype.setRawNode=function(a){this.rawNode=a;this.rawNode.__gfxObject__=this};l.prototype.destroy=function(){f.prototype.clear.call(this,!0);f.prototype.destroy.call(this)};l.prototype.createShape=function(b){switch(b.type){case a.defaultPath.type:return this.createPath(b);case a.defaultRect.type:return this.createRect(b);case a.defaultCircle.type:return this.createCircle(b);case a.defaultImage.type:return this.createImage(b);case a.defaultText.type:return this.createText(b)}console.error("[gfx] unknown shape",
b);return null};l.prototype.createGroup=function(){return this.createObject(l)};l.prototype.createRect=function(a){return this.createObject(h.default,a)};l.prototype.createCircle=function(a){return this.createObject(k.default,a)};l.prototype.createImage=function(a){return this.createObject(c.default,a)};l.prototype.createText=function(a){return this.createObject(b.default,a)};l.prototype.createPath=function(a){return this.createObject(d.default,a)};l.prototype.createObject=function(a,b){if(!this.rawNode)return null;
var c=new a;a=e._createElementNS(e.xmlns.svg,a.nodeType);c.setRawNode(a);c.setShape(b);this.add(c);return c};return l}(f.default);l.nodeType="g";Object.defineProperty(m,"__esModule",{value:!0});m.default=l})},"esri/views/2d/engine/graphics/gfx/Path":function(){define("require exports ../../../../../core/tsSupport/extendsHelper dojo/_base/lang dojox/gfx/_base dojox/gfx/matrix ./Shape".split(" "),function(l,m,g,f,a,e,k){l=function(d){function c(c){var b=d.call(this)||this;b.segments=[];b.tbbox=null;
b.absolute=!0;b.last={};b.segmented=!1;b._validSegments={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0};b._2PI=2*Math.PI;b.rawNode=c;b.shape=f.clone(a.defaultPath);return b}g(c,d);c.prototype.setAbsoluteMode=function(a){this._confirmSegmented();this.absolute="string"===typeof a?"absolute"===a:a;return this};c.prototype.getAbsoluteMode=function(){this._confirmSegmented();return this.absolute};c.prototype.getBoundingBox=function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,
y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null};c.prototype._getRealBBox=function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var a=this.bbox,b=this._getRealMatrix();this.bbox=null;for(var c=this.segments.length,d=0;d<c;++d)this._updateWithSegment(this.segments[d],b);b=this.bbox;this.bbox=a;return this.tbbox=b?[{x:b.l,y:b.t},{x:b.r,y:b.t},{x:b.r,y:b.b},{x:b.l,y:b.b}]:null};c.prototype.getLastPosition=function(){this._confirmSegmented();return"x"in this.last?
this.last:null};c.prototype._applyTransform=function(){this.tbbox=null;d.prototype._applyTransform.call(this);return this};c.prototype._updateBBox=function(a,b,c){c&&(b=e.multiplyPoint(c,a,b),a=b.x,b=b.y);this.bbox&&"l"in this.bbox?(this.bbox.l>a&&(this.bbox.l=a),this.bbox.r<a&&(this.bbox.r=a),this.bbox.t>b&&(this.bbox.t=b),this.bbox.b<b&&(this.bbox.b=b)):this.bbox={l:a,b:b,r:a,t:b}};c.prototype._updateWithSegment=function(c,b){var d=c.args,e=d.length,h;switch(c.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(h=
0;h<e;h+=2)this._updateBBox(d[h],d[h+1],b);this.last.x=d[e-2];this.last.y=d[e-1];this.absolute=!0;break;case "H":for(h=0;h<e;++h)this._updateBBox(d[h],this.last.y,b);this.last.x=d[e-1];this.absolute=!0;break;case "V":for(h=0;h<e;++h)this._updateBBox(this.last.x,d[h],b);this.last.y=d[e-1];this.absolute=!0;break;case "m":h=0;"x"in this.last||(this._updateBBox(this.last.x=d[0],this.last.y=d[1],b),h=2);for(;h<e;h+=2)this._updateBBox(this.last.x+=d[h],this.last.y+=d[h+1],b);this.absolute=!1;break;case "l":case "t":for(h=
0;h<e;h+=2)this._updateBBox(this.last.x+=d[h],this.last.y+=d[h+1],b);this.absolute=!1;break;case "h":for(h=0;h<e;++h)this._updateBBox(this.last.x+=d[h],this.last.y,b);this.absolute=!1;break;case "v":for(h=0;h<e;++h)this._updateBBox(this.last.x,this.last.y+=d[h],b);this.absolute=!1;break;case "c":for(h=0;h<e;h+=6)this._updateBBox(this.last.x+d[h],this.last.y+d[h+1],b),this._updateBBox(this.last.x+d[h+2],this.last.y+d[h+3],b),this._updateBBox(this.last.x+=d[h+4],this.last.y+=d[h+5],b);this.absolute=
!1;break;case "s":case "q":for(h=0;h<e;h+=4)this._updateBBox(this.last.x+d[h],this.last.y+d[h+1],b),this._updateBBox(this.last.x+=d[h+2],this.last.y+=d[h+3],b);this.absolute=!1;break;case "A":for(h=0;h<e;h+=7)this._updateBBox(d[h+5],d[h+6],b);this.last.x=d[e-2];this.last.y=d[e-1];this.absolute=!0;break;case "a":for(h=0;h<e;h+=7)this._updateBBox(this.last.x+=d[h+5],this.last.y+=d[h+6],b);this.absolute=!1}c=[c.action];for(h=0;h<e;++h)c.push(a.formatNumber(d[h],!0));if("string"===typeof this.shape.path)this.shape.path+=
c.join("");else for(h=0,e=c.length;h<e;++h)this.shape.path.push(c[h]);"string"===typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)};c.prototype._pushSegment=function(a,b){this.tbbox=null;var c=this._validSegments[a.toLowerCase()];"number"===typeof c&&(c?b.length>=c&&(a={action:a,args:b.slice(0,b.length-b.length%c)},this.segments.push(a),this._updateWithSegment(a)):(a={action:a,args:[]},this.segments.push(a),this._updateWithSegment(a)))};c.prototype._collectArgs=function(a,b){for(var c=
0;c<b.length;++c){var d=b[c];"boolean"===typeof d?a.push(d?1:0):"number"===typeof d?a.push(d):d instanceof Array?this._collectArgs(a,d):"x"in d&&"y"in d&&a.push(d.x,d.y)}};c.prototype._confirmSegmented=function(){if(!this.segmented){var a=this.shape.path;this.shape.path=[];this._setPath(a);this.shape.path=this.shape.path.join("");this.segmented=!0}};c.prototype._setPath=function(c){c=f.isArray(c)?c:c.match(a.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(c){for(var b=
"",d=[],e=c.length,h=0;h<e;++h){var k=c[h],g=parseFloat(k);isNaN(g)?(b&&this._pushSegment(b,d),d=[],b=k):d.push(g)}this._pushSegment(b,d)}};c.prototype.setShape=function(a){d.prototype.setShape.call(this,"string"===typeof a?{path:a}:a);this.segmented=!1;this.segments=[];this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this};return c}(k.default);l.nodeType="path";Object.defineProperty(m,"__esModule",{value:!0});m.default=l})},"esri/views/2d/engine/graphics/gfx/Image":function(){define("require exports ../../../../../core/tsSupport/extendsHelper dojox/gfx/_base ./Shape ./svg".split(" "),
function(l,m,g,f,a,e){l=function(a){function d(c){var d=a.call(this)||this;d.shape=f.getDefault("Image");d.rawNode=c;return d}g(d,a);d.prototype.setShape=function(a){this.shape=f.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;for(var c in this.shape)if("type"!==c&&"src"!==c){var b=this.shape[c];if("width"===c||"height"===c)b=0>b?0:b;a.setAttribute(c,b)}a.setAttribute("preserveAspectRatio","none");e._setAttributeNS(a,e.xmlns.xlink,"xlink:href",this.shape.src);a.__gfxObject__=this;return this};
d.prototype.getBoundingBox=function(){return this.shape};d.prototype.setStroke=function(){return this};d.prototype.setFill=function(){return this};return d}(a.default);l.nodeType="image";Object.defineProperty(m,"__esModule",{value:!0});m.default=l})},"esri/views/2d/engine/graphics/gfx/Rect":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","dojox/gfx/_base","./Shape"],function(l,m,g,f,a){l=function(a){function e(d){var c=a.call(this)||this;c.shape=f.getDefault("Rect");
c.rawNode=d;return c}g(e,a);e.prototype.getBoundingBox=function(){return this.shape};e.prototype.setShape=function(a){this.shape=f.makeParameters(this.shape,a);this.bbox=null;for(var c in this.shape)if("type"!==c&&"r"!==c){a=this.shape[c];if("width"===c||"height"===c)a=0>a?0:a;this.rawNode.setAttribute(c,a)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this};return e}(a.default);l.nodeType="rect";Object.defineProperty(m,"__esModule",
{value:!0});m.default=l})},"esri/views/2d/engine/graphics/gfx/Text":function(){define("require exports ../../../../../core/tsSupport/extendsHelper dojo/has dojox/gfx/_base ./Shape ./svg".split(" "),function(l,m,g,f,a,e,k){l=f("android");var d=f("chrome")||l&&4<=l?"auto":"optimizeLegibility";f=function(c){function e(b){var d=c.call(this)||this;d.fontStyle=null;d.shape=a.getDefault("Text");d.rawNode=b;return d}g(e,c);e.prototype.getFont=function(){return this.fontStyle};e.prototype.setFont=function(b){this.fontStyle=
"string"===typeof b?a.splitFontString(b):a.makeParameters(a.defaultFont,b);this._setFont();return this};e.prototype._setFont=function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)};e.prototype.setShape=function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;b=this.rawNode;
var c=this.shape;b.setAttribute("x",c.x);b.setAttribute("y",c.y);b.setAttribute("text-anchor",c.align);b.setAttribute("text-decoration",c.decoration);b.setAttribute("rotate",c.rotated?90:0);b.setAttribute("kerning",c.kerning?"auto":0);b.setAttribute("text-rendering",d);b.firstChild?b.firstChild.nodeValue=c.text:b.appendChild(k._createTextNode(c.text));return this};e.prototype.getTextWidth=function(){var a=this.rawNode,c=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var d=0,e=a.firstChild.nodeValue;
c.appendChild(a);if(""!==e)for(;!d;)d=a.getBBox?parseInt(a.getBBox().width,10):68;c.removeChild(a);return d};e.prototype.getBoundingBox=function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(p){a={x:0,y:0,width:0,height:0}}return a};return e}(e.default);f.nodeType="text";Object.defineProperty(m,"__esModule",{value:!0});m.default=f})},"esri/views/2d/engine/cssUtils":function(){define(["require","exports","dojo/has"],function(l,m,g){function f(a){return"matrix3d(\n                    "+
a[0].toFixed(10)+", "+a[1].toFixed(10)+", 0, 0,\n                    "+a[2].toFixed(10)+", "+a[3].toFixed(10)+", 0, 0,\n                    0, 0, 1, 0,\n                    "+Math.round(a[4]).toFixed(10)+", "+Math.round(a[5]).toFixed(10)+", 0, 1\n                  )"}function a(a){return"translate("+Math.round(a[0])+"px, "+Math.round(a[1])+"px)"}function e(a){return"rotateZ( "+a+" deg)"}l=g("ff");var k=g("ie"),d=g("webkit");g=g("opera");var c=d&&"-webkit-transform"||l&&"-moz-transform"||g&&"-o-transform"||
k&&"-ms-transform"||"transform";m.clip=function(a,b){a.clip=b?"rect( "+b.top+"px, "+b.right+"px, "+b.bottom+"px, "+b.left+"px)":""};m.setTransform=function(d,b){var e=null;2===b.length&&(e=a(b));6===b.length&&(e=f(b));d.transform=d[c]=e};m.setOrigin=function(a,b){a.transformOrigin=b[0]+"px "+b[1]+"px 0"};m.cssMatrix=function(a){return"matrix(\n                  "+a[0].toFixed(10)+", "+a[1].toFixed(10)+",\n                  "+a[2].toFixed(10)+", "+a[3].toFixed(10)+",\n                  "+a[4]+", "+
a[5]+"\n                )"};m.cssMatrix3d=f;m.translate=a;m.rotate=function(a){return e(a.toFixed(3))};m.rotateZ=e})},"esri/views/2d/engine/graphics/GFXGroup":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","dojo/_base/lang","../Container"],function(l,m,g,f,a){return function(a){function e(){return a.call(this)||this}g(e,a);e.prototype.attach=function(d){this.g=d.surface.createGroup();return a.prototype.attach.call(this,d)};e.prototype.detach=function(d){a.prototype.detach.call(this,
d);this.g.destroy();this.g=null};e.prototype.prepareChildrenRenderParameters=function(a){return f.mixin({},a,{surface:this.g})};e.prototype.detachChild=function(a,c){return a.detach(c)};e.prototype.attachChild=function(a,c){return a.attach(c)};e.prototype.renderChild=function(a,c){return a.render(c)};return e}(a)})},"esri/views/2d/engine/graphics/GFXObject":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../geometry/Extent ../../../../geometry/support/webMercatorUtils ../../../../geometry/support/spatialReferenceUtils ../DisplayObject ./gfxUtils".split(" "),
function(l,m,g,f,a,e,k,d){var c=new Set,h=[];return function(b){function k(){var a=b.call(this)||this;a.visible=!0;return a}g(k,b);Object.defineProperty(k.prototype,"graphic",{get:function(){return this._graphic},set:function(a){this._geometry=(this._graphic=a)&&a.geometry||null;this._projected=null;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"geometry",{get:function(){return this._geometry},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,
"isPolygonMarkerSymbol",{get:function(){var a=this.renderingInfo.symbol.type,b=this.geometry;return b&&"polygon"===b.type&&("simple-marker-symbol"===a||"picture-marker-symbol"===a||"text-symbol"===a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"renderingInfo",{get:function(){return this._renderingInfo},set:function(a){this._renderingInfo=a;this.requestRender()},enumerable:!0,configurable:!0});k.prototype.attach=function(a){return!0};k.prototype.detach=function(){this._removeShape();
this._drawInfo=this._projected=null};k.prototype.render=function(a){var b=a.surface,c=a.state,e=a.projector,h=this.visible&&this._projectGeometry(this.geometry,a.state.spatialReference);a=this._getScreenOffsets([],a.state);d.isShapeInvalid(this.renderingInfo.symbol,this._shape)&&this._removeShape();if(a.length){var k=this._shape,f=h.type;if(!k||this._showRedraw(a,c))"point"===f?(k=d.drawPoint(e,b,h,k,this.renderingInfo,c.rotation,a),d.stylePoint(k,this.renderingInfo)):"multipoint"===f?(k=d.drawMarkers(e,
b,h,k,this.renderingInfo,c.rotation,a),d.styleMarkers(k,this.renderingInfo)):(k=d.drawShape(e,b,h,k,a),d.styleShape(k,this.renderingInfo)),this._shape=k,k.getNode().gfxObject=this}else this._removeShape()};k.prototype._getScreenOffsets=function(a,b){var d=b.clippedExtent,k=this._projected.outExtent,f=b.spatialReference;a.length=0;if(!k)return a;if(f.isWrappable){var f=e.getInfo(f),g=k.cache._partwise,d=d._getParts(f);h.length=0;if(g&&g.length)for(k=0;k<g.length;k++)h.push.apply(h,g[k]._getParts(f));
else h.push.apply(h,k._getParts(f));b=b.worldScreenWidth;a.length=0;c.clear();k=h.length;for(f=0;f<k;f++)for(var l=h[f],g=l.extent,l=l.frameIds,q=l.length,p=d.length,m=0;m<p;m++){var t=d[m];if(t.extent.intersects(g))for(var E=q,N=0;N<E;N++){var H=(t.frameIds[0]-l[N])*b;c.has(H)||(a.push(H),c.add(H))}}a.sort()}else d.intersects(k)&&a.push(0);return a};k.prototype._projectGeometry=function(b,c){var d=this._projected;b=this.isPolygonMarkerSymbol?b.centroid:b;if(d&&d.inGeometry===b&&d.outSpatialReference===
c)return d.outGeometry;b&&b.spatialReference.equals(c)?this._projected={inGeometry:b,outGeometry:b,outSpatialReference:c,outExtent:this._getExtent(b)}:a.canProject(b,c)?this._projected={inGeometry:b,outGeometry:a.project(b,c),outSpatialReference:c,outExtent:this._getExtent(b)}:this._projected={inGeometry:b,outGeometry:null,outSpatialReference:c,outExtent:null};return this._projected.outGeometry};k.prototype._getExtent=function(a){var b=a.extent;if(!b){var c=b=void 0;"esri.geometry.Point"===a.declaredClass?
(b=a.x,c=a.y):"esri.geometry.Multipoint"===a.declaredClass&&(b=a.points[0][0],c=a.points[0][1]);b=new f(b,c,b,c,a.spatialReference)}return b};k.prototype._removeShape=function(){var a=this._shape;a&&(a.removeShape(),a.getNode().gfxObject=null,a.destroy());this._shape=this._drawInfo=null};k.prototype._showRedraw=function(a,b){return!0};return k}(k)})},"esri/views/2d/engine/graphics/gfxUtils":function(){define("require exports dojo/_base/lang dojox/gfx/matrix ../../../../core/screenUtils ../../../../geometry/Polygon ../../../../symbols/SimpleMarkerSymbol ../../../../symbols/support/gfxUtils".split(" "),
function(l,m,g,f,a,e,k,d){function c(a,b){b.toRgba?(a[0]=b.r,a[1]=b.g,a[2]=b.b,a[3]=b.a):(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]);return a}function h(a,b,c){null!=c&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=c);return a}function b(a,b){var c=a.width/a.height,d=1,e=1;isNaN(b)||(1<c?(d=b/a.width,e=b/c/a.height):(e=b/a.height,d=b*c/a.width));return{xx:d,yy:e}}function p(c,e,h,g,l,p,m){var n=l.symbol,x=c.toScreenPoint(C,h,m[0]);h=x.x;m=x.y;c=[];var E=l.rotationAngle;l=l.size&&l.size[0];var u,y;"number"===
typeof l&&(y=isFinite(l)&&l);y=(l=y&&isFinite(y)&&!isNaN(y))?a.pt2px(y):NaN;p&&c.push(f.rotategAt(p,x));E&&c.push(f.rotategAt(E,x));p=a.pt2px(n.xoffset);E=a.pt2px(n.yoffset);0===p&&0===E||c.push(f.translate(p,-E));0!==n.angle&&c.push(f.rotategAt(n.angle,x));if("simple-marker-symbol"===n.type)switch(u=n.style,p=Math.round,y=l?y:a.pt2px(n.size),l=void 0,u){case k.STYLE_SQUARE:case k.STYLE_CROSS:case k.STYLE_X:case k.STYLE_DIAMOND:l=isNaN(y)?16:.5*y;u=r(e,g,v(u,h,m,p(h-l),p(h+l),p(m-l),p(m+l)));break;
case k.STYLE_PATH:u=r(e,g,n.path);n=u.getBoundingBox();e=b(n,y);1===e.xx&&1===e.yy||c.push(f.scaleAt(e.xx,e.yy,x.x,x.y));c.push(f.translate(-(n.x+.5*n.width)+h,-(n.y+.5*n.height)+m));break;default:l=isNaN(y)?16:.5*y,u=t(e,g,{cx:h,cy:m,r:l})}else if("picture-marker-symbol"===n.type)u=l?y:a.pt2px(n.width),y=l?y:a.pt2px(n.height),x=n.source,l=null,x&&x.imageData&&(l="data:"+(x.contentType||"image")+";base64,"+x.imageData),u=q(e,g,{x:h-.5*u,y:m-.5*y,width:u,height:y,src:l||n.url});else if("text-symbol"===
n.type){if(x=n.font&&n.font.clone())x.size=l?y:a.pt2px(x.size);u=w(e,g,{type:"text",text:n.text,x:h,y:m,align:d.getSVGAlign(n),decoration:n.decoration||x&&x.decoration,rotated:n.rotated,kerning:n.kerning});x&&u.setFont(x);e=u.getNode();g=d.getSVGBaseline(n);n=d.getSVGBaselineShift(n);e&&(e.setAttribute("dominant-baseline",g),n&&e.setAttribute("baseline-shift",n))}u.setTransform(f.multiply(c));return u}function q(a,b,c){return b?b.setShape(c):a.createImage(c)}function t(a,b,c){return b?b.setShape(c):
a.createCircle(c)}function r(a,b,c){c=Array.isArray(c)?c.join(" "):c;return b?b.setShape(c):a.createPath(c)}function w(a,b,c){return b?b.setShape(c):a.createText(c)}function n(a,b){b=b&&b.shape&&b.shape.type;var c=a&&a.type;a=a&&a.style;c&&(a=y[c]||a);L[a]&&(a="path");return!(!b||!a||b===a)}function v(a,b,c,d,e,h,f,g){switch(a){case k.STYLE_SQUARE:return["M",d+","+h,e+","+h,e+","+f,d+","+f,"Z"];case k.STYLE_CROSS:return["M",b+","+h,b+","+f,"M",d+","+c,e+","+c];case k.STYLE_X:return["M",d+","+h,e+
","+f,"M",d+","+f,e+","+h];case k.STYLE_DIAMOND:return["M",b+","+h,e+","+c,b+","+f,d+","+c,"Z"];case k.STYLE_TARGET:return["M",d+","+h,e+","+h,e+","+f,d+","+f,d+","+h,"M",d-g+","+c,d+","+c,"M",b+","+(h-g),b+","+h,"M",e+g+","+c,e+","+c,"M",b+","+(f+g),b+","+f]}}function x(a,b){var e=b.symbol;if("picture-marker-symbol"!==e.type){var f=d.getFill(e);if("simple-marker-symbol"===e.type){var l=e.style,q=(e=d.getStroke(e))&&e.color,l=l===k.STYLE_X||l===k.STYLE_CROSS,p=b.opacity;(b=b.color||c([0,0,0,0],l?
q:f))&&null!=p&&(b=h([0,0,0,0],b,p));b&&(l?b!==q&&(e=e?g.mixin({},e):{},e.color=b):b!==f&&(f=b));a.setFill(f).setStroke(e)}else"text-symbol"===e.type&&(p=b.opacity,(b=b.color||c([0,0,0,0],f))&&null!=p&&(b=h([0,0,0,0],b,p)),b&&b!==f&&(f=b),a.setFill(f))}}m.getScaleMatrix=b;var C={x:0,y:0};m.drawPoint=p;m.drawMarkers=function(a,b,c,d,e,h,k){var f=e.symbol;c=c.points;b=d||b.createGroup();d=[0];b.children[0]&&n(f,b.children[0])&&b.clear();for(var g=0,l=c.length,f=0;f<l;f++)for(var q=c[f],m=k.length,r=
0;r<m;r++)d[0]=k[r],b.add(p(a,b,{x:q[0],y:q[1]},b.children[g++],e,h,d));a=b.children.length;if(c.length*k.length<a)for(k=c.length*k.length,f=a-1;f>=k;f--)b.children[f].removeShape();return b};m.drawShape=function(a,b,c,d,h){var k=[];"extent"===c.type&&(c=e.fromExtent(c));if("polyline"===c.type||"polygon"===c.type){for(var f=h.length,g=0;g<f;g++)k=k.concat(a.toScreenPath(c,h[g]));d=r(b,d,k)}return d};m.drawRect=function(a,b,c){return b?b.setShape(c):a.createRect(c)};m.drawImage=q;m.drawCircle=t;m.drawPath=
r;m.drawText=w;var y={"picture-marker-symbol":"image","picture-fill-symbol":"path","simple-fill-symbol":"path","simple-line-symbol":"path","text-symbol":"text"},L={square:1,cross:1,x:1,diamond:1,target:1};m.isShapeInvalid=n;m.smsToPath=v;m.stylePoint=x;m.styleMarkers=function(a,b){for(var c=a.children.length,d=0;d<c;d++)x(a.children[d],b)};m.styleShape=function(b,e){var k=e.symbol,f=e.size,l=e.color;e=e.opacity;var q=d.getStroke(k),p=d.getFill(k),m=!1,r;"simple-line-symbol"===k.type?(m=!0,r="none"!==
k.style):r=k.outline&&"none"!==k.outline.style;var n,t,v;f&&(v=isFinite(f[0])&&f[0]);null!=f&&(v=a.pt2px(v));!l&&null==e||"picture-fill-symbol"===k.type||(m?(n=l||q&&q.color&&c([0,0,0,0],q.color))&&null!=e&&(n=h(n,n,e)):p&&(t=l||c([0,0,0,0],p))&&null!=e&&(t=h(t,t,e)));!r||null==f&&!n?b.setStroke(q):b.setStroke(g.mixin({},q,null!=v?{width:v}:null,n&&{color:n}));b.setFill(t||p);b.rawNode.setAttribute("vector-effect","non-scaling-stroke")}})},"esri/symbols/support/gfxUtils":function(){define("require exports dojo/_base/lang dojox/gfx/_base ../../Color ../../core/screenUtils".split(" "),
function(l,m,g,f,a,e){function k(a){var b=a.style,d=null;if(a){var h=a.constructor;switch(a.type){case "simple-marker-symbol":b!==h.STYLE_CROSS&&b!==h.STYLE_X&&(d=a.color);break;case "simple-fill-symbol":b===h.STYLE_SOLID?d=a.color:b!==h.STYLE_NULL&&(d=g.mixin({},f.defaultPattern,{src:c+b+".png",width:10,height:10}));break;case "picture-fill-symbol":b=a.source;d=null;b&&b.imageData&&(d="data:"+(b.contentType||"image")+";base64,"+b.imageData);d=g.mixin({},f.defaultPattern,{src:d||a.url,width:e.pt2px(a.width)*
a.xscale,height:e.pt2px(a.height)*a.yscale,x:e.pt2px(a.xoffset),y:e.pt2px(a.yoffset)});break;case "text-symbol":d=a.color}}return d}function d(a){if(!a)return null;var b,c=a.constructor,h=e.pt2px(a.width);switch(a.type){case "simple-fill-symbol":case "picture-fill-symbol":case "simple-marker-symbol":b=d(a.outline);break;case "simple-line-symbol":a.style!==c.STYLE_NULL&&0!==h&&(b={color:a.color,style:p(a.style),width:h,cap:a.cap,join:a.join===c.JOIN_MITER?e.pt2px(a.miterLimit):a.join});break;default:b=
null}return b}var c=l.toUrl("../../symbols/patterns/"),h={left:"start",center:"middle",right:"end",justify:"start"},b={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"};m.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&h[a.toLowerCase()]||"middle"};m.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&b[a.toLowerCase()]||"alphabetic"};m.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};m.getFill=k;m.getStroke=
d;var p=function(){var a={};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,"");return a[b]=c}}();m.getShapeDescriptors=function(a){if(!a)return{defaultShape:null,fill:null,font:null,stroke:null};var b={defaultShape:null,fill:k(a),font:null,stroke:d(a)},c=a.constructor,h=c.defaultProps,f=null;switch(a.type){case "simple-marker-symbol":var g=a.style,h=.5*e.pt2px(a.size||h.size),l=-h,p=+h,m=-h,q=+h;switch(g){case c.STYLE_CIRCLE:f={type:"circle",cx:0,cy:0,r:h};break;case c.STYLE_CROSS:f=
{type:"path",path:"M "+l+",0 L "+p+",0 M 0,"+m+" L 0,"+q+" E"};break;case c.STYLE_DIAMOND:f={type:"path",path:"M "+l+",0 L 0,"+m+" L "+p+",0 L 0,"+q+" L "+l+",0 Z"};break;case c.STYLE_SQUARE:f={type:"path",path:"M "+l+","+q+" L "+l+","+m+" L "+p+","+m+" L "+p+","+q+" L "+l+","+q+" Z"};break;case c.STYLE_X:f={type:"path",path:"M "+l+","+q+" L "+p+","+m+" M "+l+","+m+" L "+p+","+q+" E"};break;case c.STYLE_PATH:f={type:"path",path:a.path||""}}break;case "simple-line-symbol":f={type:"path",path:"M -15,0 L 15,0 E"};
break;case "picture-fill-symbol":case "simple-fill-symbol":f={type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"};break;case "picture-marker-symbol":f={type:"image",x:-Math.round(e.pt2px(a.width)/2),y:-Math.round(e.pt2px(a.height)/2),width:e.pt2px(a.width),height:e.pt2px(a.height),src:a.source&&a.source.imageData?"data:"+a.source.contentType+";base64,"+a.source.imageData:a.url||""};break;case "text-symbol":c=a.font,g=e.pt2px(c.size),f={type:"text",text:a.text,x:0,y:.25*g,align:"middle",
decoration:a.decoration||c&&c.decoration,rotated:a.rotated,kerning:a.kerning},b.font=c&&{size:g+"px",style:c.style,variant:c.variant,weight:c.weight,family:c.family}}b.defaultShape=f;return b};m.defaultThematicColor=new a([128,128,128])})},"esri/views/input/ViewEvents":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./InputHandler","../../geometry/ScreenPoint"],function(l,m,g,f,a){function e(a){return!!d[a]}function k(a){for(var b=0;b<a.length;b++)if(!e(a[b]))return!1;
return!0}var d={click:!0,"double-click":!0,hold:!0,drag:!0,"key-down":!0,"key-up":!0,"pointer-down":!0,"pointer-move":!0,"pointer-up":!0,"mouse-wheel":!0},c;(function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right"})(c||(c={}));l=function(){function a(a){this.handlers=new Map;this.counter=0;this.view=a;this.inputManager=null}a.prototype.connect=function(a){var b=this;a&&this.disconnect();this.inputManager=a;this.handlers.forEach(function(a,c){return b.inputManager.installHandlers(c,
[a])})};a.prototype.disconnect=function(){var a=this;this.inputManager&&this.handlers.forEach(function(b,c){return a.inputManager.uninstallHandlers(c)});this.inputManager=null};a.prototype.destroy=function(){this.disconnect();this.handlers.clear();this.view=null};a.prototype.register=function(a,b,c){var d=this;a=Array.isArray(a)?a:a.split(",");if(!k(a))return a.some(e)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;var f=Array.isArray(b)?
b:[];c=Array.isArray(b)?c:b;var g=this.createUniqueGroupName();b=new h(this.view,a,f,c);this.handlers.set(g,b);this.inputManager&&this.inputManager.installHandlers(g,[b]);return{remove:function(){return d.removeHandler(g)}}};a.prototype.removeHandler=function(a){this.handlers.has(a)&&this.handlers.delete(a);this.inputManager&&this.inputManager.uninstallHandlers(a)};a.prototype.createUniqueGroupName=function(){this.counter+=1;return"viewEvents_"+this.counter};return a}();m.ViewEvents=l;var h=function(b){function c(a,
c,d,e){var h=b.call(this,"esri.views.input.ViewEventHandler",!0)||this;h.view=a;for(a=0;a<c.length;a++)switch(c[a]){case "click":h.registerIncoming("click",d,function(a){return e(h.wrapClick(a))});break;case "double-click":h.registerIncoming("double-click",d,function(a){return e(h.wrapDoubleClick(a))});break;case "hold":h.registerIncoming("hold",d,function(a){return e(h.wrapHold(a))});break;case "drag":h.registerIncoming("drag",d,function(a){return e(h.wrapDrag(a))});break;case "key-down":h.registerIncoming("key-down",
d,function(a){return e(h.wrapKeyDown(a))});break;case "key-up":h.registerIncoming("key-up",d,function(a){return e(h.wrapKeyUp(a))});break;case "pointer-down":h.registerIncoming("pointer-down",d,function(a){return e(h.wrapPointer(a,"pointer-down"))});break;case "pointer-move":h.registerIncoming("pointer-move",d,function(a){return e(h.wrapPointer(a,"pointer-move"))});break;case "pointer-up":h.registerIncoming("pointer-up",d,function(a){return e(h.wrapPointer(a,"pointer-up"))});break;case "mouse-wheel":h.registerIncoming("mouse-wheel",
d,function(a){return e(h.wrapMouseWheel(a))})}return h}g(c,b);c.prototype.wrapClick=function(b){var c=b.data.x,d=b.data.y;return{type:"click",button:"touch"===b.data.native.pointerType?0:b.data.native.button,x:c,y:d,native:b.data.native,timestamp:b.timestamp,screenPoint:new a(c,d),mapPoint:this.view.toMap(c,d),stopPropagation:function(){return b.stopPropagation()}}};c.prototype.wrapDoubleClick=function(a){var b=a.data.x,c=a.data.y;return{type:"double-click",button:"touch"===a.data.native.pointerType?
0:a.data.native.button,x:b,y:c,native:a.data.native,timestamp:a.timestamp,mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}};c.prototype.wrapHold=function(a){var b=a.data.x,c=a.data.y;return{type:"hold",button:"touch"===a.data.native.pointerType?0:a.data.native.button,x:b,y:c,native:a.data.native,timestamp:a.timestamp,mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}};c.prototype.wrapDrag=function(a){return{type:"drag",action:a.data.action,
x:a.data.currentState.center.x,y:a.data.currentState.center.y,origin:{x:a.data.startState.center.x,y:a.data.startState.center.y},native:a.data.pointers[0].currentEvent.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};c.prototype.wrapKeyDown=function(a){return{type:"key-down",key:a.data.key,repeat:a.data.repeat,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};c.prototype.wrapKeyUp=function(a){return{type:"key-up",
key:a.data.key,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};c.prototype.wrapPointer=function(a,b){return{type:b,x:a.data.x,y:a.data.y,pointerId:a.data.native.pointerId,pointerType:a.data.native.pointerType,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};c.prototype.wrapMouseWheel=function(a){return{type:"mouse-wheel",x:a.data.x,y:a.data.y,deltaY:a.data.deltaY,native:a.data.native,timestamp:a.timestamp,
stopPropagation:function(){return a.stopPropagation()}}};return c}(f.InputHandler)})},"esri/views/input/InputHandler":function(){define(["require","exports","./EventMatch","../../core/Logger"],function(l,m,g,f){var a=f.getLogger("esri.views.input");l=function(){function d(a,d){this._manager=null;this._incoming={};this._outgoing={};this._outgoingEventTypes=this._incomingEventTypes=this._incomingEventMatches=null;this._name=a;this._hasSideEffects=d}Object.defineProperty(d.prototype,"incomingEventMatches",
{get:function(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(var a in this._incoming)for(var d=0,b=this._incoming[a];d<b.length;d++)this._incomingEventMatches.push(b[d].match)}return this._incomingEventMatches},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"incomingEventTypes",{get:function(){this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(function(a){return a.eventType}));return this._incomingEventTypes},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"outgoingEventTypes",{get:function(){this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing));return this._outgoingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasSideEffects",{get:function(){return this._hasSideEffects},enumerable:!0,configurable:!0});d.prototype.onInstall=function(c){var d=this;this._manager?a.error("This InputHandler has already been registered with an InputManager"):(c.setEventCallback(function(a){return d._handleEvent(a)}),
c.setUninstallCallback(function(){return d._onUninstall()}),this._manager=c)};d.prototype.onUninstall=function(){};d.prototype.registerIncoming=function(a,d,b){var c=this;"function"===typeof d?(b=d,d=[]):d=d||[];a="string"===typeof a?new g.EventMatch(a,d):a;var h=function(){c._incomingEventTypes=null;c._incomingEventMatches=null};d=function(a){var b=c._incoming[a.match.eventType];b&&(a=b.indexOf(a),b.splice(a,1),h(),c._manager&&c._manager.updateDependencies())};b=new e(a,b,{onPause:d,onRemove:d,onResume:function(a){var b=
c._incoming[a.match.eventType];b&&-1===b.indexOf(a)&&(b.push(a),h(),c._manager&&c._manager.updateDependencies())}});d=this._incoming[a.eventType];d||(d=[],this._incoming[a.eventType]=d);d.push(b);h();this._manager&&this._manager.updateDependencies();return b};d.prototype.registerOutgoing=function(a){var c=this;if(this._outgoing[a])throw Error("There is already a callback registered for this outgoing InputEvent: "+a);var b=new k(a,{onEmit:function(a,b,d){c._manager.emit(a.eventType,b,d)},onRemove:function(a){delete c._outgoing[a.eventType];
c._manager.updateDependencies()}});this._outgoing[a]=b;this._outgoingEventTypes=null;this._manager&&this._manager.updateDependencies();return b};d.prototype.startCapturingPointer=function(a){this._manager.setPointerCapture(a,!0)};d.prototype.stopCapturingPointer=function(a){this._manager.setPointerCapture(a,!1)};d.prototype._onUninstall=function(){this._manager?(this.onUninstall(),this._manager=null):a.error("This InputHandler is not registered with an InputManager")};d.prototype._handleEvent=function(a){var c=
this._incoming[a.type];if(c)for(var b=0;b<c.length;b++){var d=c[b];if(d.match.matches(a)&&(d.callback(a),a.shouldStopPropagation()))break}};return d}();m.InputHandler=l;var e=function(){function a(a,d,b){this.match=a;this._callback=d;this._handler=b}a.prototype.pause=function(){this._handler.onPause(this)};a.prototype.resume=function(){this._handler.onResume(this)};a.prototype.remove=function(){this._handler.onRemove(this)};Object.defineProperty(a.prototype,"callback",{get:function(){return this._callback},
enumerable:!0,configurable:!0});return a}(),k=function(){function a(a,d){this.eventType=a;this._removed=!1;this._handler=d}a.prototype.emit=function(a,d){if(!this._removed)this._handler.onEmit(this,a,d)};a.prototype.remove=function(){this._removed=!0;this._handler.onRemove(this)};return a}()})},"esri/views/input/EventMatch":function(){define(["require","exports"],function(l,m){l=function(){function g(f,a){void 0===a&&(a=[]);this.eventType=f;this.keyModifiers=a}g.prototype.matches=function(f){if(f.type!==
this.eventType)return!1;if(0===this.keyModifiers.length)return!0;f=f.modifiers;for(var a=0,e=this.keyModifiers;a<e.length;a++)if(!f.has(e[a]))return!1;return!0};return g}();m.EventMatch=l})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ./keys ./recognizers ../../core/Logger ./handlers/LatestPointerType".split(" "),function(l,m,g,f,a,e,k,d,c,
h){var b=c.getLogger("esri.views.input");l=function(a){function c(b,c){b=a.call(this)||this;b._pointerCaptures=new Map;b._nameToGroup={};b._handlers=[];b._currentPropagation=null;b._sourceEvents=new Set;b._keyModifiers=new Set;b._activeKeyModifiers=new Set;b.primaryKey=k.primaryKey;b.latestPointerType="mouse";b._installRecognizers();return b}g(c,a);c.prototype.normalizeCtorArgs=function(a,b){this._browserEvents=a;this._browserEvents.onEventReceived=this._onEventReceived.bind(this);this._recognizers=
b;this._recognizers||(this._recognizers=d.defaults.map(function(a){return new a}));return{}};c.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a])};c.prototype.installHandlers=function(a,c){var d=this;if(this._nameToGroup[a])b.error("There is already an InputHandler group registered under the name `"+a+"`");else if(0===c.length)b.error("Can't register a group of zero handlers");else{var e={name:a,handlers:c.map(function(a,b){return{handler:a,
active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[a]=e;a=function(a){var b=e.handlers[a];h._handlers.push(b);b.handler.onInstall({updateDependencies:function(){d.updateDependencies()},emit:function(a,c,e){d._emitInputEvent(b.priorityIndex,a,c,e)},setPointerCapture:function(a,c){d._setPointerCapture(e,b,a,c)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=a}})};var h=this;for(c=e.handlers.length-
1;0<=c;c--)a(c);this.updateDependencies()}};c.prototype.uninstallHandlers=function(a){var c=this._nameToGroup[a];c?(c.handlers.forEach(function(a){a.removed=!0;a.uninstallCallback()}),delete this._nameToGroup[a],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):b.error("There is no InputHandler group registered under the name `"+a+"`")};c.prototype.hasHandlers=function(a){return void 0!==this._nameToGroup[a]};c.prototype.updateDependencies=
function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var c=this._handlers.length-1;0<=c;c--){var d=this._handlers[c];d.priorityIndex=c;this._handlersPriority.push(d)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(c=this._handlersPriority.length-1;0<=c;c--){d=this._handlersPriority[c];d.priorityIndex=c;var e=d.handler.hasSideEffects;if(!e)for(var h=0,f=d.handler.outgoingEventTypes;h<f.length;h++)if(a.has(f[h])){e=!0;break}if(e)for(h=0,f=d.handler.incomingEventMatches;h<
f.length;h++){var g=f[h];a.add(g.eventType);for(var l=0,g=g.keyModifiers;l<g.length;l++){var m=g[l];k.isSystemModifier(m)||b.add(m)}}d.active=e}this._sourceEvents=a;this._keyModifiers=b;0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};c.prototype._setLatestPointerType=function(a){this._set("latestPointerType",
a)};c.prototype._onEventReceived=function(a,b){"pointer-capture-lost"===a&&this._pointerCaptures.delete(b.native.pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,b)};c.prototype._updateKeyModifiers=function(a,b){var c=this;if(b){var d=!1,e=function(){if(!d){var a=new Set;c._activeKeyModifiers.forEach(function(b){a.add(b)});c._activeKeyModifiers=a;d=!0}},h=function(a,b){b&&!c._activeKeyModifiers.has(a)?(e(),c._activeKeyModifiers.add(a)):!b&&c._activeKeyModifiers.has(a)&&(e(),
c._activeKeyModifiers.delete(a))};if("key-down"===a||"key-up"===a){var k=b.key;this._keyModifiers.has(k)&&h(k,"key-down"===a)}a=b.native;h("Alt",!(!a||!a.altKey));h("Ctrl",!(!a||!a.ctrlKey));h("Shift",!(!a||!a.shiftKey));h("Meta",!(!a||!a.metaKey));h("Primary",this._activeKeyModifiers.has(this.primaryKey))}};c.prototype._installRecognizers=function(){var a=this;this._latestPointerTypeHandler=new h.LatestPointerType(function(b){return a._setLatestPointerType(b)});0<this._recognizers.length&&this.installHandlers("default",
this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])};c.prototype._setPointerCapture=function(a,b,c,d){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(c.pointerId)||new Set;this._pointerCaptures.set(c.pointerId,b);d?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(c,!0)):(b.delete(a),0===b.size&&(this._pointerCaptures.delete(c.pointerId),this._browserEvents&&this._browserEvents.setPointerCapture(c,!1)))};c.prototype._garbageCollectRemovedHandlers=
function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};c.prototype._emitInputEventFromSource=function(a,b){this._emitInputEvent(0,a,b)};c.prototype._emitInputEvent=function(a,b,c,d){b=new p(b,c,d||this._activeKeyModifiers);this._currentPropagation?this._currentPropagation.addedEvents.push(b):this._doNewPropagation(a,b)};c.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],
needsHandlerGarbageCollect:!1};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=!0;else{b=a.events;var c=[];a.addedEvents=[];for(var d=0;d<b.length;d++){var e=b[d];a.currentHandler.active&&a.currentHandler.eventCallback(e);e.shouldStopPropagation()||c.push(e)}a.events=c.concat(a.addedEvents)}a.currentHandler=this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};c.prototype._compareHandlerPriority=
function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;for(var c=0,d=a.handler.incomingEventMatches;c<d.length;c++)for(var e=d[c],h=function(a){if(e.eventType!==a.eventType)return"continue";var b=e.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});if(b.length===e.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:e.keyModifiers.length>a.keyModifiers.length?-1:1}},k=0,f=b.handler.incomingEventMatches;k<f.length;k++){var g=
h(f[k]);if("object"===typeof g)return g.value}return a.priorityIndex>b.priorityIndex?-1:1};c.prototype._sortHandlersPriority=function(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c],e=0;e<b.length&&0<=this._compareHandlerPriority(d,b[e]);)e++;b.splice(e,0,d)}return b};return c}(a.declared(e));f([a.property({readOnly:!0})],l.prototype,"latestPointerType",void 0);l=f([a.subclass("esri.views.input.InputManager")],l);m.InputManager=l;var p=function(){function a(a,b,c){this.type=a;this.data=b;this.modifiers=
c;this._stopPropagation=!1;this.timestamp=Date.now()}a.prototype.stopPropagation=function(){this._stopPropagation=!0};a.prototype.shouldStopPropagation=function(){return this._stopPropagation};return a}()})},"esri/views/input/keys":function(){define(["require","exports","../../core/sniff"],function(l,m,g){m.primaryKey=g("mac")?"Meta":"Ctrl";var f={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",
46:"Delete"};for(l=48;58>l;l++)f[l]=String.fromCharCode(l);for(l=1;25>l;l++)f[111+l]="F"+l;for(l=65;91>l;l++)f[l]=[String.fromCharCode(l+32),String.fromCharCode(l)];var a={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown"};m.eventKey=function(e){if(void 0!==e.key)return a[e.key]||e.key;var k=f[e.keyCode];return Array.isArray(k)?e.shiftKey?k[1]:k[0]:k};m.isSystemModifier=function(a){switch(a){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},"esri/views/input/recognizers":function(){define("require exports ./recognizers/Drag ./recognizers/PointerClickHoldAndDrag ./recognizers/SingleAndDoubleClick ./recognizers/VerticalTwoFingerDrag".split(" "),
function(l,m,g,f,a,e){m.defaults=[f.PointerClickHoldAndDrag,a.SingleAndDoubleClick,g.Drag,e.VerticalTwoFingerDrag]})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../InputHandler ./support ../../../core/now".split(" "),function(l,m,g,f,a,e){l=function(k){function d(){var a=k.call(this,"recognizers.Drag",!1)||this;a._startStateModifiers=new Set;a._activePointers=[];a._activePointerMap=new Map;a._isDragging=!1;a._drag=a.registerOutgoing("drag");
a.registerIncoming("pointer-drag",a._handlePointerDrag.bind(a));a.registerIncoming("pointer-down",a._handlePointerDown.bind(a));a.registerIncoming("pointer-up",a._handlePointerUpAndPointerLost.bind(a));a.registerIncoming("pointer-capture-lost",a._handlePointerUpAndPointerLost.bind(a));return a}g(d,k);d.prototype._createPayload=function(a,d){return{action:a,pointers:this._activePointers.map(function(a){return a.data}),startState:this._startState,previousState:this._previousState,currentState:d}};d.prototype._fitCircleLSQ=
function(){var c=this._activePointers.map(function(a){return a.data.currentEvent});return a.fitCircleLSQ(c)};d.prototype._createDragState=function(){for(var a=this._fitCircleLSQ(),d=0,b=0,k=this._activePointers;b<k.length;b++){for(var f=k[b],g=this._pointerAngle(f,a),g=g-f.lastAngle;g>Math.PI;)g-=2*Math.PI;for(;g<-Math.PI;)g+=2*Math.PI;g=f.lastAngle+g;f.lastAngle=g;d+=g-f.initialAngle}d/=this._activePointers.length;return{angle:d,radius:a.radius,center:a.center,timeStamp:e()}};d.prototype._updateMultiPointer=
function(a){var c=a.startEvent.native.pointerId,b=this._activePointerMap.get(c),d=!b;d?(b={data:null,initialAngle:0,lastAngle:0},this._activePointers.push(b),this._activePointerMap.set(c,b),b.data={startEvent:a.startEvent,previousEvent:a.previousEvent,currentEvent:a.currentEvent},a=this._fitCircleLSQ(),b.initialAngle=this._pointerAngle(b,a),b.lastAngle=b.initialAngle):b.data={startEvent:b.data.startEvent,previousEvent:a.previousEvent,currentEvent:a.currentEvent};d&&this._isDragging&&this._updateInitialAngles();
return b};d.prototype._pointerAngle=function(a,d){a=a.data.currentEvent;return Math.atan2(a.y-d.center.y,a.x-d.center.x)};d.prototype._updateInitialAngles=function(){for(var a=this._createDragState(),d=0,b=this._activePointers;d<b.length;d++){var e=b[d];e.initialAngle=this._pointerAngle(e,a)}};d.prototype._emitStart=function(a){this._updateInitialAngles();var c=this._createDragState();this._previousState=this._startState=c;this._startStateModifiers=a.modifiers;this._isDragging=!0;a=0;for(var b=this._activePointers;a<
b.length;a++){var d=b[a];d.data={previousEvent:d.data.currentEvent,startEvent:d.data.currentEvent,currentEvent:d.data.currentEvent}}this._drag.emit(this._createPayload("start",c))};d.prototype._emitUpdate=function(){var a=this._createDragState();this._drag.emit(this._createPayload("update",a),this._startStateModifiers);this._previousState=a};d.prototype._emitEnd=function(){var a=this._createDragState();this._drag.emit(this._createPayload("end",a),this._startStateModifiers);this._startState=this._previousState=
null;this._isDragging=!1};d.prototype._handlePointerDown=function(a){a=a.data;this._isDragging&&this._emitEnd();this._updateMultiPointer({startEvent:a,previousEvent:a,currentEvent:a})};d.prototype._removeMultiPointer=function(a){a=a.pointerId;var c=this._activePointerMap.get(a);c&&(this._isDragging&&this._emitEnd(),this._activePointerMap.delete(a),a=this._activePointers.indexOf(c),this._activePointers.splice(a,1),this._isDragging&&this._updateInitialAngles())};d.prototype._handlePointerUpAndPointerLost=
function(a){this._removeMultiPointer(a.data.native)};d.prototype._handlePointerDrag=function(a){var c=a.data;switch(c.action){case "start":this._isDragging||this._emitStart(a);break;case "update":this._isDragging||this._emitStart(a),this._updateMultiPointer(c),this._emitUpdate()}};return d}(f.InputHandler);m.Drag=l})},"esri/views/input/recognizers/support":function(){define(["require","exports"],function(l,m){m.manhattanDistance=function(g,f){return Math.abs(f.x-g.x)+Math.abs(f.y-g.y)};m.fitCircleLSQ=
function(g,f){f?(f.radius=0,f.center.x=0,f.center.y=0):f={radius:0,center:{x:0,y:0}};if(0===g.length)return f;if(1===g.length)return f.center.x=g[0].x,f.center.y=g[0].y,f;if(2===g.length){var a=g[0];g=g[1];var e=[g.x-a.x,g.y-a.y],k=e[0],e=e[1];f.radius=Math.sqrt(k*k+e*e)/2;f.center.x=(a.x+g.x)/2;f.center.y=(a.y+g.y)/2;return f}for(var d=0,c=0,h=0;h<g.length;h++)d+=g[h].x,c+=g[h].y;for(var d=d/g.length,c=c/g.length,b=g.map(function(a){return a.x-d}),l=g.map(function(a){return a.y-c}),m=a=f=0,t=0,r=
k=0,h=e=0;h<b.length;h++){var w=b[h],n=l[h],v=w*w,x=n*n;f+=v;a+=x;m+=w*n;t+=v*w;k+=x*n;r+=w*x;e+=n*v}h=f;b=m;l=a;t=.5*(t+r);k=.5*(k+e);e=h*l-m*b;r=(t*l-k*b)/e;k=(h*k-m*t)/e;return{radius:Math.sqrt(r*r+k*k+(f+a)/g.length),center:{x:r+d,y:k+c}}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(l,m,g,f,a){l=function(e){function k(a,c,h){void 0===a&&(a=300);void 0===c&&(c=1.5);
void 0===h&&(h=500);var b=e.call(this,"recognizers.PointerClickHoldAndDrag",!1)||this;b.maximumClickDelay=a;b.movementUntilDrag=c;b.holdDelay=h;b._pointerState=new Map;b._modifiers=new Set;b._pointerDrag=b.registerOutgoing("pointer-drag");b._pointerClick=b.registerOutgoing("pointer-click");b._pointerHold=b.registerOutgoing("hold");b.registerIncoming("pointer-down",b._handlePointerDown.bind(b));b.registerIncoming("pointer-up",b._handlePointerUpOrLost.bind(b));b.registerIncoming("pointer-capture-lost",
b._handlePointerUpOrLost.bind(b));b._moveHandle=b.registerIncoming("pointer-move",b._handlePointerMove.bind(b));b._moveHandle.pause();return b}g(k,e);k.prototype.onUninstall=function(){this._pointerState.forEach(function(a){0!==a.holdTimeout&&(clearTimeout(a.holdTimeout),a.holdTimeout=0)});e.prototype.onUninstall.call(this)};k.prototype._handlePointerDown=function(a){var c=this,d=a.data,b=d.native.pointerId,e=0;0===this._pointerState.size&&(e=setTimeout(function(){var a=c._pointerState.get(b);a&&
(a.isDragging||(c._pointerHold.emit(a.previousEvent),a.holdEmitted=!0),a.holdTimeout=0)},this.holdDelay));1===this._pointerState.size&&this._pointerState.forEach(function(a){0!==a.holdTimeout&&(clearTimeout(a.holdTimeout),a.holdTimeout=0)});this._pointerState.set(b,{startEvent:d,previousEvent:d,startTimestamp:a.timestamp,totalMovement:0,isDragging:!1,downButton:d.native.button,holdTimeout:e});this.startCapturingPointer(d.native);this._moveHandle.resume()};k.prototype._createPointerDragData=function(a,
c,e){return{action:a,startEvent:c.startEvent,previousEvent:c.previousEvent,currentEvent:e}};k.prototype._handlePointerMove=function(d){var c=d.data,e=this._pointerState.get(c.native.pointerId);e&&(e.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",e,c),this._modifiers):(e.totalMovement+=a.manhattanDistance(c,e.previousEvent),e.totalMovement>this.movementUntilDrag&&(e.isDragging=!0,e.previousEvent=e.startEvent,this._modifiers=d.modifiers,0!==e.holdTimeout&&clearTimeout(e.holdTimeout),
this._pointerDrag.emit(this._createPointerDragData("start",e,e.startEvent)),this._pointerDrag.emit(this._createPointerDragData("update",e,c)))),e.previousEvent=c)};k.prototype._handlePointerUpOrLost=function(a){var c=a.data,d=c.native.pointerId,b=this._pointerState.get(d);b&&(0!==b.holdTimeout&&clearTimeout(b.holdTimeout),b.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",b,c),this._modifiers):b.downButton===c.native.button&&a.timestamp-b.startTimestamp<=this.maximumClickDelay&&
!b.holdEmitted&&this._pointerClick.emit(c),this._pointerState.delete(d),this.stopCapturingPointer(c.native),0===this._pointerState.size&&this._moveHandle.pause())};return k}(f.InputHandler);m.PointerClickHoldAndDrag=l})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(l,m,g,f,a){l=function(e){function k(a,c,h){void 0===a&&(a=250);void 0===c&&(c=10);void 0===h&&(h=35);var b=e.call(this,
"recognizers.SingleAndDoubleClick",!1)||this;b.maximumDoubleClickDelay=a;b.maximumDoubleClickDistance=c;b.maximumDoubleTouchDistance=h;b._pointerState=new Map;b._click=b.registerOutgoing("click");b._doubleClick=b.registerOutgoing("double-click");b.registerIncoming("pointer-click",b._handlePointerClick.bind(b));return b}g(k,e);k.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};k.prototype._handlePointerClick=function(d){d=d.data;var c=
this._pointerId(d),e=this._pointerState.get(c);if(e){clearTimeout(e.doubleClickTimeout);e.doubleClickTimeout=0;var b="touch"===d.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;a.manhattanDistance(e.event,d)>b?(this._doubleClickTimeoutExceeded(c),this._startClick(d)):(this._doubleClick.emit(d),this._pointerState.delete(c))}else this._startClick(d)};k.prototype._startClick=function(a){var c=this,d=this._pointerId(a);this._pointerState.set(d,{event:a,doubleClickTimeout:setTimeout(function(){return c._doubleClickTimeoutExceeded(d)},
this.maximumDoubleClickDelay)})};k.prototype._doubleClickTimeoutExceeded=function(a){var c=this._pointerState.get(a);this._click.emit(c.event);c.doubleClickTimeout=0;this._pointerState.delete(a)};return k}(f.InputHandler);m.SingleAndDoubleClick=l})},"esri/views/input/recognizers/VerticalTwoFingerDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(l,m,g,f){l=function(a){function e(e,d){void 0===e&&(e=20);void 0===d&&(d=40);var c=a.call(this,
"recognizers.Drag",!1)||this;c._threshold=e;c._maxDelta=d;c._vertical=c.registerOutgoing("vertical-two-finger-drag");c._artificalDragEnd=c.registerOutgoing("drag");c.registerIncoming("drag",c._handleDrag.bind(c));return c}g(e,a);e.prototype._handleDrag=function(a){if(2===a.data.pointers.length)switch(a.data.action){case "start":this._handleDragStart(a);break;case "update":this._handleDragUpdate(a);break;case "end":this._handleDragEnd(a)}};e.prototype._handleDragStart=function(a){this._failed=!1;this._dragStartCenter=
a.data.currentState.center};e.prototype._handleDragUpdate=function(a){this._failed||(this._active?(this._vertical.emit({delta:a.data.currentState.center.y-this._thresholdReachedCenter.y,action:"update"}),a.stopPropagation()):(this._failed=!this._checkDeltaConstraint(a.data),!this._failed&&this._checkThresholdReached(a.data)&&(this._active=!0,this._thresholdReachedCenter=a.data.currentState.center,this._artificalDragEnd.emit({action:"end",currentState:a.data.currentState,previousState:a.data.previousState,
startState:a.data.startState,pointers:a.data.pointers}),this._vertical.emit({delta:a.data.currentState.center.y-this._thresholdReachedCenter.y,action:"begin"}),a.stopPropagation())))};e.prototype._handleDragEnd=function(a){this._active&&(this._vertical.emit({delta:a.data.currentState.center.y-this._thresholdReachedCenter.y,action:"end"}),a.stopPropagation());this._active=!1};e.prototype._checkDeltaConstraint=function(a){var d=Math.abs(a.pointers[0].startEvent.x-a.pointers[1].startEvent.x),c=Math.abs(a.pointers[0].startEvent.y-
a.pointers[1].startEvent.y),e=Math.abs(a.pointers[0].currentEvent.y-a.pointers[1].currentEvent.y),b=Math.abs(a.pointers[0].currentEvent.x-a.pointers[1].currentEvent.x);return Math.abs(a.currentState.center.x-a.startState.center.x)<this._threshold&&Math.abs(b-d)<=this._maxDelta&&Math.abs(e-c)<=this._maxDelta};e.prototype._checkThresholdReached=function(a){return Math.min(Math.abs(a.pointers[0].currentEvent.y-a.pointers[0].startEvent.y),Math.abs(a.pointers[1].currentEvent.y-a.pointers[1].startEvent.y),
Math.abs(a.currentState.center.y-a.startState.center.y))>=this._threshold};return e}(f.InputHandler);m.VerticalTwoFingerDrag=l})},"esri/views/input/handlers/LatestPointerType":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(l,m,g,f){l=function(a){function e(e){var d=a.call(this,"LatestPointerInteraction",!0)||this;d._onChange=e;d._value="mouse";d.registerIncoming("pointer-down",function(a){d._setValue("touch"===a.data.native.pointerType?"touch":
"mouse")});d._moveHandler=d.registerIncoming("pointer-move",function(a){d._setValue("touch"===a.data.native.pointerType?"touch":"mouse")});d._moveHandler.pause();return d}g(e,a);e.prototype._setValue=function(a){a!==this._value&&("touch"===a?this._moveHandler.resume():this._moveHandler.pause(),this._value=a,this._onChange(a))};return e}(f.InputHandler);m.LatestPointerType=l})},"esri/views/input/BrowserEventSource":function(){define(["require","exports","./keys","../../core/libs/pep/pep","dojo/sniff"],
function(l,m,g,f,a){var e=a("trident"),k=a("edge"),d=a("chrome"),c=a("ff"),h=a("safari");l=function(){function a(a){this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._element=a;f.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointerDown,"pointer-move":this._handlePointer,"pointer-up":this._handlePointer,"mouse-wheel":this._handleMouseWheel,
"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=a.style.touchAction;a.style.touchAction="none"}a.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._element.releasePointerCapture(b)});this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction};Object.defineProperty(a.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"activeEvents",{set:function(a){var c=this,d;for(d in this._active)a&&a.has(d)||(this._element.removeEventListener(b[d],this._active[d]),delete this._active[d]);a&&a.forEach(function(a){if(!c._active[a]&&b[a]){var d=(c._eventHandlers[a]||c._handleDefault).bind(c,a);c._element.addEventListener(b[a],d);c._active[a]=d}})},enumerable:!0,configurable:!0});a.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):
(this._element.releasePointerCapture(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};a.prototype._updateNormalizedPointerLikeEvent=function(a,b){var c=this._element.getBoundingClientRect();b.x=a.clientX-Math.round(c.left);b.y=a.clientY-Math.round(c.top);return b};a.prototype._handleKey=function(a,b){var c=g.eventKey(b);c&&"key-up"===a&&this._keyDownState.delete(c);b={native:b,key:c,repeat:c&&this._keyDownState.has(c)};c&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,
b)};a.prototype._handlePointerDown=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0});this._callback(a,b)};a.prototype._handlePointer=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0});b.preventDefault();this._callback(a,c)};a.prototype._handleMouseWheel=function(a,b){b.preventDefault();var f=b.deltaY;switch(b.deltaMode){case 0:if(e||k)f=f/document.documentElement.clientHeight*600;break;case 1:f*=30;break;case 2:f*=900}e||k?f*=.7:d||h?f*=.6:
c&&(f*=1.375);var g=Math.abs(f);100<g&&(f=f/g*200/(1+Math.exp(-.02*(g-100))));b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,deltaY:f});this._callback(a,b)};a.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};a.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};return a}();m.BrowserEventSource=l;var b={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown",
"pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu"}})},"esri/core/libs/pep/pep":function(){define(function(){function l(a,c){c=c||Object.create(null);var d=document.createEvent("Event");d.initEvent(a,c.bubbles||!1,c.cancelable||!1);a=2;for(var e;a<h.length;a++)e=h[a],d[e]=c[e]||b[a];d.buttons=c.buttons||0;a=0;a=c.pressure?c.pressure:d.buttons?.5:0;d.x=d.clientX;
d.y=d.clientY;d.pointerId=c.pointerId||0;d.width=c.width||0;d.height=c.height||0;d.pressure=a;d.tiltX=c.tiltX||0;d.tiltY=c.tiltY||0;d.pointerType=c.pointerType||"";d.hwTimestamp=c.hwTimestamp||0;d.isPrimary=c.isPrimary||!1;return d}function m(){this.array=[];this.size=0}function g(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);F&&(this.observer=new F(this.mutationWatcher.bind(this)))}function f(b){return"body /shadow-deep/ "+a(b)}function a(a){return'[touch-action\x3d"'+
a+'"]'}function e(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; touch-action-delay: none; }"}function k(){if(I){N.forEach(function(b){String(b)===b?(H+=a(b)+e(b)+"\n",u&&(H+=f(b)+e(b)+"\n")):(H+=b.selectors.map(a)+e(b.rule)+"\n",u&&(H+=b.selectors.map(f)+e(b.rule)+"\n"))});var b=document.createElement("style");b.textContent=H;document.head.appendChild(b)}}function d(a){if(!n.pointermap.has(a))throw a=Error("InvalidPointerId"),a.name="InvalidPointerId",a;}function c(a){if(!a.ownerDocument.contains(a))throw a=
Error("InvalidStateError"),a.name="InvalidStateError",a;}var h="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),b=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],p=window.Map&&window.Map.prototype.forEach?Map:m;m.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],
this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var q="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),t=[!1,!1,null,null,0,0,0,0,!1,!1,!1,
!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],r={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},w="undefined"!==typeof SVGElementInstance,n={pointermap:new p,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=this.eventSourceList.length,
c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(X){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1;this.fireEvent("pointerenter",
a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&this.eventMap[b])&&b(a);a._handledByPE=
!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new l(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},fireEvent:function(a,b){a=this.makeEvent(a,
b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<q.length;d++)c=q[d],b[c]=a[c]||t[d],w&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in r))return b},propagate:function(a,b,c){for(var d=a.target,e=[];!d.contains(a.relatedTarget)&&
d!==document;)e.push(d),d=d.parentNode;c&&e.reverse();e.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b){this.captureInfo[a]&&this.releaseCapture(a);this.captureInfo[a]=b;var c=new l("gotpointercapture");c.pointerId=a;this.implicitRelease=this.releaseCapture.bind(this,a);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)},releaseCapture:function(a){var b=this.captureInfo[a];
if(b){var c=new l("lostpointercapture");c.pointerId=a;this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};n.boundHandler=n.eventHandler.bind(n);var v={shadow:function(a){if(a)return a.shadowRoot||
a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,c),e;for(e=this.targetingShadow(d);e;){if(a=e.elementFromPoint(b,c))return d=this.targetingShadow(a),
this.searchRoot(d,b,c)||a;e=this.olderShadow(e)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},x=Array.prototype.forEach.call.bind(Array.prototype.forEach),C=Array.prototype.map.call.bind(Array.prototype.map),y=Array.prototype.slice.call.bind(Array.prototype.slice),
L=Array.prototype.filter.call.bind(Array.prototype.filter),F=window.MutationObserver||window.WebKitMutationObserver,E={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};g.prototype={watchSubtree:function(a){this.observer&&v.canTarget(a)&&this.observer.observe(a,E)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){x(this.findElements(a),
this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(y(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===
Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=C(a,this.findElements,this);b.push(L(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var N=["none","auto","pan-x",
"pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],H="",I=window.PointerEvent||window.MSPointerEvent,u=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,z=n.pointermap,D=[1,4,2,8,16],A=!1;try{A=1===(new MouseEvent("test",{buttons:1})).buttons}catch(W){}var B={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){n.listen(a,this.events)},unregister:function(a){n.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=
this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,e=b.length,f;d<e&&(f=b[d]);d++){var h=Math.abs(a-f.y);if(25>=Math.abs(c-f.x)&&25>=h)return!0}},prepareEvent:function(a){var b=n.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,b){var c=z.get(this.POINTER_ID);a.buttons=0!==b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
z.get(this.POINTER_ID),c=this.prepareEvent(a);A||(c.buttons=D[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);z.set(this.POINTER_ID,a);b&&0!==b.buttons?n.move(c):n.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);A||this.prepareButtonsForMove(b,a);b.button=-1;z.set(this.POINTER_ID,a);n.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=z.get(this.POINTER_ID),c=this.prepareEvent(a);if(!A){var d=D[c.button];c.buttons=
b?b.buttons&~d:0;a.buttons=c.buttons}z.set(this.POINTER_ID,a);c.buttons&=~D[c.button];0===c.buttons?n.up(c):n.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);A||this.prepareButtonsForMove(b,a);b.button=-1;z.set(this.POINTER_ID,a);n.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);A||this.prepareButtonsForMove(b,a);b.button=-1;n.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);n.cancel(a);
this.deactivateMouse()},deactivateMouse:function(){z.delete(this.POINTER_ID)}},G=n.captureInfo,J=v.findTarget.bind(v),K=v.allShadows.bind(v),M=n.pointermap,R,O={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){R.enableOnSubtree(a)},unregister:function(a){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,n.listen(a,this.events),K(a).forEach(function(a){a._scrollType=c;n.listen(a,this.events)},this))},
elementRemoved:function(a){a._scrollType=void 0;n.unlisten(a,this.events);K(a).forEach(function(a){a._scrollType=void 0;n.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,K(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},
touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===M.size||1===M.size&&M.has(1))this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&
(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=n.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=G[d]||J(c);c.bubbles=
!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=a.radiusX||a.webkitRadiusX||0;c.height=a.radiusY||a.webkitRadiusY||0;c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var e=this;c.preventDefault=function(){e.scrolling=!1;e.firstXY=null;b.preventDefault()};return c},processTouches:function(a,b){var c=a.changedTouches;
this.currentTouchEvent=a;a=0;for(var d;a<c.length;a++)d=c[a],b.call(this,this.touchToPointer(d))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=null;return b}},findTouch:function(a,b){for(var c=0,d=a.length,e;c<d&&(e=a[c]);c++)if(e.identifier===b)return!0},vacuumTouches:function(a){var b=
a.touches;if(M.size>=b.length){var c=[];M.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){M.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});n.enterOver(a);n.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?
(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=M.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;n.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(n.leaveOut(c),n.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||
(n.up(a),n.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){n.cancel(a);n.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){M.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=B.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};R=new g(O.elementAdded,
O.elementRemoved,O.elementChanged,O);var S=n.pointermap,U=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,T={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){n.listen(a,this.events)},unregister:function(a){n.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;U&&(b=n.cloneEvent(a),b.pointerType=
this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){S.delete(a)},MSPointerDown:function(a){S.set(a.pointerId,a);a=this.prepareEvent(a);n.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);n.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);n.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);n.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);n.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);n.cancel(b);this.cleanup(a.pointerId)},
MSLostPointerCapture:function(a){a=n.makeEvent("lostpointercapture",a);n.dispatchEvent(a)},MSGotPointerCapture:function(a){a=n.makeEvent("gotpointercapture",a);n.dispatchEvent(a)}},P,Q;window.navigator.msPointerEnabled?(P=function(a){d(a);c(this);0!==n.pointermap.get(a).buttons&&this.msSetPointerCapture(a)},Q=function(a){d(a);this.msReleasePointerCapture(a)}):(P=function(a){d(a);c(this);0!==n.pointermap.get(a).buttons&&n.setCapture(a,this)},Q=function(a){d(a);n.releaseCapture(a,this)});var V=window.PointerEvent||
window.MSPointerEvent;return{dispatcher:n,Installer:g,PointerEvent:l,PointerMap:p,targetFinding:v,applyGlobal:function(){k();window.PointerEvent||(window.PointerEvent=l,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),n.registerSource("ms",T)):(n.registerSource("mouse",B),void 0!==window.ontouchstart&&n.registerSource("touch",O)),n.register(document));window.Element&&!Element.prototype.setPointerCapture&&
Object.defineProperties(Element.prototype,{setPointerCapture:{value:P},releasePointerCapture:{value:Q}})},applyLocal:function(a){V||(window.PointerEvent||(window.navigator.msPointerEnabled?n.registerSource("ms",T):(n.registerSource("mouse",B),void 0!==window.ontouchstart&&n.registerSource("touch",O)),n.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=P.bind(a),a.releasePointerCapture=Q.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action",
"none"))}}})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(l,m,g,f){l=function(a){function e(){var e=a.call(this,"PreventContextMenu",!0)||this;e.registerIncoming("context-menu",function(a){a.data.native.preventDefault()});return e}g(e,a);return e}(f.InputHandler);m.PreventContextMenu=l;Object.defineProperty(m,"__esModule",{value:!0});m.default=l})},"esri/views/2d/navigation/MapViewNavigation":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ./actions/Pan ./actions/Zoom ./actions/Rotate ../input/handlers/DoubleClickZoom ../input/handlers/DragPan ../input/handlers/DragRotate ../input/handlers/KeyPan ../input/handlers/KeyZoom ../input/handlers/KeyRotate ../input/handlers/MouseWheelZoom ../input/handlers/PinchAction ../viewpointUtils".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q,t,r,w,n,v){var x={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},C={zoomInOption1:"\x3d",zoomInOption2:"+",zoomOutOption1:"-",zoomOutOption2:"_"},y={dragRotate:"Alt",clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};l=function(a){function e(b){b=a.call(this)||this;b.animationManager=null;return b}g(e,a);e.prototype.initialize=function(){this.pan=new k({navigation:this});
this.zoom=new d({navigation:this});this.rotate=new c({navigation:this});this.inputManager.installHandlers("navigation",[new n.PinchRotateAndZoom(this.view),new w.MouseWheelZoom(this.view),new h.DoubleClickZoom(this.view),new b.DragPan(this.view,"primary"),new q.KeyPan(this.view,x),new t.KeyZoom(this.view,C),new r.KeyRotate(this.view,y),new p.DragRotate(this.view,"secondary"),new h.DoubleClickZoom(this.view,["Ctrl"]),new p.DragRotate(this.view,"primary",[y.dragRotate])])};e.prototype.begin=function(){this._set("interacting",
!0)};e.prototype.update=function(){};e.prototype.end=function(){this._set("interacting",!1)};e.prototype.zoomIn=function(){var a=this.view.size;this.zoom.stepScreen(this.view,{data:{x:a[0]/2,y:a[1]/2}},2)};e.prototype.zoomOut=function(){var a=this.view.size;this.zoom.stepScreen(this.view,{data:{x:a[0]/2,y:a[1]/2}},.5)};e.prototype.continousRotateClockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){v.rotateBy(a,a,-1)})};e.prototype.continousRotateCounterclockwise=
function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){v.rotateBy(a,a,1)})};e.prototype.resetRotation=function(){var a=this.get("view.viewpoint");this.view.rotation=0;this.animationManager.animateTo(a,a,null)};e.prototype.continousPanLeft=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){v.translateBy(a,a,[-10,0])})};e.prototype.continousPanRight=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,
function(a){v.translateBy(a,a,[10,0])})};e.prototype.continousPanUp=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){v.translateBy(a,a,[0,10])})};e.prototype.continousPanDown=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){v.translateBy(a,a,[0,-10])})};e.prototype.stop=function(){this.animationManager.stop()};return e}(a.declared(e));f([a.property()],l.prototype,"inputManager",void 0);f([a.property({type:Boolean,
readOnly:!0})],l.prototype,"interacting",void 0);f([a.property()],l.prototype,"pan",void 0);f([a.property()],l.prototype,"rotate",void 0);f([a.property()],l.prototype,"view",void 0);f([a.property()],l.prototype,"zoom",void 0);return l=f([a.subclass("esri.views.2d.navigation.MapViewNavigation")],l)})},"esri/views/2d/navigation/actions/Pan":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils".split(" "),
function(l,m,g,f,a,e,k){l=function(a){function c(c){c=a.call(this)||this;c.viewpoint=k.create();return c}g(c,a);c.prototype.begin=function(a,b){this.navigation.begin()};c.prototype.update=function(a,b){var c=b.currentEvent.x,d=b.currentEvent.y,c=(b=b.previousEvent)?b.x-c:-c,d=b?d-b.y:d;a.viewpoint=k.translateBy(this.viewpoint,a.viewpoint,[c||0,d||0])};c.prototype.end=function(a,b){this.navigation.end()};return c}(a.declared(e));f([a.property()],l.prototype,"viewpoint",void 0);f([a.property()],l.prototype,
"navigation",void 0);return l=f([a.subclass("esri.views.2d.navigation.actions.Pan")],l)})},"esri/views/2d/navigation/actions/Zoom":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../math/vec2".split(" "),function(l,m,g,f,a,e,k,d){l=function(a){function c(b){b=a.call(this)||this;b._canZoom=!0;b.viewpoint=k.create();return b}g(c,a);
c.prototype.pinchRotateZoom=function(a,c,d,e){a.state.viewpoint=this._scaleAndRotateViewpoint(a,c.x,c.y,d,e)};c.prototype.scroll=function(a,c){var b=this;this.navigation.begin();var e=c.data.x,f=c.data.y,h=c.data.deltaY;if(0===h||-0===h)this.navigation.end();else{var k=this._canZoomIn(a),g=this._canZoomOut(a);c=Math.pow(.6,1/60*h);1<c&&!k||1>=c&&!g?this.navigation.end():a.constraints.snapToZoom?this._canZoom&&(this._canZoom=!1,a.goTo(this._scaleAndRotateViewpoint(a,e,f,0>h?2:.5),{}).then(function(){b._canZoom=
!0})):(h=d.create(),d.set(h,e,f),a.state.viewpoint=this._scaleAndRotateViewpoint(a,e,f,c))}};c.prototype.stepScreen=function(a,c,d){this.navigation.begin();c=c.data;a.goTo(this._scaleAndRotateViewpoint(a,c.x,c.y,d),{});this.navigation.end()};c.prototype._canZoomIn=function(a){var b=a.scale;a=a.constraints.effectiveMaxScale;return 0===a||b>a};c.prototype._canZoomOut=function(a){var b=a.scale;a=a.constraints.effectiveMinScale;return 0===a||b<a};c.prototype._scaleAndRotateViewpoint=function(a,c,e,f,
h){var b=this._canZoomIn(a),g=this._canZoomOut(a),l=a.animation?a.animation.target:a.viewpoint;if(1<f&&!b||1>=f&&!g)return l;b=d.create();g=d.create();d.set(b,c,e);k.getPaddingScreenTranslation(g,a.size,a.padding);d.add(b,b,g);return h?k.scaleAndRotateBy(this.viewpoint,a.viewpoint,f,h,b,a.size):k.scaleBy(this.viewpoint,l,f,b,a.size)};return c}(a.declared(e));f([a.property()],l.prototype,"viewpoint",void 0);f([a.property()],l.prototype,"navigation",void 0);return l=f([a.subclass("esri.views.2d.navigation.actions.Zoom")],
l)})},"esri/views/2d/navigation/actions/Rotate":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../math/vec2".split(" "),function(l,m,g,f,a,e,k,d){l=function(a){function c(b){b=a.call(this)||this;b.viewpoint=k.create();return b}g(c,a);c.prototype.begin=function(a,c){this.navigation.begin()};c.prototype.update=function(a,c){var b=
d.create(),b=d.set(b,c.currentEvent.x,a.height-c.currentEvent.y);c=c.previousEvent;var e=d.create();d.set(e,c.x,a.height-c.y);b=k.angleBetween(a.state.paddedScreenCenter,b,e);a.viewpoint=k.rotateBy(this.viewpoint,a.content.viewpoint,b)};c.prototype.end=function(a,c){this.navigation.end()};return c}(a.declared(e));f([a.property()],l.prototype,"viewpoint",void 0);f([a.property()],l.prototype,"navigation",void 0);return l=f([a.subclass("esri.views.2d.actions.Rotate")],l)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(l,m,g,f,a){l=function(e){function f(a,c){var d=e.call(this,"esri.views.2d.input.handlers.DoubleClickZoom",!0)||this;d.view=a;d.registerIncoming("double-click",c,function(a){return d._handleDoubleClick(a,c)});return d}g(f,e);f.prototype._handleDoubleClick=function(d,c){a.eventMatchesPointerType(d.data.native,"primary")&&(this.view.navigation.zoom.stepScreen(this.view,d,c?.5:
2),d.stopPropagation())};return f}(f.InputHandler);m.DoubleClickZoom=l})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(l,m){m.eventMatchesPointerType=function(g,f){switch(f){case "primary":return"touch"===g.pointerType||0===g.button;case "secondary":return"touch"!==g.pointerType&&2===g.button;case "tertiary":return"touch"!==g.pointerType&&1===g.button}}})},"esri/views/2d/input/handlers/DragPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../input/InputHandler","../../../input/handlers/support"],function(l,m,g,f,a){l=function(e){function f(a,c,f){var b=e.call(this,"esri.views.2d.input.handlers.DragPan - "+c,!0)||this;b.view=a;b.pointerType=c;b.registerIncoming("drag",f,function(a){return b._handleDrag(a)});return b}g(f,e);f.prototype._handleDrag=function(d){var c=d.data;if(!(1<c.pointers.length)){var e=c.pointers[0];if(a.eventMatchesPointerType(e.startEvent.native,this.pointerType)){var b=this.view.navigation.pan;switch(c.action){case "start":b.begin(this.view,
e);break;case "update":b.update(this.view,e);break;case "end":b.end(this.view,e)}d.stopPropagation()}}};return f}(f.InputHandler);m.DragPan=l})},"esri/views/2d/input/handlers/DragRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(l,m,g,f,a){l=function(e){function f(a,c,f){var b=e.call(this,"esri.views.2d.input.handlers.DragRotate - "+c,!0)||this;b.view=a;b.pointerType=c;b.registerIncoming("drag",
f,function(a){return b._handleDrag(a)});return b}g(f,e);f.prototype._handleDrag=function(d){var c=d.data;if(!(1<c.pointers.length)){var e=c.pointers[0];if(a.eventMatchesPointerType(e.startEvent.native,this.pointerType)){var b=this.view.navigation.rotate;switch(c.action){case "start":b.begin(this.view,e);break;case "update":b.update(this.view,e);break;case "end":b.end(this.view,e)}d.stopPropagation()}}};return f}(f.InputHandler);m.DragRotate=l})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(l,m,g,f){l=function(a){function e(e,d,c){var f=a.call(this,"esri.views.2d.input.handlers.KeyPan",!0)||this;f.view=e;f.keys=d;f._keyMap=(b={},b[d.left]="left",b[d.right]="right",b[d.up]="up",b[d.down]="down",b);f.registerIncoming("key-down",c,function(a){return f._handleKeyDown(a)});f.registerIncoming("key-up",c,function(a){return f._handleKeyUp(a)});return f;var b}g(e,a);e.prototype._handleKeyDown=function(a){a.data.repeat||
this._handleKey(a,!0)};e.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};e.prototype._handleKey=function(a,d){var c=this._keyMap[a.data.key];if(null!=c){if(d)switch(c){case "left":this.view.navigation.continousPanLeft();break;case "right":this.view.navigation.continousPanRight();break;case "up":this.view.navigation.continousPanUp();break;case "down":this.view.navigation.continousPanDown()}else this.view.navigation.stop();a.stopPropagation()}};return e}(f.InputHandler);m.KeyPan=l})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(l,m,g,f){l=function(a){function e(e,d,c){var f=a.call(this,"esri.views.2d.input.handlers.KeyZoom",!0)||this;f.view=e;f.keys=d;f._keyToScale=(b={},b[d.zoomInOption1]=2,b[d.zoomInOption2]=2,b[d.zoomOutOption1]=.5,b[d.zoomOutOption2]=.5,b);f.registerIncoming("key-down",c,function(a){return f._handleKeyDown(a)});return f;var b}g(e,a);e.prototype._handleKeyDown=function(a){this._handleKey(a)};e.prototype._handleKey=
function(a){var d=a.modifiers;if(!(0<d.size)||d.has("Shift")){var d=this._keyToScale[a.data.key],c=this.view.size,c={data:{x:c[0]/2,y:c[1]/2}};d&&(this.view.navigation.zoom.stepScreen(this.view,c,d),a.stopPropagation())}};return e}(f.InputHandler);m.KeyZoom=l})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(l,m,g,f){l=function(a){function e(e,d,c){var f=a.call(this,"esri.views.2d.input.handlers.KeyRotate",
!0)||this;f.view=e;f.keys=d;f._keyToDirection=(b={},b[d.clockwiseOption1]="clockwise",b[d.clockwiseOption2]="clockwise",b[d.counterClockwiseOption1]="counterClockwise",b[d.counterClockwiseOption2]="counterClockwise",b[d.resetOption1]="reset",b[d.resetOption2]="reset",b);f.registerIncoming("key-down",c,function(a){return f._handleKeyDown(a)});f.registerIncoming("key-up",c,function(a){return f._handleKeyUp(a)});return f;var b}g(e,a);e.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,
!0)};e.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};e.prototype._handleKey=function(a,d){var c=a.modifiers;0<c.size&&!c.has("Shift")||!this.view.constraints.rotationEnabled||!(c=this._keyToDirection[a.data.key])||(d?"clockwise"===c?this.view.navigation.continousRotateClockwise():"counterClockwise"===c?this.view.navigation.continousRotateCounterclockwise():this.view.navigation.resetRotation():this.view.navigation.stop(),a.stopPropagation())};return e}(f.InputHandler);m.KeyRotate=l})},
"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(l,m,g,f){l=function(a){function e(e,d){var c=a.call(this,"esri.views.2d.input.handlers.MouseWheelZoom",!0)||this;c.view=e;c.registerIncoming("mouse-wheel",d,function(a){return c._handleMouseWheel(a)});return c}g(e,a);e.prototype._handleMouseWheel=function(a){var d=this;this._timerId&&clearTimeout(this._timerId);this._timerId=setTimeout(function(){d.view.navigation.interacting&&
d.view.navigation.end()},250);this.view.navigation.zoom.scroll(this.view,a);a.stopPropagation()};return e}(f.InputHandler);m.MouseWheelZoom=l})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(l,m,g,f){l=function(a){function e(e){var d=a.call(this,"esri.views.2d.input.handlers.PinchZoom",!0)||this;d.view=e;d.registerIncoming("drag",function(a){return d._handleDrag(a)});return d}g(e,
a);e.prototype._handleDrag=function(a){var d=a.data;if(!(2>d.pointers.length)&&this.view.constraints.rotationEnabled){var c=d.currentState,e=c.angle,b=c.radius,c=c.center,f=d.previousState,g=f.radius,f=f.angle;switch(d.action){case "start":this.view.navigation.begin();break;case "update":g&&this.view.navigation.zoom.pinchRotateZoom(this.view,c,b/g,180*(e-f)/Math.PI);break;case "end":this.view.navigation.end()}a.stopPropagation()}};return e}(f.InputHandler);m.PinchRotateAndZoom=l})},"esri/views/ui/ZoomBox":function(){define("dojo/_base/lang dojo/dom-construct ../../core/Accessor ../../core/HandleRegistry ../../core/requestAnimationFrame ../../views/2d/input/handlers/DragZoom".split(" "),
function(l,m,g,f,a,e){var k={container:"esri-zoom-box__container",overlay:"esri-zoom-box__overlay",background:"esri-zoom-box__overlay-background",box:"esri-zoom-box__outline"};return g.createSubclass({declaredClass:"esri.views.ui.ZoomBox",constructor:function(){this._event={x:0,y:0,width:0,height:0};this._handles=new f;this._redraw=this._redraw.bind(this)},initialize:function(){this.inputManager.installHandlers("zoombox",[new e(this.view,"primary",["Shift"]),new e(this.view,"primary",["Shift","Ctrl"])])},
destroy:function(){this.view=null},_container:null,_overlay:null,_backgroundShape:null,_boxShape:null,_handles:null,_event:null,properties:{view:{set:function(a){var c=this._get("view");this._handles.removeAll();this._destroyOverlay(c);this._set("view",a)}},inputManager:null,css:k,interacting:{readOnly:!0,value:!1}},start:function(a){this._createContainer();this._createOverlay();this._set("interacting",!0)},update:function(d){l.mixin(this._event,d);this._rafId||(this._rafId=a(this._redraw))},end:function(a){var c=
this.view,d=c.toMap(a.x+.5*a.width,a.y+.5*a.height),b=Math.min(a.width/c.width,a.height/c.height);-1===a.direction&&(b=1/b);this._destroyOverlay();this._set("interacting",!1);c.goTo({center:d,scale:c.scale*b})},_updateBox:function(a,c,e,b){var d=this._boxShape;d.setAttributeNS(null,"x",a);d.setAttributeNS(null,"y",c);d.setAttributeNS(null,"width",e);d.setAttributeNS(null,"height",b);d.setAttributeNS(null,"class",k.box)},_updateBackground:function(a,c,e,b){this._backgroundShape.setAttributeNS(null,
"d",this._toSVGPath(a,c,e,b,this.view.width,this.view.height))},_createContainer:function(){var a=m.create("div",{className:k.container});this.view.root.appendChild(a);this._container=a},_createOverlay:function(){var a=this.view.width,c=this.view.height,e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M 0 0 L "+a+" 0 L "+a+" "+c+" L 0 "+c+" Z");e.setAttributeNS(null,"class",k.background);a=document.createElementNS("http://www.w3.org/2000/svg","rect");c=document.createElementNS("http://www.w3.org/2000/svg",
"svg");c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");c.setAttributeNS(null,"class",k.overlay);c.appendChild(e);c.appendChild(a);this._container.appendChild(c);this._backgroundShape=e;this._boxShape=a;this._overlay=c},_destroyOverlay:function(a){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=this._backgroundShape=this._boxShape=this._overlay=null},_toSVGPath:function(a,c,e,b,f,g){e=
a+e;b=c+b;return"M 0 0 L "+f+" 0 L "+f+" "+g+" L 0 "+g+" ZM "+a+" "+c+" L "+a+" "+b+" L "+e+" "+b+" L "+e+" "+c+" Z"},_redraw:function(){this._rafId=null;if(this._overlay){var d=this._event;this._updateBox(d.x,d.y,d.width,d.height);this._updateBackground(d.x,d.y,d.width,d.height);this._rafId=a(this._redraw)}}})})},"esri/views/2d/input/handlers/DragZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],
function(l,m,g,f,a){return function(e){function f(a,c,f){var b=e.call(this,"esri.views.2d.input.handlers.DragZoom - "+c,!0)||this;b.view=a;b.pointerType=c;b.event={x:0,y:0,width:0,height:0,direction:1};b.registerIncoming("drag",f,function(a){return b._handleDrag(a,f)});return b}g(f,e);f.prototype._handleDrag=function(d,c){var e=d.data;if(!(1<e.pointers.length)){var b=e.pointers[0];if(a.eventMatchesPointerType(b.startEvent.native,this.pointerType)){var f=b.currentEvent.x,g=b.currentEvent.y,k=b.startEvent.x,
b=b.startEvent.y;f>k?(this.event.x=k,this.event.width=f-k):(this.event.x=f,this.event.width=k-f);g>b?(this.event.y=b,this.event.height=g-b):(this.event.y=g,this.event.height=b-g);this.event.direction=1<c.length?-1:1;c=this.view.zoomBox;switch(e.action){case "start":c.start(this.event);break;case "update":c.update(this.event);break;case "end":c.end(this.event)}d.stopPropagation()}}};return f}(f.InputHandler)})},"esri/views/2d/layers/GraphicsLayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./LayerView2D ./support/GraphicsView2D".split(" "),
function(l,m,g,f,a,e,k){l=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.graphicsView=new k;c.container=c.graphicsView.container;return c}g(c,a);c.prototype.hitTest=function(a,b){return this.graphicsView.hitTest(a,b)};c.prototype.attach=function(){var a=this;this.layer.createGraphicsController({layerView:this}).then(function(b){a.graphicsView.view=a.view;a.graphicsView.graphics=b.graphics})};c.prototype.detach=function(){this.graphicsView.graphics=null};c.prototype.update=
function(a){};c.prototype.moveStart=function(){};c.prototype.viewChange=function(){};c.prototype.moveEnd=function(){};return c}(a.declared(e));return l=f([a.subclass("esri.views.2d.layers.GraphicsLayerView2D")],l)})},"esri/views/2d/layers/LayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/watchUtils ../../layers/LayerView".split(" "),function(l,m,g,f,a,e,k){l=function(a){function c(){var c=
null!==a&&a.apply(this,arguments)||this;c.attached=!1;c.moving=!1;c.updateRequested=!1;c.updating=!1;return c}g(c,a);c.prototype.initialize=function(){var a=this;this.requestUpdate();e.init(this,"suspended",function(b){a.container.visible=!b;!b&&a.updateRequested&&a.view.requestLayerViewUpdate(a)},!0);e.init(this,"fullOpacity",function(b){a.container.opacity=b},!0)};c.prototype.destroy=function(){this.updateRequested=!1;this.layer=null};c.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=
!0,this.suspended||this.view.requestLayerViewUpdate(this))};c.prototype.processUpdate=function(a){this._set("updateParameters",a);this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(a))};c.prototype.canResume=function(){var a=this.inherited(arguments),b=this.layer;if(a&&null!=b.minScale&&null!=b.minScale){var a=this.view.scale,c=b.minScale,b=b.maxScale,d=!c,e=!b;!d&&a<=c&&(d=!0);!e&&a>=b&&(e=!0);a=d&&e}return a};return c}(a.declared(k));f([a.property()],l.prototype,"attached",
void 0);f([a.property()],l.prototype,"container",void 0);f([a.property()],l.prototype,"moving",void 0);f([a.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],l.prototype,"suspended",void 0);f([a.property({readOnly:!0})],l.prototype,"updateParameters",void 0);f([a.property()],l.prototype,"updateRequested",void 0);f([a.property({dependsOn:["updateRequested"]})],l.prototype,"updating",void 0);f([a.property()],l.prototype,"view",void 0);return l=f([a.subclass("esri.views.2d.layers.LayerView2D")],
l)})},"esri/views/2d/layers/FeatureLayerView2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/HandleRegistry ./LayerView2D ./support/FeaturesView2D".split(" "),function(l,m,g,f,a,e,k,d){l=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._handles=new e;b.featuresView=new d;b.container=b.featuresView.container;return b}g(c,a);c.prototype.queryGraphics=
function(){return this.featuresView.queryGraphics()};c.prototype.queryFeatures=function(a){return this.featuresView.queryFeatures(a)};c.prototype.queryObjectIds=function(a){return this.featuresView.queryObjectIds(a)};c.prototype.queryFeatureCount=function(a){return this.featuresView.queryFeatureCount(a)};c.prototype.queryExtent=function(a){return this.featuresView.queryExtent(a)};c.prototype.hitTest=function(a,c){return this.featuresView.hitTest(a,c)};c.prototype.update=function(a){this.controller&&
this.controller.update&&this.controller.update(a)};c.prototype.attach=function(){var a=this;this.layer.createGraphicsController({layerView:this}).then(function(b){a.attached&&(a._set("controller",b),a.requestUpdate(),a.featuresView.mapView=a.view,a.featuresView.graphics=b.graphics,a.featuresView.layer=a.layer,a.featuresView.renderer=a.layer.renderer,a._handles.add(a.layer.watch("renderer",function(){a.featuresView.renderer=a.layer.renderer})))})};c.prototype.detach=function(){this.featuresView.graphics=
null;this.featuresView.renderer=null;this._handles.removeAll();this.controller&&(this.controller.destroy&&this.controller.destroy(),this._set("controller",null))};c.prototype.moveStart=function(){};c.prototype.viewChange=function(){};c.prototype.moveEnd=function(){this.requestUpdate()};c.prototype.isUpdating=function(){return null==this.controller||!0===this.get("controller.updating")||0===this.get("controller._socketConnector.status")};return c}(a.declared(k));f([a.property({readOnly:!0})],l.prototype,
"controller",void 0);f([a.property({dependsOn:["controller.updating","controller._socketConnector.status"]})],l.prototype,"updating",void 0);return l=f([a.subclass("esri.views.2d.layers.FeatureLayerView2D")],l)})},"esri/views/2d/layers/support/FeaturesView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Collection ../../../../core/HandleRegistry ../../../../core/promiseUtils ../../../../core/Error ../../../../renderers/support/renderingInfoUtils ../../../../Graphic ../../../layers/GraphicsView ../../engine/graphics/GFXSurface ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject ../../../../layers/graphics/QueryEngine".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q,t,r,w){l=function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=a.apply(this,b)||this;d._handles=new k;d._backgroundGroup=new t;d._frontGroup=new t;d._frontObjects=new Map;d._backgroundObjects=new Map;d._queryEngine=new w;d._scale=0;d.container=new q;d.layer=null;d.container.addChild(d._backgroundGroup);d.container.addChild(d._frontGroup);d.watch("graphics",function(){return d._reset()});d.watch("renderer",function(){return d._resymbolize()});
d.watch("layer",function(){return d._setObjectId()});d.watch("mapView.scale, mapView.stationary",function(){return d._applyScale()});return d}g(b,a);b.prototype.queryGraphics=function(){return this._queryEngine?this._queryEngine.queryFeatures():this._rejectQuery()};b.prototype.queryFeatures=function(a){return this._queryEngine?this._queryEngine.queryFeatures(a):this._rejectQuery()};b.prototype.queryObjectIds=function(a){return this._queryEngine?this._queryEngine.queryObjectIds(a):this._rejectQuery()};
b.prototype.queryFeatureCount=function(a){return this._queryEngine?this._queryEngine.queryFeatureCount(a):this._rejectQuery()};b.prototype.queryExtent=function(a){return this._queryEngine?this._queryEngine.queryExtent(a):this._rejectQuery()};b.prototype.hitTest=function(a,b){a+=this.mapView.position[0]-window.pageXOffset;b+=this.mapView.position[1]-window.pageYOffset;return(a=this.container.hitTest(a,b))?d.resolve(a.graphic):null};b.prototype._reset=function(){var a=this;this._handles.remove("graphics");
this.graphics&&(this.graphics.forEach(this._add,this),this._queryEngine.features=this.graphics,this._handles.add(this.graphics.on("change",function(b){return a._graphicsChangeHandler(b)}),"graphics"))};b.prototype._applyScale=function(){var a=this.get("mapView.scale"),b=this.get("mapView.stationary");a!==this._scale&&b&&(this._scale=a,this._resymbolize())};b.prototype._resymbolize=function(){var a=this;this.graphics&&this.graphics.forEach(function(b){return a._resymbolizeGraphic(b)})};b.prototype._add=
function(a){if(!this._frontObjects.has(a)){var b=h.getRenderingInfo(a,{renderer:this.renderer,viewingMode:"map",scale:this.mapView.state.scale,resolution:this.mapView.state.resolution});if(b){var c=new r;c.graphic=a;c.renderingInfo=b;this._frontObjects.set(a,c);this._frontGroup.addChild(c);var d=b.renderer&&b.renderer.backgroundFillSymbol;d&&c.isPolygonMarkerSymbol&&(c=new r,c.graphic=a,c.renderingInfo=null!=b.outlineSize?{symbol:d,size:[b.outlineSize,b.outlineSize,b.outlineSize]}:{symbol:d},this._backgroundObjects.set(a,
c),this._backgroundGroup.addChild(c))}}};b.prototype._remove=function(a){var b=this._frontObjects.get(a);b&&(this._frontObjects.delete(a),this._frontGroup.removeChild(b),this._backgroundObjects.has(a)&&(b=this._backgroundObjects.get(a),this._backgroundObjects.delete(a),this._backgroundGroup.removeChild(b)))};b.prototype._resymbolizeGraphic=function(a){if(this._frontObjects.has(a)){var b=h.getRenderingInfo(a,{renderer:this.renderer,viewingMode:"map",scale:this.mapView.state.scale,resolution:this.mapView.state.resolution});
if(b){var c=this._frontObjects.get(a);c&&(c.renderingInfo=b);var d=b.renderer&&b.renderer.backgroundFillSymbol,e=this._backgroundObjects.get(a);e&&(d&&c.isPolygonMarkerSymbol?(e||(e=new r,e.graphic=a,this._backgroundObjects.set(a,e),this._backgroundGroup.addChild(e)),e.renderingInfo=null!=b.outlineSize?{symbol:d,size:[b.outlineSize,b.outlineSize,b.outlineSize]}:{symbol:d}):!d&&e&&(this._backgroundObjects.delete(a),this._backgroundGroup.removeChild(e)))}}};b.prototype._setObjectId=function(){this._queryEngine.objectIdField=
this.layer.objectIdField};b.prototype._rejectQuery=function(){return d.reject(new c("GraphicsLayerView2D","Not ready to execute query"))};b.prototype._graphicsChangeHandler=function(a){for(var b=a.removed,c=0,d=a.added;c<d.length;c++)a=d[c],this._add(a);for(c=0;c<b.length;c++)a=b[c],this._remove(a)};return b}(a.declared(p));f([a.property()],l.prototype,"container",void 0);f([a.property(),a.cast(e.ofType(b))],l.prototype,"graphics",void 0);f([a.property()],l.prototype,"layer",void 0);f([a.property()],
l.prototype,"mapView",void 0);return l=f([a.subclass("esri.views.2d.layers.support.FeaturesView2D")],l)})},"esri/renderers/support/renderingInfoUtils":function(){define(["require","exports"],function(l,m){function g(a,e){if(!a||a.symbol)return null;e=e.renderer;return a&&e&&e.getObservationRenderer?e.getObservationRenderer(a):e}function f(a,e){if(a.symbol)return a.symbol;var f=g(a,e);return f&&f.getSymbol(a,e)}m.getRenderer=g;m.getSymbol=f;m.getRenderingInfo=function(a,e){var k=g(a,e),d=f(a,e);if(!d)return null;
d={renderer:k,symbol:d};if(k){k.colorInfo&&(d.color=k.getColor(a).toRgba());if(k.sizeInfo){var c=k.getSize(a);d.size=[c,c,c]}if(k.visualVariables){a=k.getVisualVariableValues(a,e);c=["proportional","proportional","proportional"];for(e=0;e<a.length;e++){var k=a[e],h=k.variable,b=h.type;"color"===b?d.color=k.value.toRgba():"size"===b?"outline"===h.target?d.outlineSize=k.value:(h=k.variable.axis,k=k.variable.useSymbolValue?"symbolValue":k.value,"width"===h?c[0]=k:"depth"===h?c[1]=k:"height"===h?c[2]=
k:c[0]="width-and-depth"===h?c[1]=k:c[1]=c[2]=k):"opacity"===b?d.opacity=k.value:"rotation"===b&&(d.rotationAngle=k.value)}if(isFinite(c[0])||isFinite(c[1])||isFinite(c[2]))d.size=c}}return d}})},"esri/views/2d/layers/TiledLayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./LayerView2D ./support/TileStrategy ../engine/Bitmap ../engine/BitmapSource ../engine/BitmapContainer ../engine/Canvas2DContainer ../../../request ./support/TileKey ./support/TileInfoView ./support/TileQueue".split(" "),
function(l,m,g,f,a,e,k,d,c,h,b,p,q,t,r){l=function(a){function e(){var c=null!==a&&a.apply(this,arguments)||this;c._tileStrategy=null;c._tileInfoView=null;c._tileQueue=null;c.container=new b;c.layer=null;return c}g(e,a);e.prototype.hitTest=function(a,b){return null};e.prototype.update=function(a){this._tileQueue.pause();this._tileQueue.state=a.state;this._tileStrategy.update(a);this._tileQueue.resume();this.notifyChange("updating")};e.prototype.attach=function(){var a=this;this._tileContainer=new h;
this.container.addChild(this._tileContainer);this._tileInfoView=new t(this.layer.tileInfo,this.layer.fullExtent);this._tileQueue=new r({tileInfoView:this._tileInfoView,process:function(b){return a.fetchTile(b)}});this._tileStrategy=new k({container:{addTile:function(b){return a._tileContainer.addChild(b)},removeTile:function(b){return a._tileContainer.removeChild(b)},removeAllTiles:function(){return a._tileContainer.removeAllChildren()}},tileInfoView:this._tileInfoView,requestUpdate:function(){return a.requestUpdate()},
fetchTile:function(b){return a._tileQueue.push(q.pool.acquire(b))}})};e.prototype.detach=function(){this._tileStrategy.destroy();this._tileQueue.clear();this.container.removeChild(this._tileContainer);this._tileQueue=this._tileStrategy=this._tileInfoView=this._tileContainer=null};e.prototype.moveStart=function(){this.requestUpdate()};e.prototype.viewChange=function(){this.requestUpdate()};e.prototype.moveEnd=function(){this.requestUpdate()};e.prototype.getTileBounds=function(a,b){return this._tileStrategy.tileInfoView.getTileBounds(a,
b)};e.prototype.getTileCoords=function(a,b){return this._tileStrategy.tileInfoView.getTileCoords(a,b)};e.prototype.getTileResolution=function(a){return this._tileStrategy.tileInfoView.getTileResolution(a)};e.prototype.fetchTile=function(a){var b=this,c=this.layer.tilemapCache;return c?c.fetchAvailabilityUpsample(a.level,a.row,a.col,a).then(function(){return b._fetchImage(a)}):this._fetchImage(a)};e.prototype.isUpdating=function(){return this.attached&&(this._tileStrategy.updating||this.updateRequested)};
e.prototype._fetchImage=function(a){var b=this,e=this.layer.getTileUrl(a.level,a.row,a.col),e=p(e,{responseType:"image"}).then(function(e){e=new c(e.data);e.coords=b.getTileCoords(e.coords,a);e.resolution=b.getTileResolution(a);return new d(e)});e.always(function(){return q.pool.release(a)});return e};return e}(a.declared(e));f([a.property({dependsOn:["updateRequested"]})],l.prototype,"updating",void 0);return l=f([a.subclass("esri.views.2d.layers.TiledLayerView2D")],l)})},"esri/views/2d/engine/Bitmap":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(l,m,g,f){var a=[0,0];return function(e){function f(a){var c=e.call(this)||this;c.source=a;c.coords=[0,0];c.resolution=0;c.rotation=0;c.width=0;c.height=0;c.source.onReady(function(){return c.requestRender()});return c}g(f,e);f.prototype.attach=function(a){return!0};f.prototype.detach=function(){};f.prototype.render=function(a){this.source&&this.source.ready&&null!=a.context&&this.renderCanvas2D(a)};f.prototype.renderCanvas2D=
function(d){var c=this.source,e=d.context,b=d.state;d=b.rotation;var f=this.resolution/b.resolution;if(!(.05>f)){e.save();var g=b.toScreen(a,this.coords),b=g[0],g=g[1];1===f?e.translate(Math.round(b),Math.round(g)):(e.translate(b,g),e.scale(f,f));d&&e.rotate(d*Math.PI/180);c.rotation&&(e.translate(.5*c.width,.5*c.height),e.rotate(-c.rotation*Math.PI/180),e.translate(.5*-c.width,.5*-c.height));d=(this.coords[0]-c.coords[0])/c.resolution;f=-(this.coords[1]-c.coords[1])/c.resolution;b=this.resolution/
c.resolution*c.width;g=this.resolution/c.resolution*c.height;e.clearRect(0,0,this.width,this.height);c.draw(e,Math.round(d),Math.round(f),Math.round(b),Math.round(g),0,0,this.width,this.height);e.restore()}};return f}(f)})},"esri/views/2d/engine/BitmapSource":function(){define(["require","exports","../../../core/ArrayPool"],function(l,m,g){var f=new g;return function(){function a(a){this._readySignals=null;this.coords=[0,0];this._width=this.rotation=this.resolution=this._height=0;this._loadHandler=
this._loadHandler.bind(this);this.data=a}Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(a){this._data&&this._data.removeEventListener("load",this._loadHandler);this._data=a;this._width=this._height=0;if(a instanceof HTMLImageElement)a.naturalWidth?(this._width=a.naturalWidth,this._height=a.naturalHeight,this._emitReady()):a.addEventListener("load",this._loadHandler);else if(0<a.width&&0<a.height)this._width=a.width,this._height=a.height,this._emitReady();
else throw this._data=null,Error("[BitmapSource] data cannot have size 0");},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"ready",{get:function(){return 0<this._width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});a.prototype.draw=function(a,f,d,c,g,b,l,m,t){this.ready&&a.drawImage(this._data,
f,d,c,g,b,l,m,t)};a.prototype.onReady=function(a){this.ready?a(this):(this._readySignals||(this._readySignals=f.acquire()),this._readySignals.push(a))};a.prototype._emitReady=function(){if(this._readySignals){for(var a=0,g=this._readySignals;a<g.length;a++)(0,g[a])(this);f.release(this._readySignals);this._readySignals=null}};a.prototype._loadHandler=function(a){a=a.target;a.removeEventListener("load",this._loadHandler);this._width=a.naturalWidth;this._height=a.naturalHeight;this._emitReady()};return a}()})},
"esri/views/2d/engine/BitmapContainer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Container ../ViewState ../viewStateUtils ../viewpointUtils".split(" "),function(l,m,g,f,a,e,k,d){var c=[0,0];return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._offScreenCanvas=null;b._offScreenRenderParameters={budget:null,clip:[],context:null,devicePixelRatio:1,state:new e({viewpoint:d.create()}),stationary:!0,rotated:!0};
return b}g(b,a);b.prototype.attach=function(b){this._offScreenCanvas||(this._offScreenCanvas=document.createElement("canvas"),this._offScreenRenderParameters.context=this._offScreenCanvas.getContext("2d"));return a.prototype.attach.call(this,b)};b.prototype.detach=function(b){a.prototype.detach.call(this,b);this._offScreenCanvas=null;this._offScreenRenderParameters.context=null};b.prototype.render=function(b){this.visible&&a.prototype.render.call(this,b)};b.prototype.prepareChildrenRenderParameters=
function(a){var b=a.state,d=this._offScreenRenderParameters,e=this._offScreenCanvas,f=d.state,g=d.context,h=k.getOuterSize(c,b),l=h[0],h=h[1];f.viewpoint=b.viewpoint.clone();f.viewpoint.rotation=0;f.size=c;e.width!==l||e.height!==h?(e.width=l,e.height=h):g.clearRect(0,0,l,h);d.budget=a.budget;d.devicePixelRatio=a.devicePixelRatio;d.clip.length=0;return d};b.prototype.detachChild=function(a,b){a.detach()};b.prototype.attachChild=function(a,b){return a.attach(b)};b.prototype.renderChild=function(a,
b){a.render(b)};b.prototype.beforeRenderChildren=function(a,b){this.sortChildren(function(a,b){return b.resolution-a.resolution})};b.prototype.afterRenderChildren=function(a,b){var c=a.context;a=a.state;var d=b.context;b=b.state;0===a.rotation?c.drawImage(d.canvas,0,0):(c.save(),c.translate(.5*a.width,.5*a.height),c.rotate(a.rotation*Math.PI/180),c.translate(.5*-a.width,.5*-a.height),c.drawImage(d.canvas,.5*(a.width-b.width),.5*(a.height-b.height)),c.restore())};return b}(a)})},"esri/views/2d/viewStateUtils":function(){define(["require",
"exports"],function(l,m){var g=Math.PI/180;m.snapToPixel=function(f,a,e){var g=e.resolution;e=e.size;f[0]=g*(Math.round(a[0]/g)+e[0]%2*.5);f[1]=g*(Math.round(a[1]/g)+e[1]%2*.5);return f};m.getOuterSize=function(f,a){var e=a.rotation*g,k=Math.abs(Math.cos(e)),e=Math.abs(Math.sin(e)),d=a.size;a=d[0];d=d[1];f[0]=Math.round(d*e+a*k);f[1]=Math.round(d*k+a*e);return f};m.getBBox=function(f,a,e){void 0===e&&(e=a.size);var g=a.center,d=g[0],g=g[1],c=e[0];e=e[1];a=.5*a.resolution;f[0]=d-a*c;f[1]=g-a*e;f[2]=
d+a*c;f[3]=g+a*e;return f};m.bboxIntersects=function(f,a){var e=f[1],g=f[2],d=f[3],c=a[0],h=a[1],b=a[3];return!(f[0]>a[2]||g<c||e>b||d<h)}})},"esri/views/2d/engine/Canvas2DContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Container"],function(l,m,g,f){return function(a){function e(){return null!==a&&a.apply(this,arguments)||this}g(e,a);e.prototype.createElement=function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");
return a};e.prototype.setElement=function(a){this.element=a};e.prototype.render=function(e){var d=this.element.style;this.visible?(d.display="block",d.opacity=""+this.opacity,this.element.width=e.state.width,this.element.height=e.state.height,a.prototype.render.call(this,e)):d.display="none"};e.prototype.prepareChildrenRenderParameters=function(a){a.context=this.element.getContext("2d");return a};e.prototype.beforeRenderChildren=function(a,d){a=d.context;var c=d.state;a.save();if(c.spatialReference.isWrappable){var e=
c.width,b=c.height;d=c.rotation*Math.PI/180;var f=Math.round(e*Math.abs(Math.cos(d))+b*Math.abs(Math.sin(d))),c=Math.round(c.worldScreenWidth);c<f&&(e*=.5,b*=.5,d&&(a.translate(e,b),a.rotate(d),a.translate(-e,-b)),a.beginPath(),a.rect(e-.5*c,b-.5*f,c,f),a.closePath(),d&&(a.translate(e,b),a.rotate(-d),a.translate(-e,-b)),a.clip("evenodd"))}};e.prototype.afterRenderChildren=function(a,d){d.context.restore()};e.prototype.attachChild=function(a,d){return a.attach(d)};e.prototype.detachChild=function(a,
d){a.detach(d)};e.prototype.renderChild=function(a,d){d.context.save();a.render(d);d.context.restore()};return e}(f)})},"url:esri/widgets/Popup/templates/Popup.html":'\x3cdiv role\x3d"presentation" class\x3d"${_css.invisible}"\x3e\r\n  \x3c!-- Popup Container --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_containerNode" class\x3d"${_css.container} ${_css.alignTop} ${_css.shadow}"\x3e\r\n    \x3cdiv class\x3d"${_css.main}"\x3e\r\n      \x3c!-- Popup Docked Pagination --\x3e\r\n      \x3csection class\x3d"${_css.paginationDocked}"\x3e\r\n        \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\r\n          \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\r\n          \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${_css.paginationDockedButtons}"\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousDockedNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextDockedNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextDockedNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuDockedNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/section\x3e\r\n      \x3c!-- /Popup Docked Pagination --\x3e\r\n      \x3c!-- Popup Header --\x3e\r\n      \x3cheader class\x3d"${_css.header}"\x3e\r\n        \x3ch1 data-dojo-attach-point\x3d"_titleNode" class\x3d"${_css.headerTitle}"\x3e\x3c/h1\x3e\r\n        \x3cdiv class\x3d"${_css.headerButtons}"\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_dockNode" class\x3d"${_css.button} ${_css.buttonDock}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToRight}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToTop}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToLeft}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToBottom}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.dock}\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconUndock}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.undock}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_closeNode" class\x3d"${_css.button}" title\x3d"${_i18n.close}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconClose}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.close}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/header\x3e\r\n      \x3c!-- /Popup Header --\x3e\r\n      \x3c!-- Popup Content --\x3e\r\n      \x3carticle class\x3d"${_css.content}" data-dojo-attach-point\x3d"_bodyContentNode"\x3e\x3c/article\x3e\r\n      \x3c!-- /Popup Content --\x3e\r\n      \x3c!-- Popup Footer --\x3e\r\n      \x3cfooter class\x3d"${_css.footer}"\x3e\r\n        \x3c!-- Popup Actions --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_actionsNode" class\x3d"${_css.actions}"\x3e\x3c/div\x3e\r\n        \x3c!-- /Popup Actions --\x3e\r\n        \x3c!-- Popup Pagination --\x3e\r\n        \x3csection class\x3d"${_css.pagination}"\x3e\r\n          \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/section\x3e\r\n        \x3c!-- /Popup Pagination --\x3e\r\n      \x3c/footer\x3e\r\n      \x3c!-- /Popup Footer --\x3e\r\n      \x3c!-- Popup Menu --\x3e\r\n      \x3csection class\x3d"${_css.featureMenu}" data-dojo-attach-point\x3d"_pageMenuSectionNode" aria-hidden\x3d"true"\x3e\r\n        \x3ch2 class\x3d"${_css.featureMenuHeader}" data-dojo-attach-point\x3d"_pageMenuInfoNode"\x3e\x3c/h2\x3e\r\n        \x3cnav class\x3d"${_css.featureMenuViewport}"\x3e\r\n          \x3col class\x3d"${_css.featureMenuList}" role\x3d"menu" data-dojo-attach-point\x3d"_paginationNode"\x3e\x3c/ol\x3e\r\n        \x3c/nav\x3e\r\n      \x3c/section\x3e\r\n      \x3c!-- /Popup Menu --\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- Popup Pointer --\x3e\r\n    \x3cdiv class\x3d"${_css.pointer}" role\x3d"presentation"\x3e\r\n      \x3cdiv class\x3d"${_css.pointerDirection} ${_css.shadow}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- /Popup Pointer --\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- /Popup Container --\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/widgets/Popup/templates/PopupRenderer.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${_css.container}"\x3e\r\n    \x3cdiv class\x3d"${_css.main}"\x3e\r\n      \x3cdiv class\x3d"${_css.loadingSpinnerContainer}"\x3e\x3cspan class\x3d"${_css.iconLoading} ${_css.spinner}"\x3e\x3c/span\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_contentNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:esri/views/2d/engine/webgl/Shaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"foobarVS"\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"foobarFS"\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/views/2d/engine/webgl/bitblit.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_tex;\r\n\r\nvarying mediump vec2 v_uv;\r\n\r\nvoid main(void) {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n  v_uv \x3d a_tex;\r\n}\r\n","url:esri/views/2d/engine/webgl/bitblit.fs.glsl":"\tuniform lowp sampler2D u_tex;\r\n\tuniform lowp float u_opacity;\r\n\r\n\tvarying mediump vec2 v_uv;\r\n\r\n\tvoid main() {\r\n\t\tlowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n    // Note: output in pre-multiplied alpha for correct alpha compositing\r\n\t\tgl_FragColor \x3d color *  u_opacity;\r\n\t}\r\n",
"url:esri/views/2d/engine/webgl/stencil.vs.glsl":"attribute vec2 a_pos;\r\n\r\nvoid main() {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n}\r\n","url:esri/views/2d/engine/webgl/stencil.fs.glsl":"void main() {\r\n  gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n}\r\n","*now":function(l){l(['dojo/i18n!*preload*esri/views/nls/MapView*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},
"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/promise/all ../core/accessorSupport/decorators ../core/HandleRegistry ../core/watchUtils ../core/promiseUtils ./MapViewBase ./DOMContainer ../geometry/ScreenPoint ./ui/2d/DefaultUI2D ./2d/engine/Stage ./2d/layers/support/GraphicsView2D ./input/ViewEvents ./input/InputManager ./input/BrowserEventSource ./input/handlers/PreventContextMenu ./2d/navigation/MapViewNavigation ./ui/ZoomBox ./support/screenshotUtils".split(" "),function(l,
m,g,f,a,e,k,d,c,h,b,p,q,t,r,w,n,v,x,C,y,L){l=function(b){function e(a){var c=b.call(this,a)||this;c._graphicsView=null;c._mapViewHandles=new k;c._viewEvents=null;c.inputManager=null;c.watch("stationary",function(a){c.stage&&(c.stage.stationary=a)},!0);c.watch("state.viewpoint",function(a){c.stage&&(c.stage.state=c.state)},!0);c.watch("ready",function(a){a?c._setupStage():c._destroyStage()});d.whenFalse(c,"ready",function(){c.stage&&c.stage.removeAllChildren()});return c}g(e,b);Object.defineProperty(e.prototype,
"interacting",{get:function(){return this.navigation&&this.navigation.interacting||this.zoomBox&&this.zoomBox.interacting||!1},enumerable:!0,configurable:!0});e.prototype.hitTest=function(b,c){if(!this.ready)return null;var d;d=null!=b&&b.x?b:new p({x:b,y:c});var e=this.toMap(d);b=[this._graphicsView];b.push.apply(b,this.allLayerViews.toArray().reverse());return a(b.map(function(a){return a&&a.hitTest?a.hitTest(d.x,d.y):null})).then(function(a){return{screenPoint:d,results:a.filter(function(a){return null!=
a}).map(function(a){return{mapPoint:e,graphic:a}})}})};e.prototype.takeScreenshot=function(a){if(!this.ready)return c.reject("Map view cannot be used before it is ready");a=L.adjustScreenshotSettings(a,this);return this.stage.takeScreenshot(a)};e.prototype.on=function(a,b,c){this._viewEvents||(this._viewEvents=new w.ViewEvents(this));var d=this._viewEvents.register(a,b,c);return d?d:this.inherited(arguments)};e.prototype._disconnect=function(){this.zoomBox.destroy();this._set("zoomBox",null);this.inputManager=
this.navigation=null;this._source&&(this._source.destroy(),this._source=null);this._viewEvents&&(this._viewEvents.disconnect(),this._viewEvents=null)};e.prototype._connect=function(){this._viewEvents||(this._viewEvents=new w.ViewEvents(this));this._source||(this._source=new v.BrowserEventSource(this.surface));this.inputManager||(this.inputManager=new n.InputManager(this._source),this.inputManager.installHandlers("prevent-context-menu",[new x.PreventContextMenu]));this.navigation||(this.navigation=
new C({view:this,animationManager:this.animationManager,inputManager:this.inputManager}));this._get("zoomBox")||this._set("zoomBox",new y({view:this,inputManager:this.inputManager}));this._viewEvents.inputManager||this._viewEvents.connect(this.inputManager)};e.prototype._setupStage=function(){var a=this;this.stage||(this.stage=new t(this._get("surface")),this.stage.state=this.state,this._graphicsView=new r({view:this,graphics:this.graphics}),this.stage.addChild(this._graphicsView.container),this._updateStageChildren(),
this._mapViewHandles.add(this.allLayerViews.on("change",function(){return a._updateStageChildren()}),"allLayerViews"),this._mapViewHandles.add([d.whenNot(this,"ready",function(){return a._disconnect()}),d.when(this,"ready",function(){return a._connect()})],"inputHandlers"))};e.prototype._destroyStage=function(){this.stage||(this._graphicsView.destroy(),this._graphicsView=null,this._mapViewHandles.remove("allLayerViews"),this._mapViewHandles.remove("inputHandlers"),this._disconnect(),this.stage.removeAllChildren(),
this.stage.destroy(),this.stage=null)};e.prototype._updateStageChildren=function(){var a=this;this.stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=a.container}).forEach(function(b,c){a.stage.addChildAt(b.container,c)});this.stage.addChild(this._graphicsView.container)};return e}(e.declared(h,b));f([e.property()],l.prototype,"inputManager",void 0);f([e.property()],l.prototype,"navigation",void 0);f([e.property({dependsOn:["navigation.interacting","zoomBox.interacting"],
type:Boolean})],l.prototype,"interacting",null);f([e.property({type:q})],l.prototype,"ui",void 0);f([e.property({type:y,readOnly:!0})],l.prototype,"zoomBox",void 0);return l=f([e.subclass("esri.views.MapView")],l)});