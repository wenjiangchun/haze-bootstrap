// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define(["require","exports","./IdGen","./Util","./BoundingInfo"],function(f,t,q,k,r){f=function(){function a(d,b,c){this.singleUse=!1;this.originalColors=null;this.id=a.__idGen.gen(b);this.data=d;this.boundingInfos=c||[];k.assert(1<=d.faces.length)}a.prototype.getId=function(){return this.id};a.prototype.getData=function(){return this.data};Object.defineProperty(a.prototype,"numGroups",{get:function(){return this.data.faces.length},enumerable:!0,configurable:!0});a.prototype.getNumGroups=function(){return this.numGroups};
a.prototype.calculateAABB=function(d,b){var c=this.data.faces[d],l="triangle"===c.type?3:1;d=c.indices[c.positionKey];var c=this.data.vertexAttributes[c.positionKey].data,e=null!=b?(b[1]+1)*l:d.length,a=Infinity,g=Infinity,f=Infinity,m=-Infinity,n=-Infinity,p=-Infinity;for(b=null!=b?b[0]*l:0;b<e;b++)var h=3*d[b],l=c[h],k=c[h+1],h=c[h+2],a=Math.min(a,l),g=Math.min(g,k),f=Math.min(f,h),m=Math.max(m,l),n=Math.max(n,k),p=Math.max(p,h);return[a,g,f,m,n,p]};a.prototype.calculateBoundingInfo=function(d,
b){d=this.data.faces[d];var c="triangle"===d.type?3:1,a=d.indices[d.positionKey];if(0===a.length)for(var a=new Uint32Array(c),e=0;e<c;++e)a[e]=e;e=a.length;k.assert(0===e%c);for(var f=e/c,g=new Uint32Array(f),e=0;e<f;++e)g[e]=e;return new r(g,c,a,this.data.vertexAttributes[d.positionKey],b)};a.prototype.getBoundingInfo=function(a){var b=this.boundingInfos[a];null==b&&(b=this.calculateBoundingInfo(a),this.boundingInfos[a]=b);return b};a.prototype.invalidateBoundingInfo=function(){this.boundingInfos=
[]};return a}();f.__idGen=new q;return f});